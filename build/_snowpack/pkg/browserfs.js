import{g as na,c as ia,a as oa}from"./common/_commonjsHelpers-4f955397.js";var ot=ia(function(ui,Fs){(function(T,b){ui.exports=b()})(oa,function(){return function(rt){var T={};function b(v){if(T[v])return T[v].exports;var j=T[v]={exports:{},id:v,loaded:!1};return rt[v].call(j.exports,j,j.exports,b),j.loaded=!0,j.exports}return b.m=rt,b.c=T,b.p="",b(0)}([function(rt,T,b){(function(v,j,x,N){Object.defineProperty(T,"__esModule",{value:!0});var m=b(2),p=b(9),l;(function(n){n[n.EPERM=1]="EPERM",n[n.ENOENT=2]="ENOENT",n[n.EIO=5]="EIO",n[n.EBADF=9]="EBADF",n[n.EACCES=13]="EACCES",n[n.EBUSY=16]="EBUSY",n[n.EEXIST=17]="EEXIST",n[n.ENOTDIR=20]="ENOTDIR",n[n.EISDIR=21]="EISDIR",n[n.EINVAL=22]="EINVAL",n[n.EFBIG=27]="EFBIG",n[n.ENOSPC=28]="ENOSPC",n[n.EROFS=30]="EROFS",n[n.ENOTEMPTY=39]="ENOTEMPTY",n[n.ENOTSUP=95]="ENOTSUP"})(l||(l={}));var g={};g[l.EPERM]="Operation not permitted.",g[l.ENOENT]="No such file or directory.",g[l.EIO]="Input/output error.",g[l.EBADF]="Bad file descriptor.",g[l.EACCES]="Permission denied.",g[l.EBUSY]="Resource busy or locked.",g[l.EEXIST]="File exists.",g[l.ENOTDIR]="File is not a directory.",g[l.EISDIR]="File is a directory.",g[l.EINVAL]="Invalid argument.",g[l.EFBIG]="File is too big.",g[l.ENOSPC]="No space left on disk.",g[l.EROFS]="Cannot modify a read-only file system.",g[l.ENOTEMPTY]="Directory is not empty.",g[l.ENOTSUP]="Operation is not supported.";var u=function(n){function t(r,e,i){e===void 0&&(e=g[r]),n.call(this,e),this.syscall="",this.errno=r,this.code=l[r],this.path=i,this.stack=new n().stack,this.message="Error: "+this.code+": "+e+(this.path?", '"+this.path+"'":"")}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.fromJSON=function(e){var i=new t(0);return i.errno=e.errno,i.code=e.code,i.path=e.path,i.stack=e.stack,i.message=e.message,i},t.fromBuffer=function(e,i){return i===void 0&&(i=0),t.fromJSON(JSON.parse(e.toString("utf8",i+4,i+4+e.readUInt32LE(i))))},t.FileError=function(e,i){return new t(e,g[e],i)},t.ENOENT=function(e){return this.FileError(l.ENOENT,e)},t.EEXIST=function(e){return this.FileError(l.EEXIST,e)},t.EISDIR=function(e){return this.FileError(l.EISDIR,e)},t.ENOTDIR=function(e){return this.FileError(l.ENOTDIR,e)},t.EPERM=function(e){return this.FileError(l.EPERM,e)},t.ENOTEMPTY=function(e){return this.FileError(l.ENOTEMPTY,e)},t.prototype.toString=function(){return this.message},t.prototype.toJSON=function(){return{errno:this.errno,code:this.code,path:this.path,stack:this.stack,message:this.message}},t.prototype.writeToBuffer=function(e,i){e===void 0&&(e=v.alloc(this.bufferSize())),i===void 0&&(i=0);var o=e.write(JSON.stringify(this.toJSON()),i+4);return e.writeUInt32LE(o,i),e},t.prototype.bufferSize=function(){return 4+v.byteLength(JSON.stringify(this.toJSON()))},t}(Error),R=Object.freeze({get ErrorCode(){return l},ErrorStrings:g,ApiError:u}),I;(function(n){n[n.NOP=0]="NOP",n[n.THROW_EXCEPTION=1]="THROW_EXCEPTION",n[n.TRUNCATE_FILE=2]="TRUNCATE_FILE",n[n.CREATE_FILE=3]="CREATE_FILE"})(I||(I={}));var k=function n(t){if(this.flagStr=t,n.validFlagStrs.indexOf(t)<0)throw new u(l.EINVAL,"Invalid flag: "+t)};k.getFileFlag=function(t){return k.flagCache.hasOwnProperty(t)?k.flagCache[t]:k.flagCache[t]=new k(t)},k.prototype.getFlagString=function(){return this.flagStr},k.prototype.isReadable=function(){return this.flagStr.indexOf("r")!==-1||this.flagStr.indexOf("+")!==-1},k.prototype.isWriteable=function(){return this.flagStr.indexOf("w")!==-1||this.flagStr.indexOf("a")!==-1||this.flagStr.indexOf("+")!==-1},k.prototype.isTruncating=function(){return this.flagStr.indexOf("w")!==-1},k.prototype.isAppendable=function(){return this.flagStr.indexOf("a")!==-1},k.prototype.isSynchronous=function(){return this.flagStr.indexOf("s")!==-1},k.prototype.isExclusive=function(){return this.flagStr.indexOf("x")!==-1},k.prototype.pathExistsAction=function(){return this.isExclusive()?I.THROW_EXCEPTION:this.isTruncating()?I.TRUNCATE_FILE:I.NOP},k.prototype.pathNotExistsAction=function(){return(this.isWriteable()||this.isAppendable())&&this.flagStr!=="r+"?I.CREATE_FILE:I.THROW_EXCEPTION},k.flagCache={},k.validFlagStrs=["r","r+","rs","rs+","w","wx","w+","wx+","a","ax","a+","ax+"];var L;(function(n){n[n.FILE=32768]="FILE",n[n.DIRECTORY=16384]="DIRECTORY",n[n.SYMLINK=40960]="SYMLINK"})(L||(L={}));var A=function(t,r,e,i,o,a){if(i===void 0&&(i=new Date),o===void 0&&(o=new Date),a===void 0&&(a=new Date),this.size=r,this.atime=i,this.mtime=o,this.ctime=a,this.dev=0,this.ino=0,this.rdev=0,this.nlink=1,this.blksize=4096,this.uid=0,this.gid=0,this.birthtime=new Date(0),this.fileData=null,e)this.mode=e;else switch(t){case L.FILE:this.mode=420;break;case L.DIRECTORY:default:this.mode=511}this.blocks=Math.ceil(r/512),this.mode<4096&&(this.mode|=t)};A.fromBuffer=function(t){var r=t.readUInt32LE(0),e=t.readUInt32LE(4),i=t.readDoubleLE(8),o=t.readDoubleLE(16),a=t.readDoubleLE(24);return new A(e&61440,r,e&4095,new Date(i),new Date(o),new Date(a))},A.prototype.toBuffer=function(){var t=v.alloc(32);return t.writeUInt32LE(this.size,0),t.writeUInt32LE(this.mode,4),t.writeDoubleLE(this.atime.getTime(),8),t.writeDoubleLE(this.mtime.getTime(),16),t.writeDoubleLE(this.ctime.getTime(),24),t},A.prototype.clone=function(){return new A(this.mode&61440,this.size,this.mode&4095,this.atime,this.mtime,this.ctime)},A.prototype.isFile=function(){return(this.mode&61440)===L.FILE},A.prototype.isDirectory=function(){return(this.mode&61440)===L.DIRECTORY},A.prototype.isSymbolicLink=function(){return(this.mode&61440)===L.SYMLINK},A.prototype.chmod=function(t){this.mode=this.mode&61440|t},A.prototype.isSocket=function(){return!1},A.prototype.isBlockDevice=function(){return!1},A.prototype.isCharacterDevice=function(){return!1},A.prototype.isFIFO=function(){return!1};var Q=function(n,t){return n};function z(n){if(n)return n;throw new u(l.EIO,"Initialize BrowserFS with a file system using BrowserFS.initialize(filesystem)")}function W(n,t){switch(typeof n){case"number":return n;case"string":var r=parseInt(n,8);return isNaN(r)?t:r;default:return t}}function _t(n){if(n instanceof Date)return n;if(typeof n=="number")return new Date(n*1e3);throw new u(l.EINVAL,"Invalid time.")}function q(n){if(n.indexOf("\0")>=0)throw new u(l.EINVAL,"Path must be a string without null bytes.");if(n==="")throw new u(l.EINVAL,"Path must not be empty.");return p.resolve(n)}function kt(n,t,r,e){switch(typeof n){case"object":return{encoding:typeof n.encoding!="undefined"?n.encoding:t,flag:typeof n.flag!="undefined"?n.flag:r,mode:W(n.mode,e)};case"string":return{encoding:n,flag:r,mode:e};default:return{encoding:t,flag:r,mode:e}}}function dt(){}var M=function(){this.F_OK=0,this.R_OK=4,this.W_OK=2,this.X_OK=1,this.root=null,this.fdMap={},this.nextFd=100};M.prototype.initialize=function(t){if(!t.constructor.isAvailable())throw new u(l.EINVAL,"Tried to instantiate BrowserFS with an unavailable file system.");return this.root=t},M.prototype._toUnixTimestamp=function(t){if(typeof t=="number")return t;if(t instanceof Date)return t.getTime()/1e3;throw new Error("Cannot parse time: "+t)},M.prototype.getRootFS=function(){return this.root?this.root:null},M.prototype.rename=function(t,r,e){e===void 0&&(e=dt);var i=Q(e,1);try{z(this.root).rename(q(t),q(r),i)}catch(o){i(o)}},M.prototype.renameSync=function(t,r){z(this.root).renameSync(q(t),q(r))},M.prototype.exists=function(t,r){r===void 0&&(r=dt);var e=Q(r,1);try{return z(this.root).exists(q(t),e)}catch(i){return e(!1)}},M.prototype.existsSync=function(t){try{return z(this.root).existsSync(q(t))}catch(r){return!1}},M.prototype.stat=function(t,r){r===void 0&&(r=dt);var e=Q(r,2);try{return z(this.root).stat(q(t),!1,e)}catch(i){return e(i)}},M.prototype.statSync=function(t){return z(this.root).statSync(q(t),!1)},M.prototype.lstat=function(t,r){r===void 0&&(r=dt);var e=Q(r,2);try{return z(this.root).stat(q(t),!0,e)}catch(i){return e(i)}},M.prototype.lstatSync=function(t){return z(this.root).statSync(q(t),!0)},M.prototype.truncate=function(t,r,e){r===void 0&&(r=0),e===void 0&&(e=dt);var i=0;typeof r=="function"?e=r:typeof r=="number"&&(i=r);var o=Q(e,1);try{if(i<0)throw new u(l.EINVAL);return z(this.root).truncate(q(t),i,o)}catch(a){return o(a)}},M.prototype.truncateSync=function(t,r){if(r===void 0&&(r=0),r<0)throw new u(l.EINVAL);return z(this.root).truncateSync(q(t),r)},M.prototype.unlink=function(t,r){r===void 0&&(r=dt);var e=Q(r,1);try{return z(this.root).unlink(q(t),e)}catch(i){return e(i)}},M.prototype.unlinkSync=function(t){return z(this.root).unlinkSync(q(t))},M.prototype.open=function(t,r,e,i){var o=this;i===void 0&&(i=dt);var a=W(e,420);i=typeof e=="function"?e:i;var s=Q(i,2);try{z(this.root).open(q(t),k.getFileFlag(r),a,function(h,d){d?s(h,o.getFdForFile(d)):s(h)})}catch(h){s(h)}},M.prototype.openSync=function(t,r,e){return e===void 0&&(e=420),this.getFdForFile(z(this.root).openSync(q(t),k.getFileFlag(r),W(e,420)))},M.prototype.readFile=function(t,r,e){r===void 0&&(r={}),e===void 0&&(e=dt);var i=kt(r,null,"r",null);e=typeof r=="function"?r:e;var o=Q(e,2);try{var a=k.getFileFlag(i.flag);return a.isReadable()?z(this.root).readFile(q(t),i.encoding,a,o):o(new u(l.EINVAL,"Flag passed to readFile must allow for reading."))}catch(s){return o(s)}},M.prototype.readFileSync=function(t,r){r===void 0&&(r={});var e=kt(r,null,"r",null),i=k.getFileFlag(e.flag);if(!i.isReadable())throw new u(l.EINVAL,"Flag passed to readFile must allow for reading.");return z(this.root).readFileSync(q(t),e.encoding,i)},M.prototype.writeFile=function(t,r,e,i){e===void 0&&(e={}),i===void 0&&(i=dt);var o=kt(e,"utf8","w",420);i=typeof e=="function"?e:i;var a=Q(i,1);try{var s=k.getFileFlag(o.flag);return s.isWriteable()?z(this.root).writeFile(q(t),r,o.encoding,s,o.mode,a):a(new u(l.EINVAL,"Flag passed to writeFile must allow for writing."))}catch(h){return a(h)}},M.prototype.writeFileSync=function(t,r,e){var i=kt(e,"utf8","w",420),o=k.getFileFlag(i.flag);if(!o.isWriteable())throw new u(l.EINVAL,"Flag passed to writeFile must allow for writing.");return z(this.root).writeFileSync(q(t),r,i.encoding,o,i.mode)},M.prototype.appendFile=function(t,r,e,i){i===void 0&&(i=dt);var o=kt(e,"utf8","a",420);i=typeof e=="function"?e:i;var a=Q(i,1);try{var s=k.getFileFlag(o.flag);if(!s.isAppendable())return a(new u(l.EINVAL,"Flag passed to appendFile must allow for appending."));z(this.root).appendFile(q(t),r,o.encoding,s,o.mode,a)}catch(h){a(h)}},M.prototype.appendFileSync=function(t,r,e){var i=kt(e,"utf8","a",420),o=k.getFileFlag(i.flag);if(!o.isAppendable())throw new u(l.EINVAL,"Flag passed to appendFile must allow for appending.");return z(this.root).appendFileSync(q(t),r,i.encoding,o,i.mode)},M.prototype.fstat=function(t,r){r===void 0&&(r=dt);var e=Q(r,2);try{var i=this.fd2file(t);i.stat(e)}catch(o){e(o)}},M.prototype.fstatSync=function(t){return this.fd2file(t).statSync()},M.prototype.close=function(t,r){var e=this;r===void 0&&(r=dt);var i=Q(r,1);try{this.fd2file(t).close(function(o){o||e.closeFd(t),i(o)})}catch(o){i(o)}},M.prototype.closeSync=function(t){this.fd2file(t).closeSync(),this.closeFd(t)},M.prototype.ftruncate=function(t,r,e){e===void 0&&(e=dt);var i=typeof r=="number"?r:0;e=typeof r=="function"?r:e;var o=Q(e,1);try{var a=this.fd2file(t);if(i<0)throw new u(l.EINVAL);a.truncate(i,o)}catch(s){o(s)}},M.prototype.ftruncateSync=function(t,r){r===void 0&&(r=0);var e=this.fd2file(t);if(r<0)throw new u(l.EINVAL);e.truncateSync(r)},M.prototype.fsync=function(t,r){r===void 0&&(r=dt);var e=Q(r,1);try{this.fd2file(t).sync(e)}catch(i){e(i)}},M.prototype.fsyncSync=function(t){this.fd2file(t).syncSync()},M.prototype.fdatasync=function(t,r){r===void 0&&(r=dt);var e=Q(r,1);try{this.fd2file(t).datasync(e)}catch(i){e(i)}},M.prototype.fdatasyncSync=function(t){this.fd2file(t).datasyncSync()},M.prototype.write=function(t,r,e,i,o,a){a===void 0&&(a=dt);var s,h,d,F=null;if(typeof r=="string"){var O="utf8";switch(typeof e){case"function":a=e;break;case"number":F=e,O=typeof i=="string"?i:"utf8",a=typeof o=="function"?o:a;break;default:return a=typeof i=="function"?i:typeof o=="function"?o:a,a(new u(l.EINVAL,"Invalid arguments."))}s=v.from(r,O),h=0,d=s.length}else s=r,h=e,d=i,F=typeof o=="number"?o:null,a=typeof o=="function"?o:a;var B=Q(a,3);try{var J=this.fd2file(t);F==null&&(F=J.getPos()),J.write(s,h,d,F,B)}catch(tt){B(tt)}},M.prototype.writeSync=function(t,r,e,i,o){var a,s=0,h,d;if(typeof r=="string"){d=typeof e=="number"?e:null;var F=typeof i=="string"?i:"utf8";s=0,a=v.from(r,F),h=a.length}else a=r,s=e,h=i,d=typeof o=="number"?o:null;var O=this.fd2file(t);return d==null&&(d=O.getPos()),O.writeSync(a,s,h,d)},M.prototype.read=function(t,r,e,i,o,a){a===void 0&&(a=dt);var s,h,d,F,O;if(typeof r=="number"){d=r,s=e;var B=i;a=typeof o=="function"?o:a,h=0,F=v.alloc(d),O=Q(function(tt,ct,yt){if(tt)return a(tt);a(tt,yt.toString(B),ct)},3)}else F=r,h=e,d=i,s=o,O=Q(a,3);try{var J=this.fd2file(t);s==null&&(s=J.getPos()),J.read(F,h,d,s,O)}catch(tt){O(tt)}},M.prototype.readSync=function(t,r,e,i,o){var a=!1,s,h,d,F,O="utf8";typeof r=="number"?(d=r,F=e,O=i,h=0,s=v.alloc(d),a=!0):(s=r,h=e,d=i,F=o);var B=this.fd2file(t);F==null&&(F=B.getPos());var J=B.readSync(s,h,d,F);return a?[s.toString(O),J]:J},M.prototype.fchown=function(t,r,e,i){i===void 0&&(i=dt);var o=Q(i,1);try{this.fd2file(t).chown(r,e,o)}catch(a){o(a)}},M.prototype.fchownSync=function(t,r,e){this.fd2file(t).chownSync(r,e)},M.prototype.fchmod=function(t,r,e){var i=Q(e,1);try{var o=typeof r=="string"?parseInt(r,8):r;this.fd2file(t).chmod(o,i)}catch(a){i(a)}},M.prototype.fchmodSync=function(t,r){var e=typeof r=="string"?parseInt(r,8):r;this.fd2file(t).chmodSync(e)},M.prototype.futimes=function(t,r,e,i){i===void 0&&(i=dt);var o=Q(i,1);try{var a=this.fd2file(t);typeof r=="number"&&(r=new Date(r*1e3)),typeof e=="number"&&(e=new Date(e*1e3)),a.utimes(r,e,o)}catch(s){o(s)}},M.prototype.futimesSync=function(t,r,e){this.fd2file(t).utimesSync(_t(r),_t(e))},M.prototype.rmdir=function(t,r){r===void 0&&(r=dt);var e=Q(r,1);try{t=q(t),z(this.root).rmdir(t,e)}catch(i){e(i)}},M.prototype.rmdirSync=function(t){return t=q(t),z(this.root).rmdirSync(t)},M.prototype.mkdir=function(t,r,e){e===void 0&&(e=dt),typeof r=="function"&&(e=r,r=511);var i=Q(e,1);try{t=q(t),z(this.root).mkdir(t,r,i)}catch(o){i(o)}},M.prototype.mkdirSync=function(t,r){z(this.root).mkdirSync(q(t),W(r,511))},M.prototype.readdir=function(t,r){r===void 0&&(r=dt);var e=Q(r,2);try{t=q(t),z(this.root).readdir(t,e)}catch(i){e(i)}},M.prototype.readdirSync=function(t){return t=q(t),z(this.root).readdirSync(t)},M.prototype.link=function(t,r,e){e===void 0&&(e=dt);var i=Q(e,1);try{t=q(t),r=q(r),z(this.root).link(t,r,i)}catch(o){i(o)}},M.prototype.linkSync=function(t,r){return t=q(t),r=q(r),z(this.root).linkSync(t,r)},M.prototype.symlink=function(t,r,e,i){i===void 0&&(i=dt);var o=typeof e=="string"?e:"file";i=typeof e=="function"?e:i;var a=Q(i,1);try{if(o!=="file"&&o!=="dir")return a(new u(l.EINVAL,"Invalid type: "+o));t=q(t),r=q(r),z(this.root).symlink(t,r,o,a)}catch(s){a(s)}},M.prototype.symlinkSync=function(t,r,e){if(!e)e="file";else if(e!=="file"&&e!=="dir")throw new u(l.EINVAL,"Invalid type: "+e);return t=q(t),r=q(r),z(this.root).symlinkSync(t,r,e)},M.prototype.readlink=function(t,r){r===void 0&&(r=dt);var e=Q(r,2);try{t=q(t),z(this.root).readlink(t,e)}catch(i){e(i)}},M.prototype.readlinkSync=function(t){return t=q(t),z(this.root).readlinkSync(t)},M.prototype.chown=function(t,r,e,i){i===void 0&&(i=dt);var o=Q(i,1);try{t=q(t),z(this.root).chown(t,!1,r,e,o)}catch(a){o(a)}},M.prototype.chownSync=function(t,r,e){t=q(t),z(this.root).chownSync(t,!1,r,e)},M.prototype.lchown=function(t,r,e,i){i===void 0&&(i=dt);var o=Q(i,1);try{t=q(t),z(this.root).chown(t,!0,r,e,o)}catch(a){o(a)}},M.prototype.lchownSync=function(t,r,e){t=q(t),z(this.root).chownSync(t,!0,r,e)},M.prototype.chmod=function(t,r,e){e===void 0&&(e=dt);var i=Q(e,1);try{var o=W(r,-1);if(o<0)throw new u(l.EINVAL,"Invalid mode.");z(this.root).chmod(q(t),!1,o,i)}catch(a){i(a)}},M.prototype.chmodSync=function(t,r){var e=W(r,-1);if(e<0)throw new u(l.EINVAL,"Invalid mode.");t=q(t),z(this.root).chmodSync(t,!1,e)},M.prototype.lchmod=function(t,r,e){e===void 0&&(e=dt);var i=Q(e,1);try{var o=W(r,-1);if(o<0)throw new u(l.EINVAL,"Invalid mode.");z(this.root).chmod(q(t),!0,o,i)}catch(a){i(a)}},M.prototype.lchmodSync=function(t,r){var e=W(r,-1);if(e<1)throw new u(l.EINVAL,"Invalid mode.");z(this.root).chmodSync(q(t),!0,e)},M.prototype.utimes=function(t,r,e,i){i===void 0&&(i=dt);var o=Q(i,1);try{z(this.root).utimes(q(t),_t(r),_t(e),o)}catch(a){o(a)}},M.prototype.utimesSync=function(t,r,e){z(this.root).utimesSync(q(t),_t(r),_t(e))},M.prototype.realpath=function(t,r,e){e===void 0&&(e=dt);var i=typeof r=="object"?r:{};e=typeof r=="function"?r:dt;var o=Q(e,2);try{t=q(t),z(this.root).realpath(t,i,o)}catch(a){o(a)}},M.prototype.realpathSync=function(t,r){return r===void 0&&(r={}),t=q(t),z(this.root).realpathSync(t,r)},M.prototype.watchFile=function(t,r,e){throw new u(l.ENOTSUP)},M.prototype.unwatchFile=function(t,r){throw new u(l.ENOTSUP)},M.prototype.watch=function(t,r,e){throw new u(l.ENOTSUP)},M.prototype.access=function(t,r,e){throw new u(l.ENOTSUP)},M.prototype.accessSync=function(t,r){throw new u(l.ENOTSUP)},M.prototype.createReadStream=function(t,r){throw new u(l.ENOTSUP)},M.prototype.createWriteStream=function(t,r){throw new u(l.ENOTSUP)},M.prototype.wrapCallbacks=function(t){Q=t},M.prototype.getFdForFile=function(t){var r=this.nextFd++;return this.fdMap[r]=t,r},M.prototype.fd2file=function(t){var r=this.fdMap[t];if(r)return r;throw new u(l.EBADF,"Invalid file descriptor.")},M.prototype.closeFd=function(t){delete this.fdMap[t]},M.Stats=A;var $=new M,st={},Rt=M.prototype;Object.keys(Rt).forEach(function(n){typeof $[n]=="function"?st[n]=function(){return $[n].apply($,arguments)}:st[n]=$[n]}),st.changeFSModule=function(n){$=n},st.getFSModule=function(){return $},st.FS=M;function vt(n,t,r,e,i){return n<t||r<t?n>r?r+1:n+1:e===i?t:t+1}function Dt(n,t){if(n===t)return 0;if(n.length>t.length){var r=n;n=t,t=r}for(var e=n.length,i=t.length;e>0&&n.charCodeAt(e-1)===t.charCodeAt(i-1);)e--,i--;for(var o=0;o<e&&n.charCodeAt(o)===t.charCodeAt(o);)o++;if(e-=o,i-=o,e===0||i===1)return i;for(var a=new Array(e<<1),s=0;s<e;)a[e+s]=n.charCodeAt(o+s),a[s]=++s;var h,d,F,O,B;for(h=0;h+3<i;)for(var J=t.charCodeAt(o+(d=h)),tt=t.charCodeAt(o+(F=h+1)),ct=t.charCodeAt(o+(O=h+2)),yt=t.charCodeAt(o+(B=h+3)),Ft=h+=4,Ht=0;Ht<e;){var oe=a[e+Ht],xe=a[Ht];d=vt(xe,d,F,J,oe),F=vt(d,F,O,tt,oe),O=vt(F,O,B,ct,oe),Ft=vt(O,B,Ft,yt,oe),a[Ht++]=Ft,B=O,O=F,F=d,d=xe}for(var ke=0;h<i;){var rr=t.charCodeAt(o+(d=h));ke=++h;for(var De=0;De<e;De++){var Te=a[De];a[De]=ke=Te<d||ke<d?Te>ke?ke+1:Te+1:rr===a[e+De]?d:d+1,d=Te}}return ke}function bt(n,t,r){n&&console.warn("["+t+"] Direct file system constructor usage is deprecated for this file system, and will be removed in the next major version. Please use the '"+t+".Create("+JSON.stringify(r)+", callback)' method instead. See https://github.com/jvilk/BrowserFS/issues/176 for more details.")}var wt=typeof navigator!="undefined"&&!!(/(msie) ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||navigator.userAgent.indexOf("Trident")!==-1),Yt=typeof window=="undefined";function P(){throw new Error("BFS has reached an impossible code path; please file a bug.")}function C(n,t,r){r.existsSync(n)||(C(p.dirname(n),t,r),r.mkdirSync(n,t))}function G(n){var t=lt(n),r=t.byteOffset,e=t.byteLength;return r===0&&e===t.buffer.byteLength?t.buffer:t.buffer.slice(r,r+e)}function lt(n){return n instanceof Uint8Array?n:new Uint8Array(n)}function It(n){return n instanceof v?n:n instanceof Uint8Array?ut(n):v.from(n)}function ut(n){return n instanceof v?n:n.byteOffset===0&&n.byteLength===n.buffer.byteLength?Et(n.buffer):v.from(n.buffer,n.byteOffset,n.byteLength)}function Et(n){return v.from(n)}function Zt(n,t,r){if(t===void 0&&(t=0),r===void 0&&(r=n.length),t<0||r<0||r>n.length||t>r)throw new TypeError("Invalid slice bounds on buffer of length "+n.length+": ["+t+", "+r+"]");if(n.length===0)return Tt();var e=lt(n),i=n[0],o=(i+1)%255;return n[0]=o,e[0]===o?(e[0]=i,ut(e.slice(t,r))):(n[0]=i,ut(e.subarray(t,r)))}var jt=null;function Tt(){return jt||(jt=v.alloc(0))}function _(n,t){v.isBuffer(n)?t():t(new u(l.EINVAL,"option must be a Buffer."))}function E(n,t,r){var e=n.Options,i=n.Name,o=0,a=!1,s=!1;function h(B){a||(B&&(a=!0,r(B)),o--,o===0&&s&&r())}var d=function(B){if(e.hasOwnProperty(B)){var J=e[B],tt=t[B];if(tt==null){if(!J.optional){var ct=Object.keys(t).filter(function(Ft){return!(Ft in e)}).map(function(Ft){return{str:Ft,distance:Dt(B,Ft)}}).filter(function(Ft){return Ft.distance<5}).sort(function(Ft,Ht){return Ft.distance-Ht.distance});return a?{}:(a=!0,{v:r(new u(l.EINVAL,"["+i+"] Required option '"+B+"' not provided."+(ct.length>0?" You provided unrecognized option '"+ct[0].str+"'; perhaps you meant to type '"+B+"'.":"")+`
Option description: `+J.description))})}}else{var yt=!1;if(Array.isArray(J.type)?yt=J.type.indexOf(typeof tt)!==-1:yt=typeof tt===J.type,yt)J.validator&&(o++,J.validator(tt,h));else return a?{}:(a=!0,{v:r(new u(l.EINVAL,"["+i+"] Value provided for option "+B+" is not the proper type. Expected "+(Array.isArray(J.type)?"one of {"+J.type.join(", ")+"}":J.type)+", but received "+typeof tt+`
Option description: `+J.description))})}}};for(var F in e){var O=d(F);if(O)return O.v}s=!0,o===0&&!a&&r()}var Y=Object.freeze({deprecationMessage:bt,isIE:wt,isWebWorker:Yt,fail:P,mkdirpSync:C,buffer2ArrayBuffer:G,buffer2Uint8array:lt,arrayish2Buffer:It,uint8Array2Buffer:ut,arrayBuffer2Buffer:Et,copyingSlice:Zt,emptyBuffer:Tt,bufferValidator:_,checkOptions:E}),et=function(t){this.fs=t,this.nodefs=t.getNodeFS(),this.FS=t.getFS(),this.PATH=t.getPATH(),this.ERRNO_CODES=t.getERRNO_CODES()};et.prototype.open=function(t){var r=this.fs.realPath(t.node),e=this.FS;try{e.isFile(t.node.mode)&&(t.nfd=this.nodefs.openSync(r,this.fs.flagsToPermissionString(t.flags)))}catch(i){throw i.code?new e.ErrnoError(this.ERRNO_CODES[i.code]):i}},et.prototype.close=function(t){var r=this.FS;try{r.isFile(t.node.mode)&&t.nfd&&this.nodefs.closeSync(t.nfd)}catch(e){throw e.code?new r.ErrnoError(this.ERRNO_CODES[e.code]):e}},et.prototype.read=function(t,r,e,i,o){try{return this.nodefs.readSync(t.nfd,ut(r),e,i,o)}catch(a){throw new this.FS.ErrnoError(this.ERRNO_CODES[a.code])}},et.prototype.write=function(t,r,e,i,o){try{return this.nodefs.writeSync(t.nfd,ut(r),e,i,o)}catch(a){throw new this.FS.ErrnoError(this.ERRNO_CODES[a.code])}},et.prototype.llseek=function(t,r,e){var i=r;if(e===1)i+=t.position;else if(e===2&&this.FS.isFile(t.node.mode))try{var o=this.nodefs.fstatSync(t.nfd);i+=o.size}catch(a){throw new this.FS.ErrnoError(this.ERRNO_CODES[a.code])}if(i<0)throw new this.FS.ErrnoError(this.ERRNO_CODES.EINVAL);return t.position=i,i};var pt=function(t){this.fs=t,this.nodefs=t.getNodeFS(),this.FS=t.getFS(),this.PATH=t.getPATH(),this.ERRNO_CODES=t.getERRNO_CODES()};pt.prototype.getattr=function(t){var r=this.fs.realPath(t),e;try{e=this.nodefs.lstatSync(r)}catch(i){throw i.code?new this.FS.ErrnoError(this.ERRNO_CODES[i.code]):i}return{dev:e.dev,ino:e.ino,mode:e.mode,nlink:e.nlink,uid:e.uid,gid:e.gid,rdev:e.rdev,size:e.size,atime:e.atime,mtime:e.mtime,ctime:e.ctime,blksize:e.blksize,blocks:e.blocks}},pt.prototype.setattr=function(t,r){var e=this.fs.realPath(t);try{if(r.mode!==void 0&&(this.nodefs.chmodSync(e,r.mode),t.mode=r.mode),r.timestamp!==void 0){var i=new Date(r.timestamp);this.nodefs.utimesSync(e,i,i)}}catch(o){if(!o.code)throw o;if(o.code!=="ENOTSUP")throw new this.FS.ErrnoError(this.ERRNO_CODES[o.code])}if(r.size!==void 0)try{this.nodefs.truncateSync(e,r.size)}catch(o){throw o.code?new this.FS.ErrnoError(this.ERRNO_CODES[o.code]):o}},pt.prototype.lookup=function(t,r){var e=this.PATH.join2(this.fs.realPath(t),r),i=this.fs.getMode(e);return this.fs.createNode(t,r,i)},pt.prototype.mknod=function(t,r,e,i){var o=this.fs.createNode(t,r,e,i),a=this.fs.realPath(o);try{this.FS.isDir(o.mode)?this.nodefs.mkdirSync(a,o.mode):this.nodefs.writeFileSync(a,"",{mode:o.mode})}catch(s){throw s.code?new this.FS.ErrnoError(this.ERRNO_CODES[s.code]):s}return o},pt.prototype.rename=function(t,r,e){var i=this.fs.realPath(t),o=this.PATH.join2(this.fs.realPath(r),e);try{this.nodefs.renameSync(i,o),t.name=e,t.parent=r}catch(a){throw a.code?new this.FS.ErrnoError(this.ERRNO_CODES[a.code]):a}},pt.prototype.unlink=function(t,r){var e=this.PATH.join2(this.fs.realPath(t),r);try{this.nodefs.unlinkSync(e)}catch(i){throw i.code?new this.FS.ErrnoError(this.ERRNO_CODES[i.code]):i}},pt.prototype.rmdir=function(t,r){var e=this.PATH.join2(this.fs.realPath(t),r);try{this.nodefs.rmdirSync(e)}catch(i){throw i.code?new this.FS.ErrnoError(this.ERRNO_CODES[i.code]):i}},pt.prototype.readdir=function(t){var r=this.fs.realPath(t);try{var e=this.nodefs.readdirSync(r);return e.push(".",".."),e}catch(i){throw i.code?new this.FS.ErrnoError(this.ERRNO_CODES[i.code]):i}},pt.prototype.symlink=function(t,r,e){var i=this.PATH.join2(this.fs.realPath(t),r);try{this.nodefs.symlinkSync(e,i)}catch(o){throw o.code?new this.FS.ErrnoError(this.ERRNO_CODES[o.code]):o}},pt.prototype.readlink=function(t){var r=this.fs.realPath(t);try{return this.nodefs.readlinkSync(r)}catch(e){throw e.code?new this.FS.ErrnoError(this.ERRNO_CODES[e.code]):e}};var St=function(t,r,e,i){t===void 0&&(t=self.FS),r===void 0&&(r=self.PATH),e===void 0&&(e=self.ERRNO_CODES),i===void 0&&(i=st),this.flagsToPermissionStringMap={0:"r",1:"r+",2:"r+",64:"r",65:"r+",66:"r+",129:"rx+",193:"rx+",514:"w+",577:"w",578:"w+",705:"wx",706:"wx+",1024:"a",1025:"a",1026:"a+",1089:"a",1090:"a+",1153:"ax",1154:"ax+",1217:"ax",1218:"ax+",4096:"rs",4098:"rs+"},this.nodefs=i,this.FS=t,this.PATH=r,this.ERRNO_CODES=e,this.node_ops=new pt(this),this.stream_ops=new et(this)};St.prototype.mount=function(t){return this.createNode(null,"/",this.getMode(t.opts.root),0)},St.prototype.createNode=function(t,r,e,i){var o=this.FS;if(!o.isDir(e)&&!o.isFile(e)&&!o.isLink(e))throw new o.ErrnoError(this.ERRNO_CODES.EINVAL);var a=o.createNode(t,r,e);return a.node_ops=this.node_ops,a.stream_ops=this.stream_ops,a},St.prototype.getMode=function(t){var r;try{r=this.nodefs.lstatSync(t)}catch(e){throw e.code?new this.FS.ErrnoError(this.ERRNO_CODES[e.code]):e}return r.mode},St.prototype.realPath=function(t){for(var r=[];t.parent!==t;)r.push(t.name),t=t.parent;return r.push(t.mount.opts.root),r.reverse(),this.PATH.join.apply(null,r)},St.prototype.flagsToPermissionString=function(t){var r=typeof t=="string"?parseInt(t,10):t;return r&=8191,r in this.flagsToPermissionStringMap?this.flagsToPermissionStringMap[r]:t},St.prototype.getNodeFS=function(){return this.nodefs},St.prototype.getFS=function(){return this.FS},St.prototype.getPATH=function(){return this.PATH},St.prototype.getERRNO_CODES=function(){return this.ERRNO_CODES};var K=function(){};K.prototype.supportsLinks=function(){return!1},K.prototype.diskSpace=function(t,r){r(0,0)},K.prototype.openFile=function(t,r,e){throw new u(l.ENOTSUP)},K.prototype.createFile=function(t,r,e,i){throw new u(l.ENOTSUP)},K.prototype.open=function(t,r,e,i){var o=this,a=function(s,h){if(s)switch(r.pathNotExistsAction()){case I.CREATE_FILE:return o.stat(p.dirname(t),!1,function(d,F){d?i(d):F&&!F.isDirectory()?i(u.ENOTDIR(p.dirname(t))):o.createFile(t,r,e,i)});case I.THROW_EXCEPTION:return i(u.ENOENT(t));default:return i(new u(l.EINVAL,"Invalid FileFlag object."))}else{if(h&&h.isDirectory())return i(u.EISDIR(t));switch(r.pathExistsAction()){case I.THROW_EXCEPTION:return i(u.EEXIST(t));case I.TRUNCATE_FILE:return o.openFile(t,r,function(d,F){d?i(d):F?F.truncate(0,function(){F.sync(function(){i(null,F)})}):P()});case I.NOP:return o.openFile(t,r,i);default:return i(new u(l.EINVAL,"Invalid FileFlag object."))}}};this.stat(t,!1,a)},K.prototype.rename=function(t,r,e){e(new u(l.ENOTSUP))},K.prototype.renameSync=function(t,r){throw new u(l.ENOTSUP)},K.prototype.stat=function(t,r,e){e(new u(l.ENOTSUP))},K.prototype.statSync=function(t,r){throw new u(l.ENOTSUP)},K.prototype.openFileSync=function(t,r,e){throw new u(l.ENOTSUP)},K.prototype.createFileSync=function(t,r,e){throw new u(l.ENOTSUP)},K.prototype.openSync=function(t,r,e){var i;try{i=this.statSync(t,!1)}catch(a){switch(r.pathNotExistsAction()){case I.CREATE_FILE:var o=this.statSync(p.dirname(t),!1);if(!o.isDirectory())throw u.ENOTDIR(p.dirname(t));return this.createFileSync(t,r,e);case I.THROW_EXCEPTION:throw u.ENOENT(t);default:throw new u(l.EINVAL,"Invalid FileFlag object.")}}if(i.isDirectory())throw u.EISDIR(t);switch(r.pathExistsAction()){case I.THROW_EXCEPTION:throw u.EEXIST(t);case I.TRUNCATE_FILE:return this.unlinkSync(t),this.createFileSync(t,r,i.mode);case I.NOP:return this.openFileSync(t,r,e);default:throw new u(l.EINVAL,"Invalid FileFlag object.")}},K.prototype.unlink=function(t,r){r(new u(l.ENOTSUP))},K.prototype.unlinkSync=function(t){throw new u(l.ENOTSUP)},K.prototype.rmdir=function(t,r){r(new u(l.ENOTSUP))},K.prototype.rmdirSync=function(t){throw new u(l.ENOTSUP)},K.prototype.mkdir=function(t,r,e){e(new u(l.ENOTSUP))},K.prototype.mkdirSync=function(t,r){throw new u(l.ENOTSUP)},K.prototype.readdir=function(t,r){r(new u(l.ENOTSUP))},K.prototype.readdirSync=function(t){throw new u(l.ENOTSUP)},K.prototype.exists=function(t,r){this.stat(t,null,function(e){r(!e)})},K.prototype.existsSync=function(t){try{return this.statSync(t,!0),!0}catch(r){return!1}},K.prototype.realpath=function(t,r,e){if(this.supportsLinks())for(var i=t.split(p.sep),o=0;o<i.length;o++){var a=i.slice(0,o+1);i[o]=p.join.apply(null,a)}else this.exists(t,function(s){s?e(null,t):e(u.ENOENT(t))})},K.prototype.realpathSync=function(t,r){if(this.supportsLinks()){for(var e=t.split(p.sep),i=0;i<e.length;i++){var o=e.slice(0,i+1);e[i]=p.join.apply(p,o)}return e.join(p.sep)}else{if(this.existsSync(t))return t;throw u.ENOENT(t)}},K.prototype.truncate=function(t,r,e){this.open(t,k.getFileFlag("r+"),420,function(i,o){if(i)return e(i);o.truncate(r,function(a){o.close(function(s){e(a||s)})})})},K.prototype.truncateSync=function(t,r){var e=this.openSync(t,k.getFileFlag("r+"),420);try{e.truncateSync(r)}catch(i){throw i}finally{e.closeSync()}},K.prototype.readFile=function(t,r,e,i){var o=i;this.open(t,e,420,function(a,s){if(a)return i(a);i=function(h,d){s.close(function(F){return h||(h=F),o(h,d)})},s.stat(function(h,d){if(h)return i(h);var F=v.alloc(d.size);s.read(F,0,d.size,0,function(O){if(O)return i(O);if(r===null)return i(O,F);try{i(null,F.toString(r))}catch(B){i(B)}})})})},K.prototype.readFileSync=function(t,r,e){var i=this.openSync(t,e,420);try{var o=i.statSync(),a=v.alloc(o.size);return i.readSync(a,0,o.size,0),i.closeSync(),r===null?a:a.toString(r)}finally{i.closeSync()}},K.prototype.writeFile=function(t,r,e,i,o,a){var s=a;this.open(t,i,420,function(h,d){if(h)return a(h);a=function(F){d.close(function(O){s(F||O)})};try{typeof r=="string"&&(r=v.from(r,e))}catch(F){return a(F)}d.write(r,0,r.length,0,a)})},K.prototype.writeFileSync=function(t,r,e,i,o){var a=this.openSync(t,i,o);try{typeof r=="string"&&(r=v.from(r,e)),a.writeSync(r,0,r.length,0)}finally{a.closeSync()}},K.prototype.appendFile=function(t,r,e,i,o,a){var s=a;this.open(t,i,o,function(h,d){if(h)return a(h);a=function(F){d.close(function(O){s(F||O)})},typeof r=="string"&&(r=v.from(r,e)),d.write(r,0,r.length,null,a)})},K.prototype.appendFileSync=function(t,r,e,i,o){var a=this.openSync(t,i,o);try{typeof r=="string"&&(r=v.from(r,e)),a.writeSync(r,0,r.length,null)}finally{a.closeSync()}},K.prototype.chmod=function(t,r,e,i){i(new u(l.ENOTSUP))},K.prototype.chmodSync=function(t,r,e){throw new u(l.ENOTSUP)},K.prototype.chown=function(t,r,e,i,o){o(new u(l.ENOTSUP))},K.prototype.chownSync=function(t,r,e,i){throw new u(l.ENOTSUP)},K.prototype.utimes=function(t,r,e,i){i(new u(l.ENOTSUP))},K.prototype.utimesSync=function(t,r,e){throw new u(l.ENOTSUP)},K.prototype.link=function(t,r,e){e(new u(l.ENOTSUP))},K.prototype.linkSync=function(t,r){throw new u(l.ENOTSUP)},K.prototype.symlink=function(t,r,e,i){i(new u(l.ENOTSUP))},K.prototype.symlinkSync=function(t,r,e){throw new u(l.ENOTSUP)},K.prototype.readlink=function(t,r){r(new u(l.ENOTSUP))},K.prototype.readlinkSync=function(t){throw new u(l.ENOTSUP)};var Jt=function(n){function t(){n.apply(this,arguments)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.supportsSynch=function(){return!0},t.prototype.rename=function(e,i,o){try{this.renameSync(e,i),o()}catch(a){o(a)}},t.prototype.stat=function(e,i,o){try{o(null,this.statSync(e,i))}catch(a){o(a)}},t.prototype.open=function(e,i,o,a){try{a(null,this.openSync(e,i,o))}catch(s){a(s)}},t.prototype.unlink=function(e,i){try{this.unlinkSync(e),i()}catch(o){i(o)}},t.prototype.rmdir=function(e,i){try{this.rmdirSync(e),i()}catch(o){i(o)}},t.prototype.mkdir=function(e,i,o){try{this.mkdirSync(e,i),o()}catch(a){o(a)}},t.prototype.readdir=function(e,i){try{i(null,this.readdirSync(e))}catch(o){i(o)}},t.prototype.chmod=function(e,i,o,a){try{this.chmodSync(e,i,o),a()}catch(s){a(s)}},t.prototype.chown=function(e,i,o,a,s){try{this.chownSync(e,i,o,a),s()}catch(h){s(h)}},t.prototype.utimes=function(e,i,o,a){try{this.utimesSync(e,i,o),a()}catch(s){a(s)}},t.prototype.link=function(e,i,o){try{this.linkSync(e,i),o()}catch(a){o(a)}},t.prototype.symlink=function(e,i,o,a){try{this.symlinkSync(e,i,o),a()}catch(s){a(s)}},t.prototype.readlink=function(e,i){try{i(null,this.readlinkSync(e))}catch(o){i(o)}},t}(K),gt=function(){};gt.prototype.sync=function(t){t(new u(l.ENOTSUP))},gt.prototype.syncSync=function(){throw new u(l.ENOTSUP)},gt.prototype.datasync=function(t){this.sync(t)},gt.prototype.datasyncSync=function(){return this.syncSync()},gt.prototype.chown=function(t,r,e){e(new u(l.ENOTSUP))},gt.prototype.chownSync=function(t,r){throw new u(l.ENOTSUP)},gt.prototype.chmod=function(t,r){r(new u(l.ENOTSUP))},gt.prototype.chmodSync=function(t){throw new u(l.ENOTSUP)},gt.prototype.utimes=function(t,r,e){e(new u(l.ENOTSUP))},gt.prototype.utimesSync=function(t,r){throw new u(l.ENOTSUP)};var ne=function(n){function t(r,e,i,o,a){if(n.call(this),this._pos=0,this._dirty=!1,this._fs=r,this._path=e,this._flag=i,this._stat=o,a?this._buffer=a:this._buffer=Tt(),this._stat.size!==this._buffer.length&&this._flag.isReadable())throw new Error("Invalid buffer: Buffer is "+this._buffer.length+" long, yet Stats object specifies that file is "+this._stat.size+" long.")}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.getBuffer=function(){return this._buffer},t.prototype.getStats=function(){return this._stat},t.prototype.getFlag=function(){return this._flag},t.prototype.getPath=function(){return this._path},t.prototype.getPos=function(){return this._flag.isAppendable()?this._stat.size:this._pos},t.prototype.advancePos=function(e){return this._pos+=e},t.prototype.setPos=function(e){return this._pos=e},t.prototype.sync=function(e){try{this.syncSync(),e()}catch(i){e(i)}},t.prototype.syncSync=function(){throw new u(l.ENOTSUP)},t.prototype.close=function(e){try{this.closeSync(),e()}catch(i){e(i)}},t.prototype.closeSync=function(){throw new u(l.ENOTSUP)},t.prototype.stat=function(e){try{e(null,this._stat.clone())}catch(i){e(i)}},t.prototype.statSync=function(){return this._stat.clone()},t.prototype.truncate=function(e,i){try{this.truncateSync(e),this._flag.isSynchronous()&&!st.getRootFS().supportsSynch()&&this.sync(i),i()}catch(o){return i(o)}},t.prototype.truncateSync=function(e){if(this._dirty=!0,!this._flag.isWriteable())throw new u(l.EPERM,"File not opened with a writeable mode.");if(this._stat.mtime=new Date,e>this._buffer.length){var i=v.alloc(e-this._buffer.length,0);this.writeSync(i,0,i.length,this._buffer.length),this._flag.isSynchronous()&&st.getRootFS().supportsSynch()&&this.syncSync();return}this._stat.size=e;var o=v.alloc(e);this._buffer.copy(o,0,0,e),this._buffer=o,this._flag.isSynchronous()&&st.getRootFS().supportsSynch()&&this.syncSync()},t.prototype.write=function(e,i,o,a,s){try{s(null,this.writeSync(e,i,o,a),e)}catch(h){s(h)}},t.prototype.writeSync=function(e,i,o,a){if(this._dirty=!0,a==null&&(a=this.getPos()),!this._flag.isWriteable())throw new u(l.EPERM,"File not opened with a writeable mode.");var s=a+o;if(s>this._stat.size&&(this._stat.size=s,s>this._buffer.length)){var h=v.alloc(s);this._buffer.copy(h),this._buffer=h}var d=e.copy(this._buffer,a,i,i+o);return this._stat.mtime=new Date,this._flag.isSynchronous()?(this.syncSync(),d):(this.setPos(a+d),d)},t.prototype.read=function(e,i,o,a,s){try{s(null,this.readSync(e,i,o,a),e)}catch(h){s(h)}},t.prototype.readSync=function(e,i,o,a){if(!this._flag.isReadable())throw new u(l.EPERM,"File not opened with a readable mode.");a==null&&(a=this.getPos());var s=a+o;s>this._stat.size&&(o=this._stat.size-a);var h=this._buffer.copy(e,i,a,a+o);return this._stat.atime=new Date,this._pos=a+o,h},t.prototype.chmod=function(e,i){try{this.chmodSync(e),i()}catch(o){i(o)}},t.prototype.chmodSync=function(e){if(!this._fs.supportsProps())throw new u(l.ENOTSUP);this._dirty=!0,this._stat.chmod(e),this.syncSync()},t.prototype.isDirty=function(){return this._dirty},t.prototype.resetDirty=function(){this._dirty=!1},t}(gt),ae=function(n){function t(r,e,i,o,a){n.call(this,r,e,i,o,a)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.sync=function(e){e()},t.prototype.syncSync=function(){},t.prototype.close=function(e){e()},t.prototype.closeSync=function(){},t}(ne),w=function(n){function t(r,e,i,o,a){n.call(this,r,e,i,o,a)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.syncSync=function(){this.isDirty()&&(this._fs._syncSync(this),this.resetDirty())},t.prototype.closeSync=function(){this.syncSync()},t}(ne),f=function(n){function t(r,e,i){if(i===void 0&&(i=!0),n.call(this),this._queue=[],this._queueRunning=!1,this._isInitialized=!1,this._initializeCallbacks=[],this._sync=r,this._async=e,!r.supportsSynch())throw new Error("The first argument to AsyncMirror needs to be a synchronous file system.");bt(i,t.Name,{sync:"sync file system instance",async:"async file system instance"})}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){try{var o=new t(e.sync,e.async,!1);o.initialize(function(a){a?i(a):i(null,o)},!1)}catch(a){i(a)}},t.isAvailable=function(){return!0},t.prototype.getName=function(){return t.Name},t.prototype._syncSync=function(e){this._sync.writeFileSync(e.getPath(),e.getBuffer(),null,k.getFileFlag("w"),e.getStats().mode),this.enqueueOp({apiMethod:"writeFile",arguments:[e.getPath(),e.getBuffer(),null,e.getFlag(),e.getStats().mode]})},t.prototype.initialize=function(e,i){var o=this;i===void 0&&(i=!0),i&&console.warn("[AsyncMirror] AsyncMirror.initialize() is deprecated and will be removed in the next major version. Please use 'AsyncMirror.Create({ sync: (sync file system instance), async: (async file system instance)}, cb)' to create and initialize AsyncMirror instances.");var a=this._initializeCallbacks,s=function(O){o._isInitialized=!O,o._initializeCallbacks=[],a.forEach(function(B){return B(O)})};if(this._isInitialized)e();else if(a.push(e)===1){var h=function(O,B,J){O!=="/"&&o._sync.mkdirSync(O,B),o._async.readdir(O,function(tt,ct){var yt=0;function Ft(Ht){Ht?J(Ht):yt<ct.length?(F(p.join(O,ct[yt]),Ft),yt++):J()}tt?J(tt):Ft()})},d=function(O,B,J){o._async.readFile(O,null,k.getFileFlag("r"),function(tt,ct){if(tt)J(tt);else try{o._sync.writeFileSync(O,ct,null,k.getFileFlag("w"),B)}catch(yt){tt=yt}finally{J(tt)}})},F=function(O,B){o._async.stat(O,!1,function(J,tt){J?B(J):tt.isDirectory()?h(O,tt.mode,B):d(O,tt.mode,B)})};h("/",0,s)}},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsSynch=function(){return!0},t.prototype.supportsLinks=function(){return!1},t.prototype.supportsProps=function(){return this._sync.supportsProps()&&this._async.supportsProps()},t.prototype.renameSync=function(e,i){this.checkInitialized(),this._sync.renameSync(e,i),this.enqueueOp({apiMethod:"rename",arguments:[e,i]})},t.prototype.statSync=function(e,i){return this.checkInitialized(),this._sync.statSync(e,i)},t.prototype.openSync=function(e,i,o){this.checkInitialized();var a=this._sync.openSync(e,i,o);return a.closeSync(),new w(this,e,i,this._sync.statSync(e,!1),this._sync.readFileSync(e,null,k.getFileFlag("r")))},t.prototype.unlinkSync=function(e){this.checkInitialized(),this._sync.unlinkSync(e),this.enqueueOp({apiMethod:"unlink",arguments:[e]})},t.prototype.rmdirSync=function(e){this.checkInitialized(),this._sync.rmdirSync(e),this.enqueueOp({apiMethod:"rmdir",arguments:[e]})},t.prototype.mkdirSync=function(e,i){this.checkInitialized(),this._sync.mkdirSync(e,i),this.enqueueOp({apiMethod:"mkdir",arguments:[e,i]})},t.prototype.readdirSync=function(e){return this.checkInitialized(),this._sync.readdirSync(e)},t.prototype.existsSync=function(e){return this.checkInitialized(),this._sync.existsSync(e)},t.prototype.chmodSync=function(e,i,o){this.checkInitialized(),this._sync.chmodSync(e,i,o),this.enqueueOp({apiMethod:"chmod",arguments:[e,i,o]})},t.prototype.chownSync=function(e,i,o,a){this.checkInitialized(),this._sync.chownSync(e,i,o,a),this.enqueueOp({apiMethod:"chown",arguments:[e,i,o,a]})},t.prototype.utimesSync=function(e,i,o){this.checkInitialized(),this._sync.utimesSync(e,i,o),this.enqueueOp({apiMethod:"utimes",arguments:[e,i,o]})},t.prototype.checkInitialized=function(){if(!this._isInitialized)throw new u(l.EPERM,"AsyncMirrorFS is not initialized. Please initialize AsyncMirrorFS using its initialize() method before using it.")},t.prototype.enqueueOp=function(e){var i=this;if(this._queue.push(e),!this._queueRunning){this._queueRunning=!0;var o=function(a){if(a&&console.error("WARNING: File system has desynchronized. Received following error: "+a+`
$`),i._queue.length>0){var s=i._queue.shift(),h=s.arguments;h.push(o),i._async[s.apiMethod].apply(i._async,h)}else i._queueRunning=!1};o()}},t}(Jt);f.Name="AsyncMirror",f.Options={sync:{type:"object",description:"The synchronous file system to mirror the asynchronous file system to."},async:{type:"object",description:"The asynchronous file system to mirror."}};function c(n,t,r){switch(r.length){case 0:return n.call(t);case 1:return n.call(t,r[0]);case 2:return n.call(t,r[0],r[1]);case 3:return n.call(t,r[0],r[1],r[2])}return n.apply(t,r)}var S=Math.max;function D(n,t,r){return t=S(t===void 0?n.length-1:t,0),function(){for(var e=arguments,i=-1,o=S(e.length-t,0),a=Array(o);++i<o;)a[i]=e[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=e[i];return s[t]=r(a),c(n,this,s)}}function X(n){return n}function H(n,t){return D(n,t,X)}var xt=function(n){return H(function(t){var r=t.pop();n.call(this,t,r)})};function Lt(n){return H(function(t,r){var e=xt(function(i,o){var a=this;return n(t,function(s,h){s.apply(a,i.concat(h))},o)});return r.length?e.apply(this,r):e})}var At=typeof j=="object"&&j&&j.Object===Object&&j,Qt=typeof self=="object"&&self&&self.Object===Object&&self,Ct=At||Qt||Function("return this")(),de=Ct.Symbol,be=Object.prototype,Xe=be.hasOwnProperty,dr=be.toString,Me=de?de.toStringTag:void 0;function Dr(n){var t=Xe.call(n,Me),r=n[Me];try{n[Me]=void 0;var e=!0}catch(o){}var i=dr.call(n);return e&&(t?n[Me]=r:delete n[Me]),i}var Tr=Object.prototype,Ar=Tr.toString;function U(n){return Ar.call(n)}var it="[object Null]",y="[object Undefined]",ft=de?de.toStringTag:void 0;function Mt(n){return n==null?n===void 0?y:it:ft&&ft in Object(n)?Dr(n):U(n)}function nt(n){var t=typeof n;return n!=null&&(t=="object"||t=="function")}var ue="[object AsyncFunction]",at="[object Function]",qt="[object GeneratorFunction]",V="[object Proxy]";function Z(n){if(!nt(n))return!1;var t=Mt(n);return t==at||t==qt||t==ue||t==V}var Ye=9007199254740991;function Pt(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=Ye}function ht(n){return n!=null&&Pt(n.length)&&!Z(n)}var Pe={};function Re(){}function Bt(n){return function(){if(n!==null){var t=n;n=null,t.apply(this,arguments)}}}var Nt=typeof Symbol=="function"&&Symbol.iterator,ee=function(n){return Nt&&n[Nt]&&n[Nt]()};function se(n,t){for(var r=-1,e=Array(n);++r<n;)e[r]=t(r);return e}function re(n){return n!=null&&typeof n=="object"}var qe="[object Arguments]";function Ue(n){return re(n)&&Mt(n)==qe}var Vt=Object.prototype,fe=Vt.hasOwnProperty,te=Vt.propertyIsEnumerable,_e=Ue(function(){return arguments}())?Ue:function(n){return re(n)&&fe.call(n,"callee")&&!te.call(n,"callee")},we=Array.isArray;function yr(){return!1}var Kr=typeof T=="object"&&T&&!T.nodeType&&T,Jr=Kr&&typeof x=="object"&&x&&!x.nodeType&&x,fi=Jr&&Jr.exports===Kr,Qr=fi?Ct.Buffer:void 0,ci=Qr?Qr.isBuffer:void 0,li=ci||yr,hi=9007199254740991,pi=/^(?:0|[1-9]\d*)$/;function di(n,t){return t=t==null?hi:t,!!t&&(typeof n=="number"||pi.test(n))&&n>-1&&n%1==0&&n<t}var yi="[object Arguments]",vi="[object Array]",gi="[object Boolean]",wi="[object Date]",mi="[object Error]",Si="[object Function]",_i="[object Map]",Ei="[object Number]",Fi="[object Object]",Ii="[object RegExp]",xi="[object Set]",ki="[object String]",bi="[object WeakMap]",Ri="[object ArrayBuffer]",Ni="[object DataView]",Oi="[object Float32Array]",Li="[object Float64Array]",Di="[object Int8Array]",Ti="[object Int16Array]",Ai="[object Int32Array]",Ci="[object Uint8Array]",Mi="[object Uint8ClampedArray]",Pi="[object Uint16Array]",Ui="[object Uint32Array]",Ut={};Ut[Oi]=Ut[Li]=Ut[Di]=Ut[Ti]=Ut[Ai]=Ut[Ci]=Ut[Mi]=Ut[Pi]=Ut[Ui]=!0,Ut[yi]=Ut[vi]=Ut[Ri]=Ut[gi]=Ut[Ni]=Ut[wi]=Ut[mi]=Ut[Si]=Ut[_i]=Ut[Ei]=Ut[Fi]=Ut[Ii]=Ut[xi]=Ut[ki]=Ut[bi]=!1;function zi(n){return re(n)&&Pt(n.length)&&!!Ut[Mt(n)]}function ji(n){return function(t){return n(t)}}var $r=typeof T=="object"&&T&&!T.nodeType&&T,tn=$r&&typeof x=="object"&&x&&!x.nodeType&&x,Bi=tn&&tn.exports===$r,Cr=Bi&&At.process,en=function(){try{return Cr&&Cr.binding&&Cr.binding("util")}catch(n){}}(),rn=en&&en.isTypedArray,Wi=rn?ji(rn):zi,Hi=Object.prototype,Zi=Hi.hasOwnProperty;function Vi(n,t){var r=we(n),e=!r&&_e(n),i=!r&&!e&&li(n),o=!r&&!e&&!i&&Wi(n),a=r||e||i||o,s=a?se(n.length,String):[],h=s.length;for(var d in n)(t||Zi.call(n,d))&&!(a&&(d=="length"||i&&(d=="offset"||d=="parent")||o&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||di(d,h)))&&s.push(d);return s}var Xi=Object.prototype;function Yi(n){var t=n&&n.constructor,r=typeof t=="function"&&t.prototype||Xi;return n===r}function qi(n,t){return function(r){return n(t(r))}}var Gi=qi(Object.keys,Object),Ki=Object.prototype,Ji=Ki.hasOwnProperty;function Qi(n){if(!Yi(n))return Gi(n);var t=[];for(var r in Object(n))Ji.call(n,r)&&r!="constructor"&&t.push(r);return t}function $i(n){return ht(n)?Vi(n):Qi(n)}function to(n){var t=-1,r=n.length;return function(){return++t<r?{value:n[t],key:t}:null}}function eo(n){var t=-1;return function(){var e=n.next();return e.done?null:(t++,{value:e.value,key:t})}}function ro(n){var t=$i(n),r=-1,e=t.length;return function(){var o=t[++r];return r<e?{value:n[o],key:o}:null}}function no(n){if(ht(n))return to(n);var t=ee(n);return t?eo(t):ro(n)}function nn(n){return function(){if(n===null)throw new Error("Callback was already called.");var t=n;n=null,t.apply(this,arguments)}}function on(n){return function(t,r,e){if(e=Bt(e||Re),n<=0||!t)return e(null);var i=no(t),o=!1,a=0;function s(d,F){if(a-=1,d)o=!0,e(d);else{if(F===Pe||o&&a<=0)return o=!0,e(null);h()}}function h(){for(;a<n&&!o;){var d=i();if(d===null){o=!0,a<=0&&e(null);return}a+=1,r(d.value,d.key,nn(s))}}h()}}function an(n,t,r,e){on(t)(n,r,e)}function Mr(n,t){return function(r,e,i){return n(r,t,e,i)}}function io(n,t,r){r=Bt(r||Re);var e=0,i=0,o=n.length;o===0&&r(null);function a(s,h){s?r(s):(++i===o||h===Pe)&&r(null)}for(;e<o;e++)t(n[e],e,nn(a))}var oo=Mr(an,Infinity),sn=function(n,t,r){var e=ht(n)?io:oo;e(n,t,r)};function ao(n){return function(t,r,e){return n(sn,t,r,e)}}function un(n,t,r,e){e=e||Re,t=t||[];var i=[],o=0;n(t,function(a,s,h){var d=o++;r(a,function(F,O){i[d]=O,h(F)})},function(a){e(a,i)})}var so=ao(un);Lt(so);function uo(n){return function(t,r,e,i){return n(on(r),t,e,i)}}var fo=uo(un),co=Mr(fo,1);Lt(co),H(function(n,t){return H(function(r){return n.apply(null,t.concat(r))})});function lo(n,t){for(var r=-1,e=n==null?0:n.length;++r<e&&t(n[r],r,n)!==!1;);return n}var fn=typeof setImmediate=="function"&&setImmediate,cn=typeof N=="object"&&typeof N.nextTick=="function";function ln(n){setTimeout(n,0)}function hn(n){return H(function(t,r){n(function(){t.apply(null,r)})})}var vr;fn?vr=setImmediate:cn?vr=N.nextTick:vr=ln,hn(vr);var ho=Mr(an,1);function po(n,t,r,e){e=Bt(e||Re),ho(n,function(i,o,a){r(t,i,function(s,h){t=h,a(s)})},function(i){e(i,t)})}var yo=H(function(t){return H(function(r){var e=this,i=r[r.length-1];typeof i=="function"?r.pop():i=Re,po(t,r,function(o,a,s){a.apply(e,o.concat(H(function(h,d){s(h,d)})))},function(o,a){i.apply(e,[o].concat(a))})})});H(function(n){return yo.apply(null,n.reverse())}),H(function(n){var t=[null].concat(n);return xt(function(r,e){return e.apply(this,t)})});function pn(n){return H(function(t,r){t.apply(null,r.concat(H(function(e,i){typeof console=="object"&&(e?console.error&&console.error(e):console[n]&&lo(i,function(o){console[n](o)}))})))})}pn("dir");function vo(n){return function(t,r,e){return n(t,e)}}function dn(n,t,r){sn(n,vo(t),r)}pn("log");var gr;cn?gr=N.nextTick:fn?gr=setImmediate:gr=ln,hn(gr);var ce;function go(){ce||(ce={},ce[Dropbox.ApiError.NETWORK_ERROR]=l.EIO,ce[Dropbox.ApiError.INVALID_PARAM]=l.EINVAL,ce[Dropbox.ApiError.INVALID_TOKEN]=l.EPERM,ce[Dropbox.ApiError.OAUTH_ERROR]=l.EPERM,ce[Dropbox.ApiError.NOT_FOUND]=l.ENOENT,ce[Dropbox.ApiError.INVALID_METHOD]=l.EINVAL,ce[Dropbox.ApiError.NOT_ACCEPTABLE]=l.EINVAL,ce[Dropbox.ApiError.CONFLICT]=l.EINVAL,ce[Dropbox.ApiError.RATE_LIMITED]=l.EBUSY,ce[Dropbox.ApiError.SERVER_ERROR]=l.EBUSY,ce[Dropbox.ApiError.OVER_QUOTA]=l.ENOSPC)}function wo(n){return n&&n.stat.isFile}function mo(n){return n&&n.stat.isFolder}function So(n){return n==null||typeof n=="object"&&typeof n.byteLength=="number"}var ie=function(t){this._cache={},this._client=t};ie.prototype.readdir=function(t,r){var e=this,i=this.getCachedDirInfo(t);this._wrap(function(o){i!==null&&i.contents?e._client.readdir(t,{contentHash:i.stat.contentHash},o):e._client.readdir(t,o)},function(o,a,s,h){o?o.status===Dropbox.ApiError.NO_CONTENT&&i!==null?r(null,i.contents.slice(0)):r(o):(e.updateCachedDirInfo(t,s,a.slice(0)),h.forEach(function(d){e.updateCachedInfo(p.join(t,d.name),d)}),r(null,a))})},ie.prototype.remove=function(t,r){var e=this;this._wrap(function(i){e._client.remove(t,i)},function(i,o){i||e.updateCachedInfo(t,o),r(i)})},ie.prototype.move=function(t,r,e){var i=this;this._wrap(function(o){i._client.move(t,r,o)},function(o,a){o||(i.deleteCachedInfo(t),i.updateCachedInfo(r,a)),e(o)})},ie.prototype.stat=function(t,r){var e=this;this._wrap(function(i){e._client.stat(t,i)},function(i,o){i||e.updateCachedInfo(t,o),r(i,o)})},ie.prototype.readFile=function(t,r){var e=this,i=this.getCachedFileInfo(t);i!==null&&i.contents!==null?this.stat(t,function(o,a){o?r(o):a.contentHash===i.stat.contentHash?r(o,i.contents.slice(0),i.stat):e.readFile(t,r)}):this._wrap(function(o){e._client.readFile(t,{arrayBuffer:!0},o)},function(o,a,s){o||e.updateCachedInfo(t,s,a.slice(0)),r(o,a,s)})},ie.prototype.writeFile=function(t,r,e){var i=this;this._wrap(function(o){i._client.writeFile(t,r,o)},function(o,a){o||i.updateCachedInfo(t,a,r.slice(0)),e(o,a)})},ie.prototype.mkdir=function(t,r){var e=this;this._wrap(function(i){e._client.mkdir(t,i)},function(i,o){i||e.updateCachedInfo(t,o,[]),r(i)})},ie.prototype._wrap=function(t,r){var e=0,i=function(o){var a=2;if(o&&3>++e)switch(o.status){case Dropbox.ApiError.SERVER_ERROR:case Dropbox.ApiError.NETWORK_ERROR:case Dropbox.ApiError.RATE_LIMITED:setTimeout(function(){t(i)},a*1e3);break;default:r.apply(null,arguments);break}else r.apply(null,arguments)};t(i)},ie.prototype.getCachedInfo=function(t){return this._cache[t.toLowerCase()]},ie.prototype.putCachedInfo=function(t,r){this._cache[t.toLowerCase()]=r},ie.prototype.deleteCachedInfo=function(t){delete this._cache[t.toLowerCase()]},ie.prototype.getCachedDirInfo=function(t){var r=this.getCachedInfo(t);return mo(r)?r:null},ie.prototype.getCachedFileInfo=function(t){var r=this.getCachedInfo(t);return wo(r)?r:null},ie.prototype.updateCachedDirInfo=function(t,r,e){e===void 0&&(e=null);var i=this.getCachedInfo(t);r.contentHash!==null&&(i===void 0||i.stat.contentHash!==r.contentHash)&&this.putCachedInfo(t,{stat:r,contents:e})},ie.prototype.updateCachedFileInfo=function(t,r,e){e===void 0&&(e=null);var i=this.getCachedInfo(t);r.versionTag!==null&&(i===void 0||i.stat.versionTag!==r.versionTag)&&this.putCachedInfo(t,{stat:r,contents:e})},ie.prototype.updateCachedInfo=function(t,r,e){e===void 0&&(e=null),r.isFile&&So(e)?this.updateCachedFileInfo(t,r,e):r.isFolder&&Array.isArray(e)&&this.updateCachedDirInfo(t,r,e)};var _o=function(n){function t(r,e,i,o,a){n.call(this,r,e,i,o,a)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.sync=function(e){var i=this;if(this.isDirty()){var o=this.getBuffer(),a=G(o);this._fs._writeFileStrict(this.getPath(),a,function(s){s||i.resetDirty(),e(s)})}else e()},t.prototype.close=function(e){this.sync(e)},t}(ne),wr=function(n){function t(r,e){e===void 0&&(e=!0),n.call(this),this._client=new ie(r),bt(e,t.Name,{client:"authenticated dropbox client instance"}),go()}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){i(null,new t(e.client,!1))},t.isAvailable=function(){return typeof Dropbox!="undefined"},t.prototype.getName=function(){return t.Name},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsSymlinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!1},t.prototype.empty=function(e){var i=this;this._client.readdir("/",function(o,a){if(o)e(i.convert(o,"/"));else{var s=function(d,F){var O=p.join("/",d);i._client.remove(O,function(B){F(B?i.convert(B,O):null)})},h=function(d){d?e(d):e()};dn(a,s,h)}})},t.prototype.rename=function(e,i,o){var a=this;this._client.move(e,i,function(s){s?a._client.stat(i,function(h,d){if(h||d.isFolder){var F=s.response.error.indexOf(e)>-1?e:i;o(a.convert(s,F))}else a._client.remove(i,function(O){O?o(a.convert(O,i)):a.rename(e,i,o)})}):o()})},t.prototype.stat=function(e,i,o){var a=this;this._client.stat(e,function(s,h){if(s)o(a.convert(s,e));else if(h&&h.isRemoved)o(u.FileError(l.ENOENT,e));else{var d=new A(a._statType(h),h.size);return o(null,d)}})},t.prototype.open=function(e,i,o,a){var s=this;this._client.readFile(e,function(h,d,F){if(h)if(i.isReadable())a(s.convert(h,e));else switch(h.status){case Dropbox.ApiError.NOT_FOUND:var O=new ArrayBuffer(0);return s._writeFileStrict(e,O,function(tt,ct){if(tt)a(tt);else{var yt=s._makeFile(e,i,ct,Et(O));a(null,yt)}});default:return a(s.convert(h,e))}else{var B;d===null?B=Tt():B=Et(d);var J=s._makeFile(e,i,F,B);return a(null,J)}})},t.prototype._writeFileStrict=function(e,i,o){var a=this,s=p.dirname(e);this.stat(s,!1,function(h,d){h?o(u.FileError(l.ENOENT,s)):a._client.writeFile(e,i,function(F,O){F?o(a.convert(F,e)):o(null,O)})})},t.prototype._statType=function(e){return e.isFile?L.FILE:L.DIRECTORY},t.prototype._makeFile=function(e,i,o,a){var s=this._statType(o),h=new A(s,o.size);return new _o(this,e,i,h,a)},t.prototype._remove=function(e,i,o){var a=this;this._client.stat(e,function(s,h){s?i(a.convert(s,e)):h.isFile&&!o?i(u.FileError(l.ENOTDIR,e)):!h.isFile&&o?i(u.FileError(l.EISDIR,e)):a._client.remove(e,function(d){i(d?a.convert(d,e):null)})})},t.prototype.unlink=function(e,i){this._remove(e,i,!0)},t.prototype.rmdir=function(e,i){this._remove(e,i,!1)},t.prototype.mkdir=function(e,i,o){var a=this,s=p.dirname(e);this._client.stat(s,function(h,d){h?o(a.convert(h,s)):a._client.mkdir(e,function(F){o(F?u.FileError(l.EEXIST,e):null)})})},t.prototype.readdir=function(e,i){var o=this;this._client.readdir(e,function(a,s){return a?i(o.convert(a)):i(null,s)})},t.prototype.convert=function(e,i){i===void 0&&(i=null);var o=ce[e.status];return o===void 0&&(o=l.EIO),i?u.FileError(o,i):new u(o)},t}(K);wr.Name="Dropbox",wr.Options={client:{type:"object",description:"An *authenticated* Dropbox client. Must be from the 0.10 JS SDK.",validator:function(n,t){n.isAuthenticated&&n.isAuthenticated()?t():t(new u(l.EINVAL,"'client' option must be an authenticated Dropbox client from the v0.10 JS SDK."))}}};function Xt(n,t){t===void 0&&(t="");for(var r=n.errno,e=n.node,i=[];e&&(i.unshift(e.name),e!==e.parent);)e=e.parent;return new u(r,g[r],i.length>0?"/"+i.join("/"):t)}var Eo=function(n){function t(r,e,i,o){n.call(this),this._fs=r,this._FS=e,this._path=i,this._stream=o}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.getPos=function(){},t.prototype.close=function(e){var i=null;try{this.closeSync()}catch(o){i=o}finally{e(i)}},t.prototype.closeSync=function(){try{this._FS.close(this._stream)}catch(e){throw Xt(e,this._path)}},t.prototype.stat=function(e){try{e(null,this.statSync())}catch(i){e(i)}},t.prototype.statSync=function(){try{return this._fs.statSync(this._path,!1)}catch(e){throw Xt(e,this._path)}},t.prototype.truncate=function(e,i){var o=null;try{this.truncateSync(e)}catch(a){o=a}finally{i(o)}},t.prototype.truncateSync=function(e){try{this._FS.ftruncate(this._stream.fd,e)}catch(i){throw Xt(i,this._path)}},t.prototype.write=function(e,i,o,a,s){try{s(null,this.writeSync(e,i,o,a),e)}catch(h){s(h)}},t.prototype.writeSync=function(e,i,o,a){try{var s=lt(e),h=a===null?void 0:a;return this._FS.write(this._stream,s,i,o,h)}catch(d){throw Xt(d,this._path)}},t.prototype.read=function(e,i,o,a,s){try{s(null,this.readSync(e,i,o,a),e)}catch(h){s(h)}},t.prototype.readSync=function(e,i,o,a){try{var s=lt(e),h=a===null?void 0:a;return this._FS.read(this._stream,s,i,o,h)}catch(d){throw Xt(d,this._path)}},t.prototype.sync=function(e){e()},t.prototype.syncSync=function(){},t.prototype.chown=function(e,i,o){var a=null;try{this.chownSync(e,i)}catch(s){a=s}finally{o(a)}},t.prototype.chownSync=function(e,i){try{this._FS.fchown(this._stream.fd,e,i)}catch(o){throw Xt(o,this._path)}},t.prototype.chmod=function(e,i){var o=null;try{this.chmodSync(e)}catch(a){o=a}finally{i(o)}},t.prototype.chmodSync=function(e){try{this._FS.fchmod(this._stream.fd,e)}catch(i){throw Xt(i,this._path)}},t.prototype.utimes=function(e,i,o){var a=null;try{this.utimesSync(e,i)}catch(s){a=s}finally{o(a)}},t.prototype.utimesSync=function(e,i){this._fs.utimesSync(this._path,e,i)},t}(gt),mr=function(n){function t(r){n.call(this),this._FS=r}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){i(null,new t(e.FS))},t.isAvailable=function(){return!0},t.prototype.getName=function(){return this._FS.DB_NAME()},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsLinks=function(){return!0},t.prototype.supportsProps=function(){return!0},t.prototype.supportsSynch=function(){return!0},t.prototype.renameSync=function(e,i){try{this._FS.rename(e,i)}catch(o){throw o.errno===l.ENOENT?Xt(o,this.existsSync(e)?i:e):Xt(o)}},t.prototype.statSync=function(e,i){try{var o=i?this._FS.lstat(e):this._FS.stat(e),a=this.modeToFileType(o.mode);return new A(a,o.size,o.mode,o.atime,o.mtime,o.ctime)}catch(s){throw Xt(s,e)}},t.prototype.openSync=function(e,i,o){try{var a=this._FS.open(e,i.getFlagString(),o);if(this._FS.isDir(a.node.mode))throw this._FS.close(a),u.EISDIR(e);return new Eo(this,this._FS,e,a)}catch(s){throw Xt(s,e)}},t.prototype.unlinkSync=function(e){try{this._FS.unlink(e)}catch(i){throw Xt(i,e)}},t.prototype.rmdirSync=function(e){try{this._FS.rmdir(e)}catch(i){throw Xt(i,e)}},t.prototype.mkdirSync=function(e,i){try{this._FS.mkdir(e,i)}catch(o){throw Xt(o,e)}},t.prototype.readdirSync=function(e){try{return this._FS.readdir(e).filter(function(i){return i!=="."&&i!==".."})}catch(i){throw Xt(i,e)}},t.prototype.truncateSync=function(e,i){try{this._FS.truncate(e,i)}catch(o){throw Xt(o,e)}},t.prototype.readFileSync=function(e,i,o){try{var a=this._FS.readFile(e,{flags:o.getFlagString()}),s=ut(a);return i?s.toString(i):s}catch(h){throw Xt(h,e)}},t.prototype.writeFileSync=function(e,i,o,a,s){try{o&&(i=v.from(i,o));var h=lt(i);this._FS.writeFile(e,h,{flags:a.getFlagString(),encoding:"binary"}),this._FS.chmod(e,s)}catch(d){throw Xt(d,e)}},t.prototype.chmodSync=function(e,i,o){try{i?this._FS.lchmod(e,o):this._FS.chmod(e,o)}catch(a){throw Xt(a,e)}},t.prototype.chownSync=function(e,i,o,a){try{i?this._FS.lchown(e,o,a):this._FS.chown(e,o,a)}catch(s){throw Xt(s,e)}},t.prototype.symlinkSync=function(e,i,o){try{this._FS.symlink(e,i)}catch(a){throw Xt(a)}},t.prototype.readlinkSync=function(e){try{return this._FS.readlink(e)}catch(i){throw Xt(i,e)}},t.prototype.utimesSync=function(e,i,o){try{this._FS.utime(e,i.getTime(),o.getTime())}catch(a){throw Xt(a,e)}},t.prototype.modeToFileType=function(e){if(this._FS.isDir(e))return L.DIRECTORY;if(this._FS.isFile(e))return L.FILE;if(this._FS.isLink(e))return L.SYMLINK;throw u.EPERM("Invalid mode: "+e)},t}(Jt);mr.Name="EmscriptenFileSystem",mr.Options={FS:{type:"object",description:"The Emscripten file system to use (the `FS` variable)"}};var Ge=function(n){function t(r,e){n.call(this),this._folder=r,this._wrapped=e}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){i(null,new t(e.folder,e.wrapped))},t.isAvailable=function(){return!0},t.prototype.initialize=function(e){var i=this;this._wrapped.exists(this._folder,function(o){o?e():i._wrapped.isReadOnly()?e(u.ENOENT(i._folder)):i._wrapped.mkdir(i._folder,511,e)})},t.prototype.getName=function(){return this._wrapped.getName()},t.prototype.isReadOnly=function(){return this._wrapped.isReadOnly()},t.prototype.supportsProps=function(){return this._wrapped.supportsProps()},t.prototype.supportsSynch=function(){return this._wrapped.supportsSynch()},t.prototype.supportsLinks=function(){return!1},t}(K);Ge.Name="FolderAdapter",Ge.Options={folder:{type:"string",description:"The folder to use as the root directory"},wrapped:{type:"object",description:"The file system to wrap"}};function yn(n,t){if(t!==null&&typeof t=="object"){var r=t,e=r.path;e&&(e="/"+p.relative(n,e),r.message=r.message.replace(r.path,e),r.path=e)}return t}function Fo(n,t){return typeof t=="function"?function(r){arguments.length>0&&(arguments[0]=yn(n,r)),t.apply(null,arguments)}:t}function vn(n,t,r){return n.slice(n.length-4)!=="Sync"?function(){return arguments.length>0&&(t&&(arguments[0]=p.join(this._folder,arguments[0])),r&&(arguments[1]=p.join(this._folder,arguments[1])),arguments[arguments.length-1]=Fo(this._folder,arguments[arguments.length-1])),this._wrapped[n].apply(this._wrapped,arguments)}:function(){try{return t&&(arguments[0]=p.join(this._folder,arguments[0])),r&&(arguments[1]=p.join(this._folder,arguments[1])),this._wrapped[n].apply(this._wrapped,arguments)}catch(e){throw yn(this._folder,e)}}}["diskSpace","stat","statSync","open","openSync","unlink","unlinkSync","rmdir","rmdirSync","mkdir","mkdirSync","readdir","readdirSync","exists","existsSync","realpath","realpathSync","truncate","truncateSync","readFile","readFileSync","writeFile","writeFileSync","appendFile","appendFileSync","chmod","chmodSync","chown","chownSync","utimes","utimesSync","readlink","readlinkSync"].forEach(function(n){Ge.prototype[n]=vn(n,!0,!1)}),["rename","renameSync","link","linkSync","symlink","symlinkSync"].forEach(function(n){Ge.prototype[n]=vn(n,!0,!0)});var Sr;typeof window!="undefined"?Sr=window:typeof self!="undefined"?Sr=self:Sr=j;var Gt=Sr;function Io(n){return n.isDirectory}var Pr=Gt.webkitRequestFileSystem||Gt.requestFileSystem||null;function xo(n,t,r,e){if(typeof navigator.webkitPersistentStorage!="undefined")switch(n){case Gt.PERSISTENT:navigator.webkitPersistentStorage.requestQuota(t,r,e);break;case Gt.TEMPORARY:navigator.webkitTemporaryStorage.requestQuota(t,r,e);break;default:e(new TypeError("Invalid storage type: "+n));break}else Gt.webkitStorageInfo.requestQuota(n,t,r,e)}function ko(n){return Array.prototype.slice.call(n||[],0)}function Ee(n,t,r){switch(n.name){case"PathExistsError":return u.EEXIST(t);case"QuotaExceededError":return u.FileError(l.ENOSPC,t);case"NotFoundError":return u.ENOENT(t);case"SecurityError":return u.FileError(l.EACCES,t);case"InvalidModificationError":return u.FileError(l.EPERM,t);case"TypeMismatchError":return u.FileError(r?l.ENOTDIR:l.EISDIR,t);case"EncodingError":case"InvalidStateError":case"NoModificationAllowedError":default:return u.FileError(l.EINVAL,t)}}var bo=function(n){function t(r,e,i,o,a,s){n.call(this,r,i,o,a,s),this._entry=e}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.sync=function(e){var i=this;if(!this.isDirty())return e();this._entry.createWriter(function(o){var a=i.getBuffer(),s=new Blob([G(a)]),h=s.size;o.onwriteend=function(d){o.onwriteend=null,o.onerror=null,o.truncate(h),i.resetDirty(),e()},o.onerror=function(d){e(Ee(d,i.getPath(),!1))},o.write(s)})},t.prototype.close=function(e){this.sync(e)},t}(ne),_r=function(n){function t(r,e,i){r===void 0&&(r=5),e===void 0&&(e=Gt.PERSISTENT),i===void 0&&(i=!0),n.call(this),this.size=1024*1024*r,this.type=e,bt(i,t.Name,{size:r,type:e})}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){var o=new t(e.size,e.type,!1);o.allocate(function(a){return a?i(a):i(null,o)},!1)},t.isAvailable=function(){return!!Pr},t.prototype.getName=function(){return t.Name},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsSymlinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!1},t.prototype.allocate=function(e,i){var o=this;e===void 0&&(e=function(){}),i===void 0&&(i=!0),i&&console.warn("[HTML5FS] HTML5FS.allocate() is deprecated and will be removed in the next major release. Please use 'HTML5FS.Create({type: "+this.type+", size: "+this.size+"}, cb)' to create and allocate HTML5FS instances.");var a=function(h){o.fs=h,e()},s=function(h){e(Ee(h,"/",!0))};this.type===Gt.PERSISTENT?xo(this.type,this.size,function(h){Pr(o.type,h,a,s)},s):Pr(this.type,this.size,a,s)},t.prototype.empty=function(e){this._readdir("/",function(i,o){if(i)console.error("Failed to empty FS"),e(i);else{var a=function(h){i?(console.error("Failed to empty FS"),e(i)):e()},s=function(h,d){var F=function(){d()},O=function(B){d(Ee(B,h.fullPath,!h.isDirectory))};Io(h)?h.removeRecursively(F,O):h.remove(F,O)};dn(o,s,a)}})},t.prototype.rename=function(e,i,o){var a=this,s=2,h=0,d=this.fs.root,F=e,O=function(J){--s<=0&&o(Ee(J,F,!1))},B=function(J){if(++h==2)return o(new u(l.EINVAL,"Something was identified as both a file and a directory. This should never happen."));if(e===i)return o();F=p.dirname(i),d.getDirectory(F,{},function(tt){F=p.basename(i),J.moveTo(tt,F,function(ct){o()},function(ct){J.isDirectory?(F=i,a.unlink(i,function(yt){yt?O(ct):a.rename(e,i,o)})):O(ct)})},O)};d.getFile(e,{},B,O),d.getDirectory(e,{},B,O)},t.prototype.stat=function(e,i,o){var a=this,s={create:!1},h=function(B){var J=function(tt){var ct=new A(L.FILE,tt.size);o(null,ct)};B.file(J,F)},d=function(B){var J=4096,tt=new A(L.DIRECTORY,J);o(null,tt)},F=function(B){o(Ee(B,e,!1))},O=function(){a.fs.root.getDirectory(e,s,d,F)};this.fs.root.getFile(e,s,h,O)},t.prototype.open=function(e,i,o,a){var s=this,h=function(d){d.name==="InvalidModificationError"&&i.isExclusive()?a(u.EEXIST(e)):a(Ee(d,e,!1))};this.fs.root.getFile(e,{create:i.pathNotExistsAction()===I.CREATE_FILE,exclusive:i.isExclusive()},function(d){d.file(function(F){var O=new FileReader;O.onloadend=function(B){var J=s._makeFile(e,d,i,F,O.result);a(null,J)},O.onerror=function(B){h(O.error)},O.readAsArrayBuffer(F)},h)},h)},t.prototype.unlink=function(e,i){this._remove(e,i,!0)},t.prototype.rmdir=function(e,i){var o=this;this.readdir(e,function(a,s){a?i(a):s.length>0?i(u.ENOTEMPTY(e)):o._remove(e,i,!1)})},t.prototype.mkdir=function(e,i,o){var a={create:!0,exclusive:!0},s=function(d){o()},h=function(d){o(Ee(d,e,!0))};this.fs.root.getDirectory(e,a,s,h)},t.prototype.readdir=function(e,i){this._readdir(e,function(o,a){if(a){for(var s=[],h=0,d=a;h<d.length;h+=1){var F=d[h];s.push(F.name)}i(null,s)}else return i(o)})},t.prototype._makeFile=function(e,i,o,a,s){s===void 0&&(s=new ArrayBuffer(0));var h=new A(L.FILE,a.size),d=Et(s);return new bo(this,i,e,o,h,d)},t.prototype._readdir=function(e,i){var o=function(a){i(Ee(a,e,!0))};this.fs.root.getDirectory(e,{create:!1},function(a){var s=a.createReader(),h=[],d=function(){s.readEntries(function(F){F.length?(h=h.concat(ko(F)),d()):i(null,h)},o)};d()},o)},t.prototype._remove=function(e,i,o){var a=function(d){var F=function(){i()},O=function(B){i(Ee(B,e,!o))};d.remove(F,O)},s=function(d){i(Ee(d,e,!o))},h={create:!1};o?this.fs.root.getFile(e,h,a,s):this.fs.root.getDirectory(e,h,a,s)},t}(K);_r.Name="HTML5FS",_r.Options={size:{type:"number",optional:!0,description:"Storage quota to request, in megabytes. Allocated value may be less. Defaults to 5."},type:{type:"number",optional:!0,description:"window.PERSISTENT or window.TEMPORARY. Defaults to PERSISTENT."}};var le=function(t,r,e,i,o,a){this.id=t,this.size=r,this.mode=e,this.atime=i,this.mtime=o,this.ctime=a};le.fromBuffer=function(t){if(t===void 0)throw new Error("NO");return new le(t.toString("ascii",30),t.readUInt32LE(0),t.readUInt16LE(4),t.readDoubleLE(6),t.readDoubleLE(14),t.readDoubleLE(22))},le.prototype.toStats=function(){return new A((this.mode&61440)===L.DIRECTORY?L.DIRECTORY:L.FILE,this.size,this.mode,new Date(this.atime),new Date(this.mtime),new Date(this.ctime))},le.prototype.getSize=function(){return 30+this.id.length},le.prototype.toBuffer=function(t){return t===void 0&&(t=v.alloc(this.getSize())),t.writeUInt32LE(this.size,0),t.writeUInt16LE(this.mode,4),t.writeDoubleLE(this.atime,6),t.writeDoubleLE(this.mtime,14),t.writeDoubleLE(this.ctime,22),t.write(this.id,30,this.id.length,"ascii"),t},le.prototype.update=function(t){var r=!1;this.size!==t.size&&(this.size=t.size,r=!0),this.mode!==t.mode&&(this.mode=t.mode,r=!0);var e=t.atime.getTime();this.atime!==e&&(this.atime=e,r=!0);var i=t.mtime.getTime();this.mtime!==i&&(this.mtime=i,r=!0);var o=t.ctime.getTime();return this.ctime!==o&&(this.ctime=o,r=!0),r},le.prototype.isFile=function(){return(this.mode&61440)===L.FILE},le.prototype.isDirectory=function(){return(this.mode&61440)===L.DIRECTORY};var Ae="/",Ur=null;function gn(){return Ur||(Ur=v.from("{}"))}function Er(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var t=Math.random()*16|0,r=n==="x"?t:t&3|8;return r.toString(16)})}function ye(n,t){return n?(t(n),!1):!0}function $t(n,t,r){return n?(t.abort(function(){r(n)}),!1):!0}var Ne=function(t){this.store=t,this.originalData={},this.modifiedKeys=[]};Ne.prototype.get=function(t){var r=this.store.get(t);return this.stashOldValue(t,r),r},Ne.prototype.put=function(t,r,e){return this.markModified(t),this.store.put(t,r,e)},Ne.prototype.del=function(t){this.markModified(t),this.store.del(t)},Ne.prototype.commit=function(){},Ne.prototype.abort=function(){for(var t=this,r=0,e=t.modifiedKeys;r<e.length;r+=1){var i=e[r],o=t.originalData[i];o?t.store.put(i,o,!0):t.store.del(i)}},Ne.prototype.stashOldValue=function(t,r){this.originalData.hasOwnProperty(t)||(this.originalData[t]=r)},Ne.prototype.markModified=function(t){this.modifiedKeys.indexOf(t)===-1&&(this.modifiedKeys.push(t),this.originalData.hasOwnProperty(t)||(this.originalData[t]=this.store.get(t)))};var wn=function(n){function t(r,e,i,o,a){n.call(this,r,e,i,o,a)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.syncSync=function(){this.isDirty()&&(this._fs._syncSync(this.getPath(),this.getBuffer(),this.getStats()),this.resetDirty())},t.prototype.closeSync=function(){this.syncSync()},t}(ne),mn=function(n){function t(r){n.call(this),this.store=r.store,this.makeRootDirectory()}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.isAvailable=function(){return!0},t.prototype.getName=function(){return this.store.name()},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsSymlinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!0},t.prototype.empty=function(){this.store.clear(),this.makeRootDirectory()},t.prototype.renameSync=function(e,i){var o=this.store.beginTransaction("readwrite"),a=p.dirname(e),s=p.basename(e),h=p.dirname(i),d=p.basename(i),F=this.findINode(o,a),O=this.getDirListing(o,a,F);if(!O[s])throw u.ENOENT(e);var B=O[s];if(delete O[s],(h+"/").indexOf(e+"/")===0)throw new u(l.EBUSY,a);var J,tt;if(h===a?(J=F,tt=O):(J=this.findINode(o,h),tt=this.getDirListing(o,h,J)),tt[d]){var ct=this.getINode(o,i,tt[d]);if(ct.isFile())try{o.del(ct.id),o.del(tt[d])}catch(yt){throw o.abort(),yt}else throw u.EPERM(i)}tt[d]=B;try{o.put(F.id,v.from(JSON.stringify(O)),!0),o.put(J.id,v.from(JSON.stringify(tt)),!0)}catch(yt){throw o.abort(),yt}o.commit()},t.prototype.statSync=function(e,i){return this.findINode(this.store.beginTransaction("readonly"),e).toStats()},t.prototype.createFileSync=function(e,i,o){var a=this.store.beginTransaction("readwrite"),s=Tt(),h=this.commitNewFile(a,e,L.FILE,o,s);return new wn(this,e,i,h.toStats(),s)},t.prototype.openFileSync=function(e,i){var o=this.store.beginTransaction("readonly"),a=this.findINode(o,e),s=o.get(a.id);if(s===void 0)throw u.ENOENT(e);return new wn(this,e,i,a.toStats(),s)},t.prototype.unlinkSync=function(e){this.removeEntry(e,!1)},t.prototype.rmdirSync=function(e){if(this.readdirSync(e).length>0)throw u.ENOTEMPTY(e);this.removeEntry(e,!0)},t.prototype.mkdirSync=function(e,i){var o=this.store.beginTransaction("readwrite"),a=v.from("{}");this.commitNewFile(o,e,L.DIRECTORY,i,a)},t.prototype.readdirSync=function(e){var i=this.store.beginTransaction("readonly");return Object.keys(this.getDirListing(i,e,this.findINode(i,e)))},t.prototype._syncSync=function(e,i,o){var a=this.store.beginTransaction("readwrite"),s=this._findINode(a,p.dirname(e),p.basename(e)),h=this.getINode(a,e,s),d=h.update(o);try{a.put(h.id,i,!0),d&&a.put(s,h.toBuffer(),!0)}catch(F){throw a.abort(),F}a.commit()},t.prototype.makeRootDirectory=function(){var e=this.store.beginTransaction("readwrite");if(e.get(Ae)===void 0){var i=new Date().getTime(),o=new le(Er(),4096,511|L.DIRECTORY,i,i,i);e.put(o.id,gn(),!1),e.put(Ae,o.toBuffer(),!1),e.commit()}},t.prototype._findINode=function(e,i,o){var a=this,s=function(h){var d=a.getDirListing(e,i,h);if(d[o])return d[o];throw u.ENOENT(p.resolve(i,o))};return i==="/"?o===""?Ae:s(this.getINode(e,i,Ae)):s(this.getINode(e,i+p.sep+o,this._findINode(e,p.dirname(i),p.basename(i))))},t.prototype.findINode=function(e,i){return this.getINode(e,i,this._findINode(e,p.dirname(i),p.basename(i)))},t.prototype.getINode=function(e,i,o){var a=e.get(o);if(a===void 0)throw u.ENOENT(i);return le.fromBuffer(a)},t.prototype.getDirListing=function(e,i,o){if(!o.isDirectory())throw u.ENOTDIR(i);var a=e.get(o.id);if(a===void 0)throw u.ENOENT(i);return JSON.parse(a.toString())},t.prototype.addNewNode=function(e,i){for(var o=0,a;o<5;)try{return a=Er(),e.put(a,i,!1),a}catch(s){}throw new u(l.EIO,"Unable to commit data to key-value store.")},t.prototype.commitNewFile=function(e,i,o,a,s){var h=p.dirname(i),d=p.basename(i),F=this.findINode(e,h),O=this.getDirListing(e,h,F),B=new Date().getTime();if(i==="/"||O[d])throw u.EEXIST(i);var J;try{var tt=this.addNewNode(e,s);J=new le(tt,s.length,a|o,B,B,B);var ct=this.addNewNode(e,J.toBuffer());O[d]=ct,e.put(F.id,v.from(JSON.stringify(O)),!0)}catch(yt){throw e.abort(),yt}return e.commit(),J},t.prototype.removeEntry=function(e,i){var o=this.store.beginTransaction("readwrite"),a=p.dirname(e),s=this.findINode(o,a),h=this.getDirListing(o,a,s),d=p.basename(e);if(!h[d])throw u.ENOENT(e);var F=h[d];delete h[d];var O=this.getINode(o,e,F);if(!i&&O.isDirectory())throw u.EISDIR(e);if(i&&!O.isDirectory())throw u.ENOTDIR(e);try{o.del(O.id),o.del(F),o.put(s.id,v.from(JSON.stringify(h)),!0)}catch(B){throw o.abort(),B}o.commit()},t}(Jt),Sn=function(n){function t(r,e,i,o,a){n.call(this,r,e,i,o,a)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.sync=function(e){var i=this;this.isDirty()?this._fs._sync(this.getPath(),this.getBuffer(),this.getStats(),function(o){o||i.resetDirty(),e(o)}):e()},t.prototype.close=function(e){this.sync(e)},t}(ne),Ro=function(n){function t(){n.apply(this,arguments)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.isAvailable=function(){return!0},t.prototype.init=function(e,i){this.store=e,this.makeRootDirectory(i)},t.prototype.getName=function(){return this.store.name()},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsSymlinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!1},t.prototype.empty=function(e){var i=this;this.store.clear(function(o){ye(o,e)&&i.makeRootDirectory(e)})},t.prototype.rename=function(e,i,o){var a=this,s=this.store.beginTransaction("readwrite"),h=p.dirname(e),d=p.basename(e),F=p.dirname(i),O=p.basename(i),B={},J={},tt=!1;if((F+"/").indexOf(e+"/")===0)return o(new u(l.EBUSY,h));var ct=function(){if(!(tt||!J.hasOwnProperty(h)||!J.hasOwnProperty(F))){var Ft=J[h],Ht=B[h],oe=J[F],xe=B[F];if(!Ft[d])o(u.ENOENT(e));else{var ke=Ft[d];delete Ft[d];var rr=function(){oe[O]=ke,s.put(Ht.id,v.from(JSON.stringify(Ft)),!0,function(De){$t(De,s,o)&&(h===F?s.commit(o):s.put(xe.id,v.from(JSON.stringify(oe)),!0,function(Te){$t(Te,s,o)&&s.commit(o)}))})};oe[O]?a.getINode(s,i,oe[O],function(De,Te){$t(De,s,o)&&(Te.isFile()?s.del(Te.id,function(si){$t(si,s,o)&&s.del(oe[O],function(ra){$t(ra,s,o)&&rr()})}):s.abort(function(si){o(u.EPERM(i))}))}):rr()}}},yt=function(Ft){a.findINodeAndDirListing(s,Ft,function(Ht,oe,xe){Ht?tt||(tt=!0,s.abort(function(){o(Ht)})):(B[Ft]=oe,J[Ft]=xe,ct())})};yt(h),h!==F&&yt(F)},t.prototype.stat=function(e,i,o){var a=this.store.beginTransaction("readonly");this.findINode(a,e,function(s,h){ye(s,o)&&o(null,h.toStats())})},t.prototype.createFile=function(e,i,o,a){var s=this,h=this.store.beginTransaction("readwrite"),d=Tt();this.commitNewFile(h,e,L.FILE,o,d,function(F,O){ye(F,a)&&a(null,new Sn(s,e,i,O.toStats(),d))})},t.prototype.openFile=function(e,i,o){var a=this,s=this.store.beginTransaction("readonly");this.findINode(s,e,function(h,d){ye(h,o)&&s.get(d.id,function(F,O){ye(F,o)&&(O===void 0?o(u.ENOENT(e)):o(null,new Sn(a,e,i,d.toStats(),O)))})})},t.prototype.unlink=function(e,i){this.removeEntry(e,!1,i)},t.prototype.rmdir=function(e,i){var o=this;this.readdir(e,function(a,s){a?i(a):s.length>0?i(u.ENOTEMPTY(e)):o.removeEntry(e,!0,i)})},t.prototype.mkdir=function(e,i,o){var a=this.store.beginTransaction("readwrite"),s=v.from("{}");this.commitNewFile(a,e,L.DIRECTORY,i,s,o)},t.prototype.readdir=function(e,i){var o=this,a=this.store.beginTransaction("readonly");this.findINode(a,e,function(s,h){ye(s,i)&&o.getDirListing(a,e,h,function(d,F){ye(d,i)&&i(null,Object.keys(F))})})},t.prototype._sync=function(e,i,o,a){var s=this,h=this.store.beginTransaction("readwrite");this._findINode(h,p.dirname(e),p.basename(e),function(d,F){$t(d,h,a)&&s.getINode(h,e,F,function(O,B){if($t(O,h,a)){var J=B.update(o);h.put(B.id,i,!0,function(tt){$t(tt,h,a)&&(J?h.put(F,B.toBuffer(),!0,function(ct){$t(ct,h,a)&&h.commit(a)}):h.commit(a))})}})})},t.prototype.makeRootDirectory=function(e){var i=this.store.beginTransaction("readwrite");i.get(Ae,function(o,a){if(o||a===void 0){var s=new Date().getTime(),h=new le(Er(),4096,511|L.DIRECTORY,s,s,s);i.put(h.id,gn(),!1,function(d){$t(d,i,e)&&i.put(Ae,h.toBuffer(),!1,function(F){F?i.abort(function(){e(F)}):i.commit(e)})})}else i.commit(e)})},t.prototype._findINode=function(e,i,o,a){var s=this,h=function(d,F,O){d?a(d):O[o]?a(null,O[o]):a(u.ENOENT(p.resolve(i,o)))};i==="/"?o===""?a(null,Ae):this.getINode(e,i,Ae,function(d,F){ye(d,a)&&s.getDirListing(e,i,F,function(O,B){h(O,F,B)})}):this.findINodeAndDirListing(e,i,h)},t.prototype.findINode=function(e,i,o){var a=this;this._findINode(e,p.dirname(i),p.basename(i),function(s,h){ye(s,o)&&a.getINode(e,i,h,o)})},t.prototype.getINode=function(e,i,o,a){e.get(o,function(s,h){ye(s,a)&&(h===void 0?a(u.ENOENT(i)):a(null,le.fromBuffer(h)))})},t.prototype.getDirListing=function(e,i,o,a){o.isDirectory()?e.get(o.id,function(s,h){if(ye(s,a))try{a(null,JSON.parse(h.toString()))}catch(d){a(u.ENOENT(i))}}):a(u.ENOTDIR(i))},t.prototype.findINodeAndDirListing=function(e,i,o){var a=this;this.findINode(e,i,function(s,h){ye(s,o)&&a.getDirListing(e,i,h,function(d,F){ye(d,o)&&o(null,h,F)})})},t.prototype.addNewNode=function(e,i,o){var a=0,s,h=function(){++a==5?o(new u(l.EIO,"Unable to commit data to key-value store.")):(s=Er(),e.put(s,i,!1,function(d,F){d||!F?h():o(null,s)}))};h()},t.prototype.commitNewFile=function(e,i,o,a,s,h){var d=this,F=p.dirname(i),O=p.basename(i),B=new Date().getTime();if(i==="/")return h(u.EEXIST(i));this.findINodeAndDirListing(e,F,function(J,tt,ct){$t(J,e,h)&&(ct[O]?e.abort(function(){h(u.EEXIST(i))}):d.addNewNode(e,s,function(yt,Ft){if($t(yt,e,h)){var Ht=new le(Ft,s.length,a|o,B,B,B);d.addNewNode(e,Ht.toBuffer(),function(oe,xe){$t(oe,e,h)&&(ct[O]=xe,e.put(tt.id,v.from(JSON.stringify(ct)),!0,function(ke){$t(ke,e,h)&&e.commit(function(rr){$t(rr,e,h)&&h(null,Ht)})}))})}}))})},t.prototype.removeEntry=function(e,i,o){var a=this,s=this.store.beginTransaction("readwrite"),h=p.dirname(e),d=p.basename(e);this.findINodeAndDirListing(s,h,function(F,O,B){if($t(F,s,o))if(!B[d])s.abort(function(){o(u.ENOENT(e))});else{var J=B[d];delete B[d],a.getINode(s,e,J,function(tt,ct){$t(tt,s,o)&&(!i&&ct.isDirectory()?s.abort(function(){o(u.EISDIR(e))}):i&&!ct.isDirectory()?s.abort(function(){o(u.ENOTDIR(e))}):s.del(ct.id,function(yt){$t(yt,s,o)&&s.del(J,function(Ft){$t(Ft,s,o)&&s.put(O.id,v.from(JSON.stringify(B)),!0,function(Ht){$t(Ht,s,o)&&s.commit(o)})})}))})}})},t}(K),ze=function(){this.store={}};ze.prototype.name=function(){return Ke.Name},ze.prototype.clear=function(){this.store={}},ze.prototype.beginTransaction=function(t){return new Ne(this)},ze.prototype.get=function(t){return this.store[t]},ze.prototype.put=function(t,r,e){return!e&&this.store.hasOwnProperty(t)?!1:(this.store[t]=r,!0)},ze.prototype.del=function(t){delete this.store[t]};var Ke=function(n){function t(){n.call(this,{store:new ze})}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){i(null,new t)},t}(mn);Ke.Name="InMemory",Ke.Options={};var zr=Gt.indexedDB||Gt.mozIndexedDB||Gt.webkitIndexedDB||Gt.msIndexedDB;function nr(n,t){switch(t===void 0&&(t=n.toString()),n.name){case"NotFoundError":return new u(l.ENOENT,t);case"QuotaExceededError":return new u(l.ENOSPC,t);default:return new u(l.EIO,t)}}function ir(n,t,r){return t===void 0&&(t=l.EIO),r===void 0&&(r=null),function(e){e.preventDefault(),n(new u(t,r!==null?r:void 0))}}var jr=function(t,r){this.tx=t,this.store=r};jr.prototype.get=function(t,r){try{var e=this.store.get(t);e.onerror=ir(r),e.onsuccess=function(i){var o=i.target.result;o===void 0?r(null,o):r(null,Et(o))}}catch(i){r(nr(i))}};var No=function(n){function t(r,e){n.call(this,r,e)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.put=function(e,i,o,a){try{var s=G(i),h;o?h=this.store.put(s,e):h=this.store.add(s,e),h.onerror=ir(a),h.onsuccess=function(d){a(null,!0)}}catch(d){a(nr(d))}},t.prototype.del=function(e,i){try{var o=this.store.delete(e);o.onerror=ir(i),o.onsuccess=function(a){i()}}catch(a){i(nr(a))}},t.prototype.commit=function(e){setTimeout(e,0)},t.prototype.abort=function(e){var i=null;try{this.tx.abort()}catch(o){i=nr(o)}finally{e(i)}},t}(jr),Fr=function(t,r){var e=this;r===void 0&&(r="browserfs"),this.storeName=r;var i=zr.open(this.storeName,1);i.onupgradeneeded=function(o){var a=o.target.result;a.objectStoreNames.contains(e.storeName)&&a.deleteObjectStore(e.storeName),a.createObjectStore(e.storeName)},i.onsuccess=function(o){e.db=o.target.result,t(null,e)},i.onerror=ir(t,l.EACCES)};Fr.prototype.name=function(){return or.Name+" - "+this.storeName},Fr.prototype.clear=function(t){try{var r=this.db.transaction(this.storeName,"readwrite"),e=r.objectStore(this.storeName),i=e.clear();i.onsuccess=function(o){setTimeout(t,0)},i.onerror=ir(t)}catch(o){t(nr(o))}},Fr.prototype.beginTransaction=function(t){t===void 0&&(t="readonly");var r=this.db.transaction(this.storeName,t),e=r.objectStore(this.storeName);if(t==="readwrite")return new No(r,e);if(t==="readonly")return new jr(r,e);throw new u(l.EINVAL,"Invalid transaction type.")};var or=function(n){function t(r,e,i){var o=this;i===void 0&&(i=!0),n.call(this),this.store=new Fr(function(a){a?r(a):o.init(o.store,function(s){r(s,o)})},e),bt(i,t.Name,{storeName:e})}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){new t(i,e.storeName,!1)},t.isAvailable=function(){try{return typeof zr!="undefined"&&zr.open("__browserfs_test__")!==null}catch(e){return!1}},t}(Ro);or.Name="IndexedDB",or.Options={storeName:{type:"string",optional:!0,description:"The name of this file system. You can have multiple IndexedDB file systems operating at once, but each must have a different name."}};var Br=!1,ar;try{Gt.localStorage.setItem("__test__",String.fromCharCode(55296)),Br=Gt.localStorage.getItem("__test__")===String.fromCharCode(55296)}catch(n){Br=!1}ar=Br?"binary_string":"binary_string_ie",v.isEncoding(ar)||(ar="base64");var je=function(){};je.prototype.name=function(){return sr.Name},je.prototype.clear=function(){Gt.localStorage.clear()},je.prototype.beginTransaction=function(t){return new Ne(this)},je.prototype.get=function(t){try{var r=Gt.localStorage.getItem(t);if(r!==null)return v.from(r,ar)}catch(e){}},je.prototype.put=function(t,r,e){try{return!e&&Gt.localStorage.getItem(t)!==null?!1:(Gt.localStorage.setItem(t,r.toString(ar)),!0)}catch(i){throw new u(l.ENOSPC,"LocalStorage is full.")}},je.prototype.del=function(t){try{Gt.localStorage.removeItem(t)}catch(r){throw new u(l.EIO,"Unable to delete key "+t+": "+r)}};var sr=function(n){function t(){n.call(this,{store:new je})}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){i(null,new t)},t.isAvailable=function(){return typeof Gt.localStorage!="undefined"},t}(mn);sr.Name="LocalStorage",sr.Options={};var Je=function(n){function t(){n.call(this),this.mountList=[],this.mntMap={},this.rootFs=new Ke}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){var o=new t;Object.keys(e).forEach(function(a){o.mount(a,e[a])}),i(null,o)},t.isAvailable=function(){return!0},t.prototype.mount=function(e,i){if(e[0]!=="/"&&(e="/"+e),e=p.resolve(e),this.mntMap[e])throw new u(l.EINVAL,"Mount point "+e+" is already taken.");C(e,511,this.rootFs),this.mntMap[e]=i,this.mountList.push(e),this.mountList=this.mountList.sort(function(o,a){return a.length-o.length})},t.prototype.umount=function(e){var i=this;if(e[0]!=="/"&&(e="/"+e),e=p.resolve(e),!this.mntMap[e])throw new u(l.EINVAL,"Mount point "+e+" is already unmounted.");for(delete this.mntMap[e],this.mountList.splice(this.mountList.indexOf(e),1);e!=="/"&&i.rootFs.readdirSync(e).length===0;)i.rootFs.rmdirSync(e),e=p.dirname(e)},t.prototype._getFs=function(e){for(var i=this,o=this.mountList,a=o.length,s=0;s<a;s++){var h=o[s];if(h.length<=e.length&&e.indexOf(h)===0)return e=e.substr(h.length>1?h.length:0),e===""&&(e="/"),{fs:i.mntMap[h],path:e}}return{fs:this.rootFs,path:e}},t.prototype.getName=function(){return t.Name},t.prototype.diskSpace=function(e,i){i(0,0)},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsLinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!0},t.prototype.standardizeError=function(e,i,o){var a=e.message.indexOf(i);return a!==-1&&(e.message=e.message.substr(0,a)+o+e.message.substr(a+i.length),e.path=o),e},t.prototype.rename=function(e,i,o){var a=this,s=this._getFs(e),h=this._getFs(i);return s.fs===h.fs?s.fs.rename(s.path,h.path,function(d){d&&a.standardizeError(a.standardizeError(d,s.path,e),h.path,i),o(d)}):st.readFile(e,function(d,F){if(d)return o(d);st.writeFile(i,F,function(O){if(O)return o(O);st.unlink(e,o)})})},t.prototype.renameSync=function(e,i){var o=this._getFs(e),a=this._getFs(i);if(o.fs===a.fs)try{return o.fs.renameSync(o.path,a.path)}catch(h){throw this.standardizeError(this.standardizeError(h,o.path,e),a.path,i),h}var s=st.readFileSync(e);return st.writeFileSync(i,s),st.unlinkSync(e)},t.prototype.readdirSync=function(e){var i=this._getFs(e),o=null;if(i.fs!==this.rootFs)try{o=this.rootFs.readdirSync(e)}catch(s){}try{var a=i.fs.readdirSync(i.path);return o===null?a:a.concat(o.filter(function(s){return a.indexOf(s)===-1}))}catch(s){if(o===null)throw this.standardizeError(s,i.path,e);return o}},t.prototype.readdir=function(e,i){var o=this,a=this._getFs(e);a.fs.readdir(a.path,function(s,h){if(a.fs!==o.rootFs)try{var d=o.rootFs.readdirSync(e);h?h=h.concat(d.filter(function(F){return h.indexOf(F)===-1})):h=d}catch(F){if(s)return i(o.standardizeError(s,a.path,e))}else if(s)return i(o.standardizeError(s,a.path,e));i(null,h)})},t.prototype.rmdirSync=function(e){var i=this._getFs(e);if(this._containsMountPt(e))throw u.ENOTEMPTY(e);try{i.fs.rmdirSync(i.path)}catch(o){throw this.standardizeError(o,i.path,e)}},t.prototype.rmdir=function(e,i){var o=this,a=this._getFs(e);this._containsMountPt(e)?i(u.ENOTEMPTY(e)):a.fs.rmdir(a.path,function(s){i(s?o.standardizeError(s,a.path,e):null)})},t.prototype._containsMountPt=function(e){for(var i=this.mountList,o=i.length,a=0;a<o;a++){var s=i[a];if(s.length>=e.length&&s.slice(0,e.length)===e)return!0}return!1},t}(K);Je.Name="MountableFileSystem",Je.Options={};function _n(n,t,r){return t?function(){for(var e=[],i=arguments.length;i--;)e[i]=arguments[i];var o=e[0],a=this._getFs(o);e[0]=a.path;try{return a.fs[n].apply(a.fs,e)}catch(s){throw this.standardizeError(s,a.path,o),s}}:function(){for(var e=this,i=[],o=arguments.length;o--;)i[o]=arguments[o];var a=i[0],s=this._getFs(a);if(i[0]=s.path,typeof i[i.length-1]=="function"){var h=i[i.length-1];i[i.length-1]=function(){for(var d=[],F=arguments.length;F--;)d[F]=arguments[F];d.length>0&&d[0]instanceof u&&e.standardizeError(d[0],s.path,a),h.apply(null,d)}}return s.fs[n].apply(s.fs,i)}}for(var En=[["exists","unlink","readlink"],["stat","mkdir","realpath","truncate"],["open","readFile","chmod","utimes"],["chown"],["writeFile","appendFile"]],Wr=0;Wr<En.length;Wr++)for(var Oo=En[Wr],Hr=0,Fn=Oo;Hr<Fn.length;Hr+=1){var Ir=Fn[Hr];Je.prototype[Ir]=_n(Ir,!1),Je.prototype[Ir+"Sync"]=_n(Ir+"Sync",!0)}var ur;if(typeof setImmediate!="undefined")ur=setImmediate;else{var me=Gt,Qe=[],In="zero-timeout-message",Lo=function(){if(typeof me.importScripts!="undefined"||!me.postMessage)return!1;var n=!0,t=me.onmessage;return me.onmessage=function(){n=!1},me.postMessage("","*"),me.onmessage=t,n};if(Lo()){ur=function(n){Qe.push(n),me.postMessage(In,"*")};var xn=function(n){if(n.source===self&&n.data===In&&(n.stopPropagation?n.stopPropagation():n.cancelBubble=!0,Qe.length>0)){var t=Qe.shift();return t()}};me.addEventListener?me.addEventListener("message",xn,!0):me.attachEvent("onmessage",xn)}else if(me.MessageChannel){var kn=new me.MessageChannel;kn.port1.onmessage=function(n){if(Qe.length>0)return Qe.shift()()},ur=function(n){Qe.push(n),kn.port2.postMessage("")}}else ur=function(n){return setTimeout(n,0)}}var Zr=ur,fr=function(){this._locked=!1,this._waiters=[]};fr.prototype.lock=function(t){if(this._locked){this._waiters.push(t);return}this._locked=!0,t()},fr.prototype.unlock=function(){if(!this._locked)throw new Error("unlock of a non-locked mutex");var t=this._waiters.shift();if(t){Zr(t);return}this._locked=!1},fr.prototype.tryLock=function(){return this._locked?!1:(this._locked=!0,!0)},fr.prototype.isLocked=function(){return this._locked};var mt=function(t){this._fs=t,this._mu=new fr};mt.prototype.getName=function(){return"LockedFS<"+this._fs.getName()+">"},mt.prototype.getFSUnlocked=function(){return this._fs},mt.prototype.initialize=function(t){this._fs.initialize(t)},mt.prototype.diskSpace=function(t,r){this._fs.diskSpace(t,r)},mt.prototype.isReadOnly=function(){return this._fs.isReadOnly()},mt.prototype.supportsLinks=function(){return this._fs.supportsLinks()},mt.prototype.supportsProps=function(){return this._fs.supportsProps()},mt.prototype.supportsSynch=function(){return this._fs.supportsSynch()},mt.prototype.rename=function(t,r,e){var i=this;this._mu.lock(function(){i._fs.rename(t,r,function(o){i._mu.unlock(),e(o)})})},mt.prototype.renameSync=function(t,r){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.renameSync(t,r)},mt.prototype.stat=function(t,r,e){var i=this;this._mu.lock(function(){i._fs.stat(t,r,function(o,a){i._mu.unlock(),e(o,a)})})},mt.prototype.statSync=function(t,r){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.statSync(t,r)},mt.prototype.open=function(t,r,e,i){var o=this;this._mu.lock(function(){o._fs.open(t,r,e,function(a,s){o._mu.unlock(),i(a,s)})})},mt.prototype.openSync=function(t,r,e){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.openSync(t,r,e)},mt.prototype.unlink=function(t,r){var e=this;this._mu.lock(function(){e._fs.unlink(t,function(i){e._mu.unlock(),r(i)})})},mt.prototype.unlinkSync=function(t){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.unlinkSync(t)},mt.prototype.rmdir=function(t,r){var e=this;this._mu.lock(function(){e._fs.rmdir(t,function(i){e._mu.unlock(),r(i)})})},mt.prototype.rmdirSync=function(t){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.rmdirSync(t)},mt.prototype.mkdir=function(t,r,e){var i=this;this._mu.lock(function(){i._fs.mkdir(t,r,function(o){i._mu.unlock(),e(o)})})},mt.prototype.mkdirSync=function(t,r){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.mkdirSync(t,r)},mt.prototype.readdir=function(t,r){var e=this;this._mu.lock(function(){e._fs.readdir(t,function(i,o){e._mu.unlock(),r(i,o)})})},mt.prototype.readdirSync=function(t){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.readdirSync(t)},mt.prototype.exists=function(t,r){var e=this;this._mu.lock(function(){e._fs.exists(t,function(i){e._mu.unlock(),r(i)})})},mt.prototype.existsSync=function(t){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.existsSync(t)},mt.prototype.realpath=function(t,r,e){var i=this;this._mu.lock(function(){i._fs.realpath(t,r,function(o,a){i._mu.unlock(),e(o,a)})})},mt.prototype.realpathSync=function(t,r){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.realpathSync(t,r)},mt.prototype.truncate=function(t,r,e){var i=this;this._mu.lock(function(){i._fs.truncate(t,r,function(o){i._mu.unlock(),e(o)})})},mt.prototype.truncateSync=function(t,r){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.truncateSync(t,r)},mt.prototype.readFile=function(t,r,e,i){var o=this;this._mu.lock(function(){o._fs.readFile(t,r,e,function(a,s){o._mu.unlock(),i(a,s)})})},mt.prototype.readFileSync=function(t,r,e){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.readFileSync(t,r,e)},mt.prototype.writeFile=function(t,r,e,i,o,a){var s=this;this._mu.lock(function(){s._fs.writeFile(t,r,e,i,o,function(h){s._mu.unlock(),a(h)})})},mt.prototype.writeFileSync=function(t,r,e,i,o){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.writeFileSync(t,r,e,i,o)},mt.prototype.appendFile=function(t,r,e,i,o,a){var s=this;this._mu.lock(function(){s._fs.appendFile(t,r,e,i,o,function(h){s._mu.unlock(),a(h)})})},mt.prototype.appendFileSync=function(t,r,e,i,o){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.appendFileSync(t,r,e,i,o)},mt.prototype.chmod=function(t,r,e,i){var o=this;this._mu.lock(function(){o._fs.chmod(t,r,e,function(a){o._mu.unlock(),i(a)})})},mt.prototype.chmodSync=function(t,r,e){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.chmodSync(t,r,e)},mt.prototype.chown=function(t,r,e,i,o){var a=this;this._mu.lock(function(){a._fs.chown(t,r,e,i,function(s){a._mu.unlock(),o(s)})})},mt.prototype.chownSync=function(t,r,e,i){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.chownSync(t,r,e,i)},mt.prototype.utimes=function(t,r,e,i){var o=this;this._mu.lock(function(){o._fs.utimes(t,r,e,function(a){o._mu.unlock(),i(a)})})},mt.prototype.utimesSync=function(t,r,e){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.utimesSync(t,r,e)},mt.prototype.link=function(t,r,e){var i=this;this._mu.lock(function(){i._fs.link(t,r,function(o){i._mu.unlock(),e(o)})})},mt.prototype.linkSync=function(t,r){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.linkSync(t,r)},mt.prototype.symlink=function(t,r,e,i){var o=this;this._mu.lock(function(){o._fs.symlink(t,r,e,function(a){o._mu.unlock(),i(a)})})},mt.prototype.symlinkSync=function(t,r,e){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.symlinkSync(t,r,e)},mt.prototype.readlink=function(t,r){var e=this;this._mu.lock(function(){e._fs.readlink(t,function(i,o){e._mu.unlock(),r(i,o)})})},mt.prototype.readlinkSync=function(t){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.readlinkSync(t)};var Oe="/.deletedFiles.log";function bn(n){return 146|n}function ve(n){return k.getFileFlag(n)}var Rn=function(n){function t(r,e,i,o,a){n.call(this,r,e,i,o,a)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.sync=function(e){var i=this;if(!this.isDirty()){e(null);return}this._fs._syncAsync(this,function(o){i.resetDirty(),e(o)})},t.prototype.syncSync=function(){this.isDirty()&&(this._fs._syncSync(this),this.resetDirty())},t.prototype.close=function(e){this.sync(e)},t.prototype.closeSync=function(){this.syncSync()},t}(ne),Nn=function(n){function t(r,e){if(n.call(this),this._isInitialized=!1,this._initializeCallbacks=[],this._deletedFiles={},this._deleteLog="",this._deleteLogUpdatePending=!1,this._deleteLogUpdateNeeded=!1,this._deleteLogError=null,this._writable=r,this._readable=e,this._writable.isReadOnly())throw new u(l.EINVAL,"Writable file system must be writable.")}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.isAvailable=function(){return!0},t.prototype.getOverlayedFileSystems=function(){return{readable:this._readable,writable:this._writable}},t.prototype._syncAsync=function(e,i){var o=this;this.createParentDirectoriesAsync(e.getPath(),function(a){if(a)return i(a);o._writable.writeFile(e.getPath(),e.getBuffer(),null,ve("w"),e.getStats().mode,i)})},t.prototype._syncSync=function(e){this.createParentDirectories(e.getPath()),this._writable.writeFileSync(e.getPath(),e.getBuffer(),null,ve("w"),e.getStats().mode)},t.prototype.getName=function(){return cr.Name},t.prototype.initialize=function(e){var i=this,o=this._initializeCallbacks,a=function(s){i._isInitialized=!s,i._initializeCallbacks=[],o.forEach(function(h){return h(s)})};if(this._isInitialized)return e();o.push(e),o.length===1&&this._writable.readFile(Oe,"utf8",ve("r"),function(s,h){if(s){if(s.errno!==l.ENOENT)return a(s)}else i._deleteLog=h;i._reparseDeletionLog(),a()})},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsSynch=function(){return this._readable.supportsSynch()&&this._writable.supportsSynch()},t.prototype.supportsLinks=function(){return!1},t.prototype.supportsProps=function(){return this._readable.supportsProps()&&this._writable.supportsProps()},t.prototype.getDeletionLog=function(){return this._deleteLog},t.prototype.restoreDeletionLog=function(e){this._deleteLog=e,this._reparseDeletionLog(),this.updateLog("")},t.prototype.rename=function(e,i,o){var a=this;if(!(!this.checkInitAsync(o)||this.checkPathAsync(e,o)||this.checkPathAsync(i,o))){if(e===Oe||i===Oe)return o(u.EPERM("Cannot rename deletion log."));if(e===i)return o();this.stat(e,!1,function(s,h){return s?o(s):a.stat(i,!1,function(d,F){var O=a;function B(tt){var ct=tt.shift();if(!ct)return o();var yt=p.resolve(e,ct),Ft=p.resolve(i,ct);O.rename(yt,Ft,function(Ht){if(Ht)return o(Ht);B(tt)})}var J=511;if(h.isDirectory()){if(d)return d.errno!==l.ENOENT?o(d):a._writable.exists(e,function(tt){if(tt)return a._writable.rename(e,i,o);a._writable.mkdir(i,J,function(ct){if(ct)return o(ct);a._readable.readdir(e,function(yt,Ft){if(yt)return o();B(Ft)})})});if(J=F.mode,!F.isDirectory())return o(u.ENOTDIR(i));a.readdir(i,function(tt,ct){if(ct&&ct.length)return o(u.ENOTEMPTY(i));a._readable.readdir(e,function(yt,Ft){if(yt)return o();B(Ft)})})}if(F&&F.isDirectory())return o(u.EISDIR(i));a.readFile(e,null,ve("r"),function(tt,ct){return tt?o(tt):a.writeFile(i,ct,null,ve("w"),h.mode,function(yt){return yt?o(yt):a.unlink(e,o)})})})})}},t.prototype.renameSync=function(e,i){var o=this;if(this.checkInitialized(),this.checkPath(e),this.checkPath(i),e===Oe||i===Oe)throw u.EPERM("Cannot rename deletion log.");var a=this.statSync(e,!1);if(a.isDirectory()){if(e===i)return;var s=511;if(this.existsSync(i)){var h=this.statSync(i,!1);if(s=h.mode,h.isDirectory()){if(this.readdirSync(i).length>0)throw u.ENOTEMPTY(i)}else throw u.ENOTDIR(i)}this._writable.existsSync(e)?this._writable.renameSync(e,i):this._writable.existsSync(i)||this._writable.mkdirSync(i,s),this._readable.existsSync(e)&&this._readable.readdirSync(e).forEach(function(d){o.renameSync(p.resolve(e,d),p.resolve(i,d))})}else{if(this.existsSync(i)&&this.statSync(i,!1).isDirectory())throw u.EISDIR(i);this.writeFileSync(i,this.readFileSync(e,null,ve("r")),null,ve("w"),a.mode)}e!==i&&this.existsSync(e)&&this.unlinkSync(e)},t.prototype.stat=function(e,i,o){var a=this;!this.checkInitAsync(o)||this._writable.stat(e,i,function(s,h){s&&s.errno===l.ENOENT?(a._deletedFiles[e]&&o(u.ENOENT(e)),a._readable.stat(e,i,function(d,F){F&&(F=F.clone(),F.mode=bn(F.mode)),o(d,F)})):o(s,h)})},t.prototype.statSync=function(e,i){this.checkInitialized();try{return this._writable.statSync(e,i)}catch(a){if(this._deletedFiles[e])throw u.ENOENT(e);var o=this._readable.statSync(e,i).clone();return o.mode=bn(o.mode),o}},t.prototype.open=function(e,i,o,a){var s=this;!this.checkInitAsync(a)||this.checkPathAsync(e,a)||this.stat(e,!1,function(h,d){if(d)switch(i.pathExistsAction()){case I.TRUNCATE_FILE:return s.createParentDirectoriesAsync(e,function(F){if(F)return a(F);s._writable.open(e,i,o,a)});case I.NOP:return s._writable.exists(e,function(F){F?s._writable.open(e,i,o,a):(d=d.clone(),d.mode=o,s._readable.readFile(e,null,ve("r"),function(O,B){if(O)return a(O);d.size===-1&&(d.size=B.length);var J=new Rn(s,e,i,d,B);a(null,J)}))});default:return a(u.EEXIST(e))}else switch(i.pathNotExistsAction()){case I.CREATE_FILE:return s.createParentDirectoriesAsync(e,function(F){return F?a(F):s._writable.open(e,i,o,a)});default:return a(u.ENOENT(e))}})},t.prototype.openSync=function(e,i,o){if(this.checkInitialized(),this.checkPath(e),e===Oe)throw u.EPERM("Cannot open deletion log.");if(this.existsSync(e))switch(i.pathExistsAction()){case I.TRUNCATE_FILE:return this.createParentDirectories(e),this._writable.openSync(e,i,o);case I.NOP:if(this._writable.existsSync(e))return this._writable.openSync(e,i,o);var a=this._readable.readFileSync(e,null,ve("r")),s=this._readable.statSync(e,!1).clone();return s.mode=o,new Rn(this,e,i,s,a);default:throw u.EEXIST(e)}else switch(i.pathNotExistsAction()){case I.CREATE_FILE:return this.createParentDirectories(e),this._writable.openSync(e,i,o);default:throw u.ENOENT(e)}},t.prototype.unlink=function(e,i){var o=this;!this.checkInitAsync(i)||this.checkPathAsync(e,i)||this.exists(e,function(a){if(!a)return i(u.ENOENT(e));o._writable.exists(e,function(s){if(s)return o._writable.unlink(e,function(h){if(h)return i(h);o.exists(e,function(d){d&&o.deletePath(e),i(null)})});o.deletePath(e),i(null)})})},t.prototype.unlinkSync=function(e){if(this.checkInitialized(),this.checkPath(e),this.existsSync(e))this._writable.existsSync(e)&&this._writable.unlinkSync(e),this.existsSync(e)&&this.deletePath(e);else throw u.ENOENT(e)},t.prototype.rmdir=function(e,i){var o=this;if(!!this.checkInitAsync(i)){var a=function(){o.readdir(e,function(s,h){if(s)return i(s);if(h.length)return i(u.ENOTEMPTY(e));o.deletePath(e),i(null)})};this.exists(e,function(s){if(!s)return i(u.ENOENT(e));o._writable.exists(e,function(h){h?o._writable.rmdir(e,function(d){if(d)return i(d);o._readable.exists(e,function(F){F?a():i()})}):a()})})}},t.prototype.rmdirSync=function(e){if(this.checkInitialized(),this.existsSync(e)){if(this._writable.existsSync(e)&&this._writable.rmdirSync(e),this.existsSync(e)){if(this.readdirSync(e).length>0)throw u.ENOTEMPTY(e);this.deletePath(e)}}else throw u.ENOENT(e)},t.prototype.mkdir=function(e,i,o){var a=this;!this.checkInitAsync(o)||this.exists(e,function(s){if(s)return o(u.EEXIST(e));a.createParentDirectoriesAsync(e,function(h){if(h)return o(h);a._writable.mkdir(e,i,o)})})},t.prototype.mkdirSync=function(e,i){if(this.checkInitialized(),this.existsSync(e))throw u.EEXIST(e);this.createParentDirectories(e),this._writable.mkdirSync(e,i)},t.prototype.readdir=function(e,i){var o=this;!this.checkInitAsync(i)||this.stat(e,!1,function(a,s){if(a)return i(a);if(!s.isDirectory())return i(u.ENOTDIR(e));o._writable.readdir(e,function(h,d){if(h&&h.code!=="ENOENT")return i(h);(h||!d)&&(d=[]),o._readable.readdir(e,function(F,O){(F||!O)&&(O=[]);var B={},J=d.concat(O.filter(function(tt){return!o._deletedFiles[e+"/"+tt]})).filter(function(tt){var ct=!B[tt];return B[tt]=!0,ct});i(null,J)})})})},t.prototype.readdirSync=function(e){var i=this;this.checkInitialized();var o=this.statSync(e,!1);if(!o.isDirectory())throw u.ENOTDIR(e);var a=[];try{a=a.concat(this._writable.readdirSync(e))}catch(h){}try{a=a.concat(this._readable.readdirSync(e).filter(function(h){return!i._deletedFiles[e+"/"+h]}))}catch(h){}var s={};return a.filter(function(h){var d=!s[h];return s[h]=!0,d})},t.prototype.exists=function(e,i){var o=this;this.checkInitialized(),this._writable.exists(e,function(a){if(a)return i(!0);o._readable.exists(e,function(s){i(s&&o._deletedFiles[e]!==!0)})})},t.prototype.existsSync=function(e){return this.checkInitialized(),this._writable.existsSync(e)||this._readable.existsSync(e)&&this._deletedFiles[e]!==!0},t.prototype.chmod=function(e,i,o,a){var s=this;!this.checkInitAsync(a)||this.operateOnWritableAsync(e,function(h){if(h)return a(h);s._writable.chmod(e,i,o,a)})},t.prototype.chmodSync=function(e,i,o){var a=this;this.checkInitialized(),this.operateOnWritable(e,function(){a._writable.chmodSync(e,i,o)})},t.prototype.chown=function(e,i,o,a,s){var h=this;!this.checkInitAsync(s)||this.operateOnWritableAsync(e,function(d){if(d)return s(d);h._writable.chown(e,i,o,a,s)})},t.prototype.chownSync=function(e,i,o,a){var s=this;this.checkInitialized(),this.operateOnWritable(e,function(){s._writable.chownSync(e,i,o,a)})},t.prototype.utimes=function(e,i,o,a){var s=this;!this.checkInitAsync(a)||this.operateOnWritableAsync(e,function(h){if(h)return a(h);s._writable.utimes(e,i,o,a)})},t.prototype.utimesSync=function(e,i,o){var a=this;this.checkInitialized(),this.operateOnWritable(e,function(){a._writable.utimesSync(e,i,o)})},t.prototype.deletePath=function(e){this._deletedFiles[e]=!0,this.updateLog("d"+e+`
`)},t.prototype.updateLog=function(e){var i=this;this._deleteLog+=e,this._deleteLogUpdatePending?this._deleteLogUpdateNeeded=!0:(this._deleteLogUpdatePending=!0,this._writable.writeFile(Oe,this._deleteLog,"utf8",k.getFileFlag("w"),420,function(o){i._deleteLogUpdatePending=!1,o?i._deleteLogError=o:i._deleteLogUpdateNeeded&&(i._deleteLogUpdateNeeded=!1,i.updateLog(""))}))},t.prototype._reparseDeletionLog=function(){var e=this;this._deletedFiles={},this._deleteLog.split(`
`).forEach(function(i){e._deletedFiles[i.slice(1)]=i.slice(0,1)==="d"})},t.prototype.checkInitialized=function(){if(this._isInitialized){if(this._deleteLogError!==null){var e=this._deleteLogError;throw this._deleteLogError=null,e}}else throw new u(l.EPERM,"OverlayFS is not initialized. Please initialize OverlayFS using its initialize() method before using it.")},t.prototype.checkInitAsync=function(e){if(this._isInitialized){if(this._deleteLogError!==null){var i=this._deleteLogError;return this._deleteLogError=null,e(i),!1}}else return e(new u(l.EPERM,"OverlayFS is not initialized. Please initialize OverlayFS using its initialize() method before using it.")),!1;return!0},t.prototype.checkPath=function(e){if(e===Oe)throw u.EPERM(e)},t.prototype.checkPathAsync=function(e,i){return e===Oe?(i(u.EPERM(e)),!0):!1},t.prototype.createParentDirectoriesAsync=function(e,i){var o=p.dirname(e),a=[],s=this;this._writable.stat(o,!1,h);function h(F,O){F?(a.push(o),o=p.dirname(o),s._writable.stat(o,!1,h)):d()}function d(){if(!a.length)return i();var F=a.pop();s._readable.stat(F,!1,function(O,B){if(!B)return i();s._writable.mkdir(F,B.mode,function(J){if(J)return i(J);d()})})}},t.prototype.createParentDirectories=function(e){for(var i=this,o=p.dirname(e),a=[];!this._writable.existsSync(o);)a.push(o),o=p.dirname(o);a=a.reverse(),a.forEach(function(s){i._writable.mkdirSync(s,i.statSync(s,!1).mode)})},t.prototype.operateOnWritable=function(e,i){if(this.existsSync(e))this._writable.existsSync(e)||this.copyToWritable(e),i();else throw u.ENOENT(e)},t.prototype.operateOnWritableAsync=function(e,i){var o=this;this.exists(e,function(a){if(!a)return i(u.ENOENT(e));o._writable.exists(e,function(s){if(s)i();else return o.copyToWritableAsync(e,i)})})},t.prototype.copyToWritable=function(e){var i=this.statSync(e,!1);i.isDirectory()?this._writable.mkdirSync(e,i.mode):this.writeFileSync(e,this._readable.readFileSync(e,null,ve("r")),null,ve("w"),this.statSync(e,!1).mode)},t.prototype.copyToWritableAsync=function(e,i){var o=this;this.stat(e,!1,function(a,s){if(a)return i(a);if(s.isDirectory())return o._writable.mkdir(e,s.mode,i);o._readable.readFile(e,null,ve("r"),function(h,d){if(h)return i(h);o.writeFile(e,d,null,ve("w"),s.mode,i)})})},t}(K),cr=function(n){function t(r,e,i){i===void 0&&(i=!0),n.call(this,new Nn(r,e)),bt(i,t.Name,{readable:"readable file system",writable:"writable file system"})}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){try{var o=new t(e.writable,e.readable,!1);o.initialize(function(a){i(a,o)},!1)}catch(a){i(a)}},t.isAvailable=function(){return Nn.isAvailable()},t.prototype.initialize=function(e,i){i===void 0&&(i=!0),i&&console.warn("[OverlayFS] OverlayFS.initialize() is deprecated and will be removed in the next major release. Please use 'OverlayFS.Create({readable: readable file system instance, writable: writable file system instance}, cb)' to create and initialize OverlayFS instances."),n.prototype.initialize.call(this,e)},t.prototype.getOverlayedFileSystems=function(){return n.prototype.getFSUnlocked.call(this).getOverlayedFileSystems()},t.prototype.unwrap=function(){return n.prototype.getFSUnlocked.call(this)},t}(mt);cr.Name="OverlayFS",cr.Options={writable:{type:"object",description:"The file system to write modified files to."},readable:{type:"object",description:"The file system that initially populates this file system."}};var Wt;(function(n){n[n.CB=0]="CB",n[n.FD=1]="FD",n[n.API_ERROR=2]="API_ERROR",n[n.STATS=3]="STATS",n[n.PROBE=4]="PROBE",n[n.FILEFLAG=5]="FILEFLAG",n[n.BUFFER=6]="BUFFER",n[n.ERROR=7]="ERROR"})(Wt||(Wt={}));var Vr=function(){this._callbacks={},this._nextId=0};Vr.prototype.toRemoteArg=function(t){var r=this._nextId++;return this._callbacks[r]=t,{type:Wt.CB,id:r}},Vr.prototype.toLocalArg=function(t){var r=this._callbacks[t];return delete this._callbacks[t],r};var xr=function(){this._fileDescriptors={},this._nextId=0};xr.prototype.toRemoteArg=function(t,r,e,i){var o=this._nextId++,a,s;this._fileDescriptors[o]=t,t.stat(function(h,d){h?i(h):(s=Be(d.toBuffer()),e.isReadable()?t.read(v.alloc(d.size),0,d.size,0,function(F,O,B){F?i(F):(a=Be(B),i(null,{type:Wt.FD,id:o,data:a,stat:s,path:r,flag:e.getFlagString()}))}):i(null,{type:Wt.FD,id:o,data:new ArrayBuffer(0),stat:s,path:r,flag:e.getFlagString()}))})},xr.prototype.applyFdAPIRequest=function(t,r){var e=this,i=t.args[0];this._applyFdChanges(i,function(o,a){o?r(o):a[t.method](function(s){t.method==="close"&&delete e._fileDescriptors[i.id],r(s)})})},xr.prototype._applyFdChanges=function(t,r){var e=this._fileDescriptors[t.id],i=We(t.data),o=A.fromBuffer(We(t.stat)),a=k.getFileFlag(t.flag);a.isWriteable()?e.write(i,0,i.length,a.isAppendable()?e.getPos():0,function(s){function h(){e.stat(function(d,F){d?r(d):F.mode!==o.mode?e.chmod(o.mode,function(O){r(O,e)}):r(d,e)})}s?r(s):a.isAppendable()?h():e.truncate(i.length,function(){h()})}):r(null,e)};function kr(n){return{type:Wt.API_ERROR,errorData:Be(n.writeToBuffer())}}function On(n){return u.fromBuffer(We(n.errorData))}function Ln(n){return{type:Wt.ERROR,name:n.name,message:n.message,stack:n.stack}}function Dn(n){var t=Gt[n.name];typeof t!="function"&&(t=Error);var r=new t(n.message);return r.stack=n.stack,r}function Tn(n){return{type:Wt.STATS,statsData:Be(n.toBuffer())}}function An(n){return A.fromBuffer(We(n.statsData))}function Cn(n){return{type:Wt.FILEFLAG,flagStr:n.getFlagString()}}function Mn(n){return k.getFileFlag(n.flagStr)}function Be(n){return G(n)}function We(n){return Et(n)}function Pn(n){return{type:Wt.BUFFER,data:Be(n)}}function Un(n){return We(n.data)}function Do(n){return n&&typeof n=="object"&&n.hasOwnProperty("browserfsMessage")&&n.browserfsMessage}function To(n){return n&&typeof n=="object"&&n.hasOwnProperty("browserfsMessage")&&n.browserfsMessage}var zn=function(n){function t(r,e,i,o,a,s){n.call(this,r,e,i,o,s),this._remoteFdId=a}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.getRemoteFdId=function(){return this._remoteFdId},t.prototype.toRemoteArg=function(){return{type:Wt.FD,id:this._remoteFdId,data:Be(this.getBuffer()),stat:Be(this.getStats().toBuffer()),path:this.getPath(),flag:this.getFlag().getFlagString()}},t.prototype.sync=function(e){this._syncClose("sync",e)},t.prototype.close=function(e){this._syncClose("close",e)},t.prototype._syncClose=function(e,i){var o=this;this.isDirty()?this._fs.syncClose(e,this,function(a){a||o.resetDirty(),i(a)}):i()},t}(ne),br=function(n){function t(r,e){var i=this;e===void 0&&(e=!0),n.call(this),this._callbackConverter=new Vr,this._isInitialized=!1,this._isReadOnly=!1,this._supportLinks=!1,this._supportProps=!1,this._worker=r,bt(e,t.Name,{worker:"Web Worker instance"}),this._worker.addEventListener("message",function(o){var a=o.data;if(To(a)){var s,h=a.args,d=new Array(h.length);for(s=0;s<d.length;s++)d[s]=i._argRemote2Local(h[s]);i._callbackConverter.toLocalArg(a.cbId).apply(null,d)}})}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){var o=new t(e.worker,!1);o.initialize(function(){i(null,o)})},t.isAvailable=function(){return typeof importScripts!="undefined"||typeof Worker!="undefined"},t.attachRemoteListener=function(e){var i=new xr;function o(s,h,d){switch(typeof s){case"object":s instanceof A?d(null,Tn(s)):s instanceof u?d(null,kr(s)):s instanceof gt?d(null,i.toRemoteArg(s,h[0],h[1],d)):s instanceof k?d(null,Cn(s)):s instanceof v?d(null,Pn(s)):s instanceof Error?d(null,Ln(s)):d(null,s);break;default:d(null,s);break}}function a(s,h){if(!s)return s;switch(typeof s){case"object":if(typeof s.type=="number"){var d=s;switch(d.type){case Wt.CB:var F=s.id;return function(){var O=arguments,B,J=new Array(arguments.length),tt,ct=arguments.length;function yt(Ft){ct>0&&(ct=-1,tt={browserfsMessage:!0,cbId:F,args:[kr(Ft)]},e.postMessage(tt))}for(B=0;B<arguments.length;B++)(function(Ft,Ht){o(Ht,h,function(oe,xe){J[Ft]=xe,oe?yt(oe):--ct==0&&(tt={browserfsMessage:!0,cbId:F,args:J},e.postMessage(tt))})})(B,O[B]);arguments.length===0&&(tt={browserfsMessage:!0,cbId:F,args:J},e.postMessage(tt))};case Wt.API_ERROR:return On(d);case Wt.STATS:return An(d);case Wt.FILEFLAG:return Mn(d);case Wt.BUFFER:return Un(d);case Wt.ERROR:return Dn(d);default:return s}}else return s;default:return s}}e.addEventListener("message",function(s){var h=s.data;if(Do(h)){var d=h.args,F=new Array(d.length);switch(h.method){case"close":case"sync":(function(){var J=d[1];i.applyFdAPIRequest(h,function(tt){var ct={browserfsMessage:!0,cbId:J.id,args:tt?[kr(tt)]:[]};e.postMessage(ct)})})();break;case"probe":(function(){var J=st.getRootFS(),tt=d[1],ct={type:Wt.PROBE,isReadOnly:J.isReadOnly(),supportsLinks:J.supportsLinks(),supportsProps:J.supportsProps()},yt={browserfsMessage:!0,cbId:tt.id,args:[ct]};e.postMessage(yt)})();break;default:for(var O=0;O<d.length;O++)F[O]=a(d[O],F);var B=st.getRootFS();B[h.method].apply(B,F);break}}})},t.prototype.getName=function(){return t.Name},t.prototype.initialize=function(e){var i=this;if(this._isInitialized)e();else{var o={browserfsMessage:!0,method:"probe",args:[this._argLocal2Remote(Tt()),this._callbackConverter.toRemoteArg(function(a){i._isInitialized=!0,i._isReadOnly=a.isReadOnly,i._supportLinks=a.supportsLinks,i._supportProps=a.supportsProps,e()})]};this._worker.postMessage(o)}},t.prototype.isReadOnly=function(){return this._isReadOnly},t.prototype.supportsSynch=function(){return!1},t.prototype.supportsLinks=function(){return this._supportLinks},t.prototype.supportsProps=function(){return this._supportProps},t.prototype.rename=function(e,i,o){this._rpc("rename",arguments)},t.prototype.stat=function(e,i,o){this._rpc("stat",arguments)},t.prototype.open=function(e,i,o,a){this._rpc("open",arguments)},t.prototype.unlink=function(e,i){this._rpc("unlink",arguments)},t.prototype.rmdir=function(e,i){this._rpc("rmdir",arguments)},t.prototype.mkdir=function(e,i,o){this._rpc("mkdir",arguments)},t.prototype.readdir=function(e,i){this._rpc("readdir",arguments)},t.prototype.exists=function(e,i){this._rpc("exists",arguments)},t.prototype.realpath=function(e,i,o){this._rpc("realpath",arguments)},t.prototype.truncate=function(e,i,o){this._rpc("truncate",arguments)},t.prototype.readFile=function(e,i,o,a){this._rpc("readFile",arguments)},t.prototype.writeFile=function(e,i,o,a,s,h){this._rpc("writeFile",arguments)},t.prototype.appendFile=function(e,i,o,a,s,h){this._rpc("appendFile",arguments)},t.prototype.chmod=function(e,i,o,a){this._rpc("chmod",arguments)},t.prototype.chown=function(e,i,o,a,s){this._rpc("chown",arguments)},t.prototype.utimes=function(e,i,o,a){this._rpc("utimes",arguments)},t.prototype.link=function(e,i,o){this._rpc("link",arguments)},t.prototype.symlink=function(e,i,o,a){this._rpc("symlink",arguments)},t.prototype.readlink=function(e,i){this._rpc("readlink",arguments)},t.prototype.syncClose=function(e,i,o){this._worker.postMessage({browserfsMessage:!0,method:e,args:[i.toRemoteArg(),this._callbackConverter.toRemoteArg(o)]})},t.prototype._argRemote2Local=function(e){if(!e)return e;switch(typeof e){case"object":if(typeof e.type=="number"){var i=e;switch(i.type){case Wt.API_ERROR:return On(i);case Wt.FD:var o=i;return new zn(this,o.path,k.getFileFlag(o.flag),A.fromBuffer(We(o.stat)),o.id,We(o.data));case Wt.STATS:return An(i);case Wt.FILEFLAG:return Mn(i);case Wt.BUFFER:return Un(i);case Wt.ERROR:return Dn(i);default:return e}}else return e;default:return e}},t.prototype._rpc=function(e,i){for(var o=this,a=new Array(i.length),s=0;s<i.length;s++)a[s]=o._argLocal2Remote(i[s]);var h={browserfsMessage:!0,method:e,args:a};this._worker.postMessage(h)},t.prototype._argLocal2Remote=function(e){if(!e)return e;switch(typeof e){case"object":return e instanceof A?Tn(e):e instanceof u?kr(e):e instanceof zn?e.toRemoteArg():e instanceof k?Cn(e):e instanceof v?Pn(e):e instanceof Error?Ln(e):"Unknown argument";case"function":return this._callbackConverter.toRemoteArg(e);default:return e}},t}(K);br.Name="WorkerFS",br.Options={worker:{type:"object",description:"The target worker that you want to connect to, or the current worker if in a worker context.",validator:function(n,t){n.postMessage?t():t(new u(l.EINVAL,"option must be a Web Worker instance."))}}};function Ao(n,t,r){var e=new XMLHttpRequest;e.open("GET",n,!0);var i=!0;switch(t){case"buffer":e.responseType="arraybuffer";break;case"json":try{e.responseType="json",i=e.responseType==="json"}catch(o){i=!1}break;default:return r(new u(l.EINVAL,"Invalid download type: "+t))}e.onreadystatechange=function(o){if(e.readyState===4)if(e.status===200)switch(t){case"buffer":return r(null,e.response?v.from(e.response):Tt());case"json":return i?r(null,e.response):r(null,JSON.parse(e.responseText))}else return r(new u(e.status,"XHR error."))},e.send()}function Co(n,t){var r=new XMLHttpRequest;r.open("GET",n,!1);var e=null,i=null;if(r.overrideMimeType("text/plain; charset=x-user-defined"),r.onreadystatechange=function(o){if(r.readyState===4)if(r.status===200)switch(t){case"buffer":var a=r.responseText;e=v.alloc(a.length);for(var s=0;s<a.length;s++)e[s]=a.charCodeAt(s);return;case"json":e=JSON.parse(r.responseText);return}else{i=new u(r.status,"XHR error.");return}},r.send(),i)throw i;return e}function Mo(n,t){var r=new XMLHttpRequest;switch(r.open("GET",n,!1),t){case"buffer":r.responseType="arraybuffer";break;case"json":break;default:throw new u(l.EINVAL,"Invalid download type: "+t)}var e,i;if(r.onreadystatechange=function(o){if(r.readyState===4)if(r.status===200)switch(t){case"buffer":e=v.from(r.response);break;case"json":e=JSON.parse(r.response);break}else i=new u(r.status,"XHR error.")},r.send(),i)throw i;return e}function jn(n,t,r){var e=new XMLHttpRequest;e.open("HEAD",t,n),e.onreadystatechange=function(i){if(e.readyState===4)if(e.status===200)try{return r(null,parseInt(e.getResponseHeader("Content-Length")||"-1",10))}catch(o){return r(new u(l.EIO,"XHR HEAD error: Could not read content-length."))}else return r(new u(e.status,"XHR HEAD error."))},e.send()}var Bn=Ao,Po=wt&&typeof Blob!="undefined"?Mo:Co;function Uo(n){var t=-1;return jn(!1,n,function(r,e){if(r)throw r;t=e}),t}function zo(n,t){jn(!0,n,t)}var Se=function(){this._index={},this.addPath("/",new he)};Se.fromListing=function(t){var r=new Se,e=new he;r._index["/"]=e;for(var i=[["",t,e]];i.length>0;){var o=void 0,a=i.pop(),s=a[0],h=a[1],d=a[2];for(var F in h)if(h.hasOwnProperty(F)){var O=h[F],B=s+"/"+F;O?(r._index[B]=o=new he,i.push([B,O,o])):o=new $e(new A(L.FILE,-1,365)),d&&(d._ls[F]=o)}}return r},Se.prototype.fileIterator=function(t){var r=this;for(var e in r._index)if(r._index.hasOwnProperty(e))for(var i=r._index[e],o=i.getListing(),a=0,s=o;a<s.length;a+=1){var h=s[a],d=i.getItem(h);Le(d)&&t(d.getData())}},Se.prototype.addPath=function(t,r){if(!r)throw new Error("Inode must be specified");if(t[0]!=="/")throw new Error("Path must be absolute, got: "+t);if(this._index.hasOwnProperty(t))return this._index[t]===r;var e=this._split_path(t),i=e[0],o=e[1],a=this._index[i];return a===void 0&&t!=="/"&&(a=new he,!this.addPath(i,a))||t!=="/"&&!a.addItem(o,r)?!1:(Ce(r)&&(this._index[t]=r),!0)},Se.prototype.addPathFast=function(t,r){var e=t.lastIndexOf("/"),i=e===0?"/":t.substring(0,e),o=t.substring(e+1),a=this._index[i];return a===void 0&&(a=new he,this.addPathFast(i,a)),a.addItem(o,r)?(r.isDir()&&(this._index[t]=r),!0):!1},Se.prototype.removePath=function(t){var r=this,e=this._split_path(t),i=e[0],o=e[1],a=this._index[i];if(a===void 0)return null;var s=a.remItem(o);if(s===null)return null;if(Ce(s)){for(var h=s.getListing(),d=0,F=h;d<F.length;d+=1){var O=F[d];r.removePath(t+"/"+O)}t!=="/"&&delete this._index[t]}return s},Se.prototype.ls=function(t){var r=this._index[t];return r===void 0?null:r.getListing()},Se.prototype.getInode=function(t){var r=this._split_path(t),e=r[0],i=r[1],o=this._index[e];return o===void 0?null:e===t?o:o.getItem(i)},Se.prototype._split_path=function(t){var r=p.dirname(t),e=t.substr(r.length+(r==="/"?0:1));return[r,e]};var $e=function(t){this.data=t};$e.prototype.isFile=function(){return!0},$e.prototype.isDir=function(){return!1},$e.prototype.getData=function(){return this.data},$e.prototype.setData=function(t){this.data=t};var he=function(t){t===void 0&&(t=null),this.data=t,this._ls={}};he.prototype.isFile=function(){return!1},he.prototype.isDir=function(){return!0},he.prototype.getData=function(){return this.data},he.prototype.getStats=function(){return new A(L.DIRECTORY,4096,365)},he.prototype.getListing=function(){return Object.keys(this._ls)},he.prototype.getItem=function(t){var r=this._ls[t];return r||null},he.prototype.addItem=function(t,r){return t in this._ls?!1:(this._ls[t]=r,!0)},he.prototype.remItem=function(t){var r=this._ls[t];return r===void 0?null:(delete this._ls[t],r)};function Le(n){return!!n&&n.isFile()}function Ce(n){return!!n&&n.isDir()}function jo(n,t,r){try{r(null,n.toString(t))}catch(e){r(e)}}var Rr=function(n){function t(r,e,i){e===void 0&&(e=""),i===void 0&&(i=!0),n.call(this),r||(r="index.json"),e.length>0&&e.charAt(e.length-1)!=="/"&&(e=e+"/"),this.prefixUrl=e;var o=null;if(typeof r=="string"){if(o=this._requestFileSync(r,"json"),!o)throw new Error("Unable to find listing at URL: ${listingUrlOrObj}")}else o=r;bt(i,t.Name,{index:typeof r=="string"?r:"file index as an object",baseUrl:e}),this._index=Se.fromListing(o)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){e.index===void 0&&(e.index="index.json"),typeof e.index=="string"?t.FromURL(e.index,i,e.baseUrl,!1):i(null,new t(e.index,e.baseUrl,!1))},t.isAvailable=function(){return typeof XMLHttpRequest!="undefined"&&XMLHttpRequest!==null},t.FromURL=function(e,i,o,a){o===void 0&&(o=e.slice(0,e.lastIndexOf("/")+1)),a===void 0&&(a=!0),a&&console.warn(`[XmlHttpRequest] XmlHttpRequest.FromURL() is deprecated and will be removed in the next major release. Please use 'XmlHttpRequest.Create({ index: "`+e+'", baseUrl: "'+o+`" }, cb)' instead.`),Bn(e,"json",function(s,h){s?i(s):i(null,new t(h,o,!1))})},t.prototype.empty=function(){this._index.fileIterator(function(e){e.fileData=null})},t.prototype.getName=function(){return t.Name},t.prototype.diskSpace=function(e,i){i(0,0)},t.prototype.isReadOnly=function(){return!0},t.prototype.supportsLinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!0},t.prototype.preloadFile=function(e,i){var o=this._index.getInode(e);if(Le(o)){if(o===null)throw u.ENOENT(e);var a=o.getData();a.size=i.length,a.fileData=i}else throw u.EISDIR(e)},t.prototype.stat=function(e,i,o){var a=this._index.getInode(e);if(a===null)return o(u.ENOENT(e));var s;Le(a)?(s=a.getData(),s.size<0?this._requestFileSizeAsync(e,function(h,d){if(h)return o(h);s.size=d,o(null,s.clone())}):o(null,s.clone())):Ce(a)?(s=a.getStats(),o(null,s)):o(u.FileError(l.EINVAL,e))},t.prototype.statSync=function(e,i){var o=this._index.getInode(e);if(o===null)throw u.ENOENT(e);var a;if(Le(o))a=o.getData(),a.size<0&&(a.size=this._requestFileSizeSync(e));else if(Ce(o))a=o.getStats();else throw u.FileError(l.EINVAL,e);return a},t.prototype.open=function(e,i,o,a){if(i.isWriteable())return a(new u(l.EPERM,e));var s=this,h=this._index.getInode(e);if(h===null)return a(u.ENOENT(e));if(Le(h)){var d=h.getData();switch(i.pathExistsAction()){case I.THROW_EXCEPTION:case I.TRUNCATE_FILE:return a(u.EEXIST(e));case I.NOP:if(d.fileData)return a(null,new ae(s,e,i,d.clone(),d.fileData));this._requestFileAsync(e,"buffer",function(F,O){return F?a(F):(d.size=O.length,d.fileData=O,a(null,new ae(s,e,i,d.clone(),O)))});break;default:return a(new u(l.EINVAL,"Invalid FileMode object."))}}else return a(u.EISDIR(e))},t.prototype.openSync=function(e,i,o){if(i.isWriteable())throw new u(l.EPERM,e);var a=this._index.getInode(e);if(a===null)throw u.ENOENT(e);if(Le(a)){var s=a.getData();switch(i.pathExistsAction()){case I.THROW_EXCEPTION:case I.TRUNCATE_FILE:throw u.EEXIST(e);case I.NOP:if(s.fileData)return new ae(this,e,i,s.clone(),s.fileData);var h=this._requestFileSync(e,"buffer");return s.size=h.length,s.fileData=h,new ae(this,e,i,s.clone(),h);default:throw new u(l.EINVAL,"Invalid FileMode object.")}}else throw u.EISDIR(e)},t.prototype.readdir=function(e,i){try{i(null,this.readdirSync(e))}catch(o){i(o)}},t.prototype.readdirSync=function(e){var i=this._index.getInode(e);if(i===null)throw u.ENOENT(e);if(Ce(i))return i.getListing();throw u.ENOTDIR(e)},t.prototype.readFile=function(e,i,o,a){var s=a;this.open(e,o,420,function(h,d){if(h)return a(h);a=function(B,J){d.close(function(tt){return B||(B=tt),s(B,J)})};var F=d,O=F.getBuffer();i===null?a(h,Zt(O)):jo(O,i,a)})},t.prototype.readFileSync=function(e,i,o){var a=this.openSync(e,o,420);try{var s=a,h=s.getBuffer();return i===null?Zt(h):h.toString(i)}finally{a.closeSync()}},t.prototype.getXhrPath=function(e){return e.charAt(0)==="/"&&(e=e.slice(1)),this.prefixUrl+e},t.prototype._requestFileAsync=function(e,i,o){Bn(this.getXhrPath(e),i,o)},t.prototype._requestFileSync=function(e,i){return Po(this.getXhrPath(e),i)},t.prototype._requestFileSizeAsync=function(e,i){zo(this.getXhrPath(e),i)},t.prototype._requestFileSizeSync=function(e){return Uo(this.getXhrPath(e))},t}(K);Rr.Name="XmlHttpRequest",Rr.Options={index:{type:["string","object"],optional:!0,description:"URL to a file index as a JSON file or the file index object itself, generated with the make_xhrfs_index script. Defaults to `index.json`."},baseUrl:{type:"string",optional:!0,description:"Used as the URL prefix for fetched files. Default: Fetch files relative to the index."}};var He=function(){};He.str2byte=function(t,r){for(var e=t.length>r.length?r.length:t.length,i=0;i<e;i++){var o=t.charCodeAt(i);if(o>127){var a=He.extendedChars.indexOf(t.charAt(i));a>-1&&(o=a+128)}r[o]=i}return e},He.byte2str=function(t){for(var r=new Array(t.length),e=0;e<t.length;e++){var i=t[e];i>127?r[e]=He.extendedChars[i-128]:r[e]=String.fromCharCode(i)}return r.join("")},He.byteLength=function(t){return t.length},He.extendedChars=["\xC7","\xFC","\xE9","\xE2","\xE4","\xE0","\xE5","\xE7","\xEA","\xEB","\xE8","\xEF","\xEE","\xEC","\xC4","\xC5","\xC9","\xE6","\xC6","\xF4","\xF6","\xF2","\xFB","\xF9","\xFF","\xD6","\xDC","\xF8","\xA3","\xD8","\xD7","\u0192","\xE1","\xED","\xF3","\xFA","\xF1","\xD1","\xAA","\xBA","\xBF","\xAE","\xAC","\xBD","\xBC","\xA1","\xAB","\xBB","_","_","_","\xA6","\xA6","\xC1","\xC2","\xC0","\xA9","\xA6","\xA6","+","+","\xA2","\xA5","+","+","-","-","+","-","+","\xE3","\xC3","+","+","-","-","\xA6","-","+","\xA4","\xF0","\xD0","\xCA","\xCB","\xC8","i","\xCD","\xCE","\xCF","+","+","_","_","\xA6","\xCC","_","\xD3","\xDF","\xD4","\xD2","\xF5","\xD5","\xB5","\xFE","\xDE","\xDA","\xDB","\xD9","\xFD","\xDD","\xAF","\xB4","\xAD","\xB1","_","\xBE","\xB6","\xA7","\xF7","\xB8","\xB0","\xA8","\xB7","\xB9","\xB3","\xB2","_"," "];var Bo=b(31).inflateRaw,Wn={},Hn;(function(n){n[n.MSDOS=0]="MSDOS",n[n.AMIGA=1]="AMIGA",n[n.OPENVMS=2]="OPENVMS",n[n.UNIX=3]="UNIX",n[n.VM_CMS=4]="VM_CMS",n[n.ATARI_ST=5]="ATARI_ST",n[n.OS2_HPFS=6]="OS2_HPFS",n[n.MAC=7]="MAC",n[n.Z_SYSTEM=8]="Z_SYSTEM",n[n.CP_M=9]="CP_M",n[n.NTFS=10]="NTFS",n[n.MVS=11]="MVS",n[n.VSE=12]="VSE",n[n.ACORN_RISC=13]="ACORN_RISC",n[n.VFAT=14]="VFAT",n[n.ALT_MVS=15]="ALT_MVS",n[n.BEOS=16]="BEOS",n[n.TANDEM=17]="TANDEM",n[n.OS_400=18]="OS_400",n[n.OSX=19]="OSX"})(Hn||(Hn={}));var tr;(function(n){n[n.STORED=0]="STORED",n[n.SHRUNK=1]="SHRUNK",n[n.REDUCED_1=2]="REDUCED_1",n[n.REDUCED_2=3]="REDUCED_2",n[n.REDUCED_3=4]="REDUCED_3",n[n.REDUCED_4=5]="REDUCED_4",n[n.IMPLODE=6]="IMPLODE",n[n.DEFLATE=8]="DEFLATE",n[n.DEFLATE64=9]="DEFLATE64",n[n.TERSE_OLD=10]="TERSE_OLD",n[n.BZIP2=12]="BZIP2",n[n.LZMA=14]="LZMA",n[n.TERSE_NEW=18]="TERSE_NEW",n[n.LZ77=19]="LZ77",n[n.WAVPACK=97]="WAVPACK",n[n.PPMD=98]="PPMD"})(tr||(tr={}));function Zn(n,t){var r=t&31,e=(t>>5&15)-1,i=(t>>9)+1980,o=n&31,a=n>>5&63,s=n>>11;return new Date(i,e,r,s,a,o)}function Nr(n,t,r,e){return e===0?"":t?n.toString("utf8",r,r+e):He.byte2str(n.slice(r,r+e))}var ge=function(t){if(this.data=t,t.readUInt32LE(0)!==67324752)throw new u(l.EINVAL,"Invalid Zip file: Local file header has invalid signature: "+this.data.readUInt32LE(0))};ge.prototype.versionNeeded=function(){return this.data.readUInt16LE(4)},ge.prototype.flags=function(){return this.data.readUInt16LE(6)},ge.prototype.compressionMethod=function(){return this.data.readUInt16LE(8)},ge.prototype.lastModFileTime=function(){return Zn(this.data.readUInt16LE(10),this.data.readUInt16LE(12))},ge.prototype.rawLastModFileTime=function(){return this.data.readUInt32LE(10)},ge.prototype.crc32=function(){return this.data.readUInt32LE(14)},ge.prototype.fileNameLength=function(){return this.data.readUInt16LE(26)},ge.prototype.extraFieldLength=function(){return this.data.readUInt16LE(28)},ge.prototype.fileName=function(){return Nr(this.data,this.useUTF8(),30,this.fileNameLength())},ge.prototype.extraField=function(){var t=30+this.fileNameLength();return this.data.slice(t,t+this.extraFieldLength())},ge.prototype.totalSize=function(){return 30+this.fileNameLength()+this.extraFieldLength()},ge.prototype.useUTF8=function(){return(this.flags()&2048)==2048};var lr=function(t,r,e){this.header=t,this.record=r,this.data=e};lr.prototype.decompress=function(){var t=this.header.compressionMethod(),r=Wn[t];if(r)return r(this.data,this.record.compressedSize(),this.record.uncompressedSize(),this.record.flag());var e=tr[t];throw e||(e="Unknown: "+t),new u(l.EINVAL,"Invalid compression method on file '"+this.header.fileName()+"': "+e)},lr.prototype.getHeader=function(){return this.header},lr.prototype.getRecord=function(){return this.record},lr.prototype.getRawData=function(){return this.data};var Ot=function(t,r){if(this.zipData=t,this.data=r,this.data.readUInt32LE(0)!==33639248)throw new u(l.EINVAL,"Invalid Zip file: Central directory record has invalid signature: "+this.data.readUInt32LE(0));this._filename=this.produceFilename()};Ot.prototype.versionMadeBy=function(){return this.data.readUInt16LE(4)},Ot.prototype.versionNeeded=function(){return this.data.readUInt16LE(6)},Ot.prototype.flag=function(){return this.data.readUInt16LE(8)},Ot.prototype.compressionMethod=function(){return this.data.readUInt16LE(10)},Ot.prototype.lastModFileTime=function(){return Zn(this.data.readUInt16LE(12),this.data.readUInt16LE(14))},Ot.prototype.rawLastModFileTime=function(){return this.data.readUInt32LE(12)},Ot.prototype.crc32=function(){return this.data.readUInt32LE(16)},Ot.prototype.compressedSize=function(){return this.data.readUInt32LE(20)},Ot.prototype.uncompressedSize=function(){return this.data.readUInt32LE(24)},Ot.prototype.fileNameLength=function(){return this.data.readUInt16LE(28)},Ot.prototype.extraFieldLength=function(){return this.data.readUInt16LE(30)},Ot.prototype.fileCommentLength=function(){return this.data.readUInt16LE(32)},Ot.prototype.diskNumberStart=function(){return this.data.readUInt16LE(34)},Ot.prototype.internalAttributes=function(){return this.data.readUInt16LE(36)},Ot.prototype.externalAttributes=function(){return this.data.readUInt32LE(38)},Ot.prototype.headerRelativeOffset=function(){return this.data.readUInt32LE(42)},Ot.prototype.produceFilename=function(){var t=Nr(this.data,this.useUTF8(),46,this.fileNameLength());return t.replace(/\\/g,"/")},Ot.prototype.fileName=function(){return this._filename},Ot.prototype.rawFileName=function(){return this.data.slice(46,46+this.fileNameLength())},Ot.prototype.extraField=function(){var t=44+this.fileNameLength();return this.data.slice(t,t+this.extraFieldLength())},Ot.prototype.fileComment=function(){var t=46+this.fileNameLength()+this.extraFieldLength();return Nr(this.data,this.useUTF8(),t,this.fileCommentLength())},Ot.prototype.rawFileComment=function(){var t=46+this.fileNameLength()+this.extraFieldLength();return this.data.slice(t,t+this.fileCommentLength())},Ot.prototype.totalSize=function(){return 46+this.fileNameLength()+this.extraFieldLength()+this.fileCommentLength()},Ot.prototype.isDirectory=function(){var t=this.fileName();return!!(this.externalAttributes()&16)||t.charAt(t.length-1)==="/"},Ot.prototype.isFile=function(){return!this.isDirectory()},Ot.prototype.useUTF8=function(){return(this.flag()&2048)==2048},Ot.prototype.isEncrypted=function(){return(this.flag()&1)==1},Ot.prototype.getFileData=function(){var t=this.headerRelativeOffset(),r=new ge(this.zipData.slice(t));return new lr(r,this,this.zipData.slice(t+r.totalSize()))},Ot.prototype.getData=function(){return this.getFileData().decompress()},Ot.prototype.getRawData=function(){return this.getFileData().getRawData()},Ot.prototype.getStats=function(){return new A(L.FILE,this.uncompressedSize(),365,new Date,this.lastModFileTime())};var Fe=function(t){if(this.data=t,this.data.readUInt32LE(0)!==101010256)throw new u(l.EINVAL,"Invalid Zip file: End of central directory record has invalid signature: "+this.data.readUInt32LE(0))};Fe.prototype.diskNumber=function(){return this.data.readUInt16LE(4)},Fe.prototype.cdDiskNumber=function(){return this.data.readUInt16LE(6)},Fe.prototype.cdDiskEntryCount=function(){return this.data.readUInt16LE(8)},Fe.prototype.cdTotalEntryCount=function(){return this.data.readUInt16LE(10)},Fe.prototype.cdSize=function(){return this.data.readUInt32LE(12)},Fe.prototype.cdOffset=function(){return this.data.readUInt32LE(16)},Fe.prototype.cdZipCommentLength=function(){return this.data.readUInt16LE(20)},Fe.prototype.cdZipComment=function(){return Nr(this.data,!0,22,this.cdZipCommentLength())},Fe.prototype.rawCdZipComment=function(){return this.data.slice(22,22+this.cdZipCommentLength())};var Vn=function(t,r,e,i){this.index=t,this.directoryEntries=r,this.eocd=e,this.data=i},Ze=function(n){function t(r,e,i){e===void 0&&(e=""),i===void 0&&(i=!0),n.call(this),this.name=e,this._index=new Se,this._directoryEntries=[],this._eocd=null,bt(i,t.Name,{zipData:"zip data as a Buffer",name:e}),r instanceof Vn?(this._index=r.index,this._directoryEntries=r.directoryEntries,this._eocd=r.eocd,this.data=r.data):(this.data=r,this.populateIndex())}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){try{t.computeIndex(e.zipData,function(o){var a=new t(o,e.name,!1);i(null,a)},!1)}catch(o){i(o)}},t.isAvailable=function(){return!0},t.RegisterDecompressionMethod=function(e,i){Wn[e]=i},t.computeIndex=function(e,i,o){o===void 0&&(o=!0),o&&console.warn("[ZipFS] ZipFS.computeIndex is now deprecated, and will be removed in the next major release. Please update your code to use 'ZipFS.Create({ zipData: zip file as a Buffer}, cb)' instead.");var a=new Se,s=t.getEOCD(e);if(s.diskNumber()!==s.cdDiskNumber())throw new u(l.EINVAL,"ZipFS does not support spanned zip files.");var h=s.cdOffset();if(h===4294967295)throw new u(l.EINVAL,"ZipFS does not support Zip64.");var d=h+s.cdSize();t.computeIndexResponsive(e,a,h,d,i,[],s)},t.getEOCD=function(e){for(var i=22,o=Math.min(i+65535,e.length-1),a=i;a<o;a++)if(e.readUInt32LE(e.length-a)===101010256)return new Fe(e.slice(e.length-a));throw new u(l.EINVAL,"Invalid ZIP file: Could not locate End of Central Directory signature.")},t.addToIndex=function(e,i){var o=e.fileName();if(o.charAt(0)==="/")throw new Error("WHY IS THIS ABSOLUTE");o.charAt(o.length-1)==="/"&&(o=o.substr(0,o.length-1)),e.isDirectory()?i.addPathFast("/"+o,new he(e)):i.addPathFast("/"+o,new $e(e))},t.computeIndexResponsive=function(e,i,o,a,s,h,d){if(o<a){for(var F=0;F++<200&&o<a;){var O=new Ot(e,e.slice(o));t.addToIndex(O,i),o+=O.totalSize(),h.push(O)}Zr(function(){t.computeIndexResponsive(e,i,o,a,s,h,d)})}else s(new Vn(i,h,d,e))},t.prototype.getName=function(){return t.Name+(this.name!==""?" "+this.name:"")},t.prototype.getCentralDirectoryEntry=function(e){var i=this._index.getInode(e);if(i===null)throw u.ENOENT(e);if(Le(i))return i.getData();if(Ce(i))return i.getData();throw u.EPERM("Invalid inode: "+i)},t.prototype.getCentralDirectoryEntryAt=function(e){var i=this._directoryEntries[e];if(!i)throw new RangeError("Invalid directory index: "+e+".");return i},t.prototype.getNumberOfCentralDirectoryEntries=function(){return this._directoryEntries.length},t.prototype.getEndOfCentralDirectory=function(){return this._eocd},t.prototype.diskSpace=function(e,i){i(this.data.length,0)},t.prototype.isReadOnly=function(){return!0},t.prototype.supportsLinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!0},t.prototype.statSync=function(e,i){var o=this._index.getInode(e);if(o===null)throw u.ENOENT(e);var a;if(Le(o))a=o.getData().getStats();else if(Ce(o))a=o.getStats();else throw new u(l.EINVAL,"Invalid inode.");return a},t.prototype.openSync=function(e,i,o){if(i.isWriteable())throw new u(l.EPERM,e);var a=this._index.getInode(e);if(a)if(Le(a)){var s=a.getData(),h=s.getStats();switch(i.pathExistsAction()){case I.THROW_EXCEPTION:case I.TRUNCATE_FILE:throw u.EEXIST(e);case I.NOP:return new ae(this,e,i,h,s.getData());default:throw new u(l.EINVAL,"Invalid FileMode object.")}}else throw u.EISDIR(e);else throw u.ENOENT(e)},t.prototype.readdirSync=function(e){var i=this._index.getInode(e);if(i){if(Ce(i))return i.getListing();throw u.ENOTDIR(e)}else throw u.ENOENT(e)},t.prototype.readFileSync=function(e,i,o){var a=this.openSync(e,o,420);try{var s=a,h=s.getBuffer();return i===null?Zt(h):h.toString(i)}finally{a.closeSync()}},t.prototype.populateIndex=function(){var e=this,i=this._eocd=t.getEOCD(this.data);if(i.diskNumber()!==i.cdDiskNumber())throw new u(l.EINVAL,"ZipFS does not support spanned zip files.");var o=i.cdOffset();if(o===4294967295)throw new u(l.EINVAL,"ZipFS does not support Zip64.");for(var a=o+i.cdSize();o<a;){var s=new Ot(e.data,e.data.slice(o));o+=s.totalSize(),t.addToIndex(s,e._index),e._directoryEntries.push(s)}},t}(Jt);Ze.Name="ZipFS",Ze.Options={zipData:{type:"object",description:"The zip file as a Buffer object.",validator:_},name:{type:"string",optional:!0,description:"The name of the zip file (optional)."}},Ze.CompressionMethod=tr,Ze.RegisterDecompressionMethod(tr.DEFLATE,function(n,t,r){return It(Bo(n.slice(0,t),{chunkSize:r}))}),Ze.RegisterDecompressionMethod(tr.STORED,function(n,t,r){return Zt(n,0,r)});var Wo="IEEE_P1282";function pe(n,t,r){return n.toString("ascii",t,t+r).trim()}function Xr(n,t,r){if(r===1)return String.fromCharCode(n[t]);for(var e=Math.floor(r/2),i=new Array(e),o=0;o<e;o++){var a=t+(o<<1);i[o]=String.fromCharCode(n[a+1]|n[a]<<8)}return i.join("")}function Ie(n,t){var r=parseInt(pe(n,t,4),10),e=parseInt(pe(n,t+4,2),10),i=parseInt(pe(n,t+6,2),10),o=parseInt(pe(n,t+8,2),10),a=parseInt(pe(n,t+10,2),10),s=parseInt(pe(n,t+12,2),10),h=parseInt(pe(n,t+14,2),10);return new Date(r,e,i,o,a,s,h*100)}function Ve(n,t){var r=n[t],e=n[t+1],i=n[t+2],o=n[t+3],a=n[t+4],s=n[t+5];return new Date(r,e-1,i,o,a,s)}function Ho(n,t){var r=n.slice(t),e=new Kt(r);switch(e.signatureWord()){case 17221:return new Kn(r);case 20548:return new Xo(r);case 21328:return new Jn(r);case 21332:return new Qn(r);case 17746:return new $n(r);case 17747:return new Yo(r);case 20568:return new ei(r);case 20558:return new qo(r);case 21324:return new Yr(r);case 20045:return new ri(r);case 17228:return new qr(r);case 20556:return new Go(r);case 21061:return new ni(r);case 21574:return new ii(r);case 21318:return new Ko(r);case 21074:return new ti(r);default:return e}}function Xn(n,t,r,e){r=r-4;for(var i=new Array;t<r;){var o=Ho(n,t),a=o.length();if(a===0)return i;if(t+=a,o instanceof Qn)break;o instanceof Kn?i=i.concat(o.getEntries(e)):i.push(o)}return i}var er=function(t){this._data=t};er.prototype.type=function(){return this._data[0]},er.prototype.standardIdentifier=function(){return pe(this._data,1,5)},er.prototype.version=function(){return this._data[6]},er.prototype.data=function(){return this._data.slice(7,2048)};var Yn=function(n){function t(r){n.call(this,r),this._root=null}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.systemIdentifier=function(){return this._getString32(8)},t.prototype.volumeIdentifier=function(){return this._getString32(40)},t.prototype.volumeSpaceSize=function(){return this._data.readUInt32LE(80)},t.prototype.volumeSetSize=function(){return this._data.readUInt16LE(120)},t.prototype.volumeSequenceNumber=function(){return this._data.readUInt16LE(124)},t.prototype.logicalBlockSize=function(){return this._data.readUInt16LE(128)},t.prototype.pathTableSize=function(){return this._data.readUInt32LE(132)},t.prototype.locationOfTypeLPathTable=function(){return this._data.readUInt32LE(140)},t.prototype.locationOfOptionalTypeLPathTable=function(){return this._data.readUInt32LE(144)},t.prototype.locationOfTypeMPathTable=function(){return this._data.readUInt32BE(148)},t.prototype.locationOfOptionalTypeMPathTable=function(){return this._data.readUInt32BE(152)},t.prototype.rootDirectoryEntry=function(e){return this._root===null&&(this._root=this._constructRootDirectoryRecord(this._data.slice(156)),this._root.rootCheckForRockRidge(e)),this._root},t.prototype.volumeSetIdentifier=function(){return this._getString(190,128)},t.prototype.publisherIdentifier=function(){return this._getString(318,128)},t.prototype.dataPreparerIdentifier=function(){return this._getString(446,128)},t.prototype.applicationIdentifier=function(){return this._getString(574,128)},t.prototype.copyrightFileIdentifier=function(){return this._getString(702,38)},t.prototype.abstractFileIdentifier=function(){return this._getString(740,36)},t.prototype.bibliographicFileIdentifier=function(){return this._getString(776,37)},t.prototype.volumeCreationDate=function(){return Ie(this._data,813)},t.prototype.volumeModificationDate=function(){return Ie(this._data,830)},t.prototype.volumeExpirationDate=function(){return Ie(this._data,847)},t.prototype.volumeEffectiveDate=function(){return Ie(this._data,864)},t.prototype.fileStructureVersion=function(){return this._data[881]},t.prototype.applicationUsed=function(){return this._data.slice(883,883+512)},t.prototype.reserved=function(){return this._data.slice(1395,1395+653)},t.prototype._getString32=function(e){return this._getString(e,32)},t}(er),Zo=function(n){function t(r){if(n.call(this,r),this.type()!==1)throw new u(l.EIO,"Invalid primary volume descriptor.")}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.name=function(){return"ISO9660"},t.prototype._constructRootDirectoryRecord=function(e){return new qn(e,-1)},t.prototype._getString=function(e,i){return this._getString(e,i)},t}(Yn),Vo=function(n){function t(r){if(n.call(this,r),this.type()!==2)throw new u(l.EIO,"Invalid supplementary volume descriptor.");var e=this.escapeSequence(),i=e[2];if(e[0]!==37||e[1]!==47||i!==64&&i!==67&&i!==69)throw new u(l.EIO,"Unrecognized escape sequence for SupplementaryVolumeDescriptor: "+e.toString())}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.name=function(){return"Joliet"},t.prototype.escapeSequence=function(){return this._data.slice(88,120)},t.prototype._constructRootDirectoryRecord=function(e){return new Gn(e,-1)},t.prototype._getString=function(e,i){return Xr(this._data,e,i)},t}(Yn),zt=function(t,r){this._suEntries=null,this._fileOrDir=null,this._data=t,this._rockRidgeOffset=r};zt.prototype.hasRockRidge=function(){return this._rockRidgeOffset>-1},zt.prototype.getRockRidgeOffset=function(){return this._rockRidgeOffset},zt.prototype.rootCheckForRockRidge=function(t){var r=this.getDirectory(t);this._rockRidgeOffset=r.getDotEntry(t)._getRockRidgeOffset(t),this._rockRidgeOffset>-1&&(this._fileOrDir=null)},zt.prototype.length=function(){return this._data[0]},zt.prototype.extendedAttributeRecordLength=function(){return this._data[1]},zt.prototype.lba=function(){return this._data.readUInt32LE(2)*2048},zt.prototype.dataLength=function(){return this._data.readUInt32LE(10)},zt.prototype.recordingDate=function(){return Ve(this._data,18)},zt.prototype.fileFlags=function(){return this._data[25]},zt.prototype.fileUnitSize=function(){return this._data[26]},zt.prototype.interleaveGapSize=function(){return this._data[27]},zt.prototype.volumeSequenceNumber=function(){return this._data.readUInt16LE(28)},zt.prototype.identifier=function(){return this._getString(33,this._data[32])},zt.prototype.fileName=function(t){if(this.hasRockRidge()){var r=this._rockRidgeFilename(t);if(r!==null)return r}var e=this.identifier();if(this.isDirectory(t))return e;var i=e.indexOf(";");return i===-1?e:e[i-1]==="."?e.slice(0,i-1):e.slice(0,i)},zt.prototype.isDirectory=function(t){var r=!!(this.fileFlags()&2);return!r&&this.hasRockRidge()&&(r=this.getSUEntries(t).filter(function(e){return e instanceof qr}).length>0),r},zt.prototype.isSymlink=function(t){return this.hasRockRidge()&&this.getSUEntries(t).filter(function(r){return r instanceof Yr}).length>0},zt.prototype.getSymlinkPath=function(t){for(var r="",e=this.getSUEntries(t),i=this._getGetString(),o=0,a=e;o<a.length;o+=1){var s=a[o];if(s instanceof Yr){for(var h=s.componentRecords(),d=0,F=h;d<F.length;d+=1){var O=F[d],B=O.flags();B&2?r+="./":B&4?r+="../":B&8?r+="/":(r+=O.content(i),B&1||(r+="/"))}if(!s.continueFlag())break}}return r.length>1&&r[r.length-1]==="/"?r.slice(0,r.length-1):r},zt.prototype.getFile=function(t){if(this.isDirectory(t))throw new Error("Tried to get a File from a directory.");return this._fileOrDir===null&&(this._fileOrDir=t.slice(this.lba(),this.lba()+this.dataLength())),this._fileOrDir},zt.prototype.getDirectory=function(t){if(!this.isDirectory(t))throw new Error("Tried to get a Directory from a file.");return this._fileOrDir===null&&(this._fileOrDir=this._constructDirectory(t)),this._fileOrDir},zt.prototype.getSUEntries=function(t){return this._suEntries||this._constructSUEntries(t),this._suEntries},zt.prototype._rockRidgeFilename=function(t){var r=this.getSUEntries(t).filter(function(h){return h instanceof ri});if(r.length===0||r[0].flags()&(2|4))return null;for(var e="",i=this._getGetString(),o=0,a=r;o<a.length;o+=1){var s=a[o];if(e+=s.name(i),!(s.flags()&1))break}return e},zt.prototype._constructSUEntries=function(t){var r=33+this._data[32];r%2==1&&r++,r+=this._rockRidgeOffset,this._suEntries=Xn(this._data,r,this.length(),t)},zt.prototype._getRockRidgeOffset=function(t){this._rockRidgeOffset=0;var r=this.getSUEntries(t);if(r.length>0){var e=r[0];if(e instanceof Jn&&e.checkBytesPass())for(var i=1;i<r.length;i++){var o=r[i];if(o instanceof ti||o instanceof $n&&o.extensionIdentifier()===Wo)return e.bytesSkipped()}}return this._rockRidgeOffset=-1,-1};var qn=function(n){function t(r,e){n.call(this,r,e)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype._getString=function(e,i){return pe(this._data,e,i)},t.prototype._constructDirectory=function(e){return new Jo(this,e)},t.prototype._getGetString=function(){return pe},t}(zt),Gn=function(n){function t(r,e){n.call(this,r,e)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype._getString=function(e,i){return Xr(this._data,e,i)},t.prototype._constructDirectory=function(e){return new Qo(this,e)},t.prototype._getGetString=function(){return Xr},t}(zt),Kt=function(t){this._data=t};Kt.prototype.signatureWord=function(){return this._data.readUInt16BE(0)},Kt.prototype.signatureWordString=function(){return pe(this._data,0,2)},Kt.prototype.length=function(){return this._data[2]},Kt.prototype.suVersion=function(){return this._data[3]};var Kn=function(n){function t(r){n.call(this,r),this._entries=null}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.continuationLba=function(){return this._data.readUInt32LE(4)},t.prototype.continuationLbaOffset=function(){return this._data.readUInt32LE(12)},t.prototype.continuationLength=function(){return this._data.readUInt32LE(20)},t.prototype.getEntries=function(e){if(!this._entries){var i=this.continuationLba()*2048+this.continuationLbaOffset();this._entries=Xn(e,i,this.continuationLength(),e)}return this._entries},t}(Kt),Xo=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t}(Kt),Jn=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.checkBytesPass=function(){return this._data[4]===190&&this._data[5]===239},t.prototype.bytesSkipped=function(){return this._data[6]},t}(Kt),Qn=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t}(Kt),$n=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.identifierLength=function(){return this._data[4]},t.prototype.descriptorLength=function(){return this._data[5]},t.prototype.sourceLength=function(){return this._data[6]},t.prototype.extensionVersion=function(){return this._data[7]},t.prototype.extensionIdentifier=function(){return pe(this._data,8,this.identifierLength())},t.prototype.extensionDescriptor=function(){return pe(this._data,8+this.identifierLength(),this.descriptorLength())},t.prototype.extensionSource=function(){return pe(this._data,8+this.identifierLength()+this.descriptorLength(),this.sourceLength())},t}(Kt),Yo=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.extensionSequence=function(){return this._data[4]},t}(Kt),ti=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t}(Kt),ei=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.mode=function(){return this._data.readUInt32LE(4)},t.prototype.fileLinks=function(){return this._data.readUInt32LE(12)},t.prototype.uid=function(){return this._data.readUInt32LE(20)},t.prototype.gid=function(){return this._data.readUInt32LE(28)},t.prototype.inode=function(){return this._data.readUInt32LE(36)},t}(Kt),qo=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.devTHigh=function(){return this._data.readUInt32LE(4)},t.prototype.devTLow=function(){return this._data.readUInt32LE(12)},t}(Kt),Yr=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.flags=function(){return this._data[4]},t.prototype.continueFlag=function(){return this.flags()&1},t.prototype.componentRecords=function(){for(var e=this,i=new Array,o=5;o<this.length();){var a=new hr(e._data.slice(o));i.push(a),o+=a.length()}return i},t}(Kt),hr=function(t){this._data=t};hr.prototype.flags=function(){return this._data[0]},hr.prototype.length=function(){return 2+this.componentLength()},hr.prototype.componentLength=function(){return this._data[1]},hr.prototype.content=function(t){return t(this._data,2,this.componentLength())};var ri=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.flags=function(){return this._data[4]},t.prototype.name=function(e){return e(this._data,5,this.length()-5)},t}(Kt),qr=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.childDirectoryLba=function(){return this._data.readUInt32LE(4)},t}(Kt),Go=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.parentDirectoryLba=function(){return this._data.readUInt32LE(4)},t}(Kt),ni=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t}(Kt),ii=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.flags=function(){return this._data[4]},t.prototype.creation=function(){return this.flags()&1?this._longFormDates()?Ie(this._data,5):Ve(this._data,5):null},t.prototype.modify=function(){if(this.flags()&2){var e=this.flags()&1?1:0;return this._longFormDates?Ie(this._data,5+e*17):Ve(this._data,5+e*7)}else return null},t.prototype.access=function(){if(this.flags()&4){var e=this.flags()&1?1:0;return e+=this.flags()&2?1:0,this._longFormDates?Ie(this._data,5+e*17):Ve(this._data,5+e*7)}else return null},t.prototype.backup=function(){if(this.flags()&16){var e=this.flags()&1?1:0;return e+=this.flags()&2?1:0,e+=this.flags()&4?1:0,this._longFormDates?Ie(this._data,5+e*17):Ve(this._data,5+e*7)}else return null},t.prototype.expiration=function(){if(this.flags()&32){var e=this.flags()&1?1:0;return e+=this.flags()&2?1:0,e+=this.flags()&4?1:0,e+=this.flags()&16?1:0,this._longFormDates?Ie(this._data,5+e*17):Ve(this._data,5+e*7)}else return null},t.prototype.effective=function(){if(this.flags()&64){var e=this.flags()&1?1:0;return e+=this.flags()&2?1:0,e+=this.flags()&4?1:0,e+=this.flags()&16?1:0,e+=this.flags()&32?1:0,this._longFormDates?Ie(this._data,5+e*17):Ve(this._data,5+e*7)}else return null},t.prototype._longFormDates=function(){return!!this.flags()},t}(Kt),Ko=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.virtualSizeHigh=function(){return this._data.readUInt32LE(4)},t.prototype.virtualSizeLow=function(){return this._data.readUInt32LE(12)},t.prototype.tableDepth=function(){return this._data[20]},t}(Kt),pr=function(t,r){var e=this;this._fileList=[],this._fileMap={},this._record=t;var i=t.lba(),o=i+t.dataLength();if(!(t.fileFlags()&2)){var a=t.getSUEntries(r).filter(function(F){return F instanceof qr})[0];i=a.childDirectoryLba()*2048,o=Infinity}for(;i<o;){var s=r[i];if(s===0){i++;continue}var h=e._constructDirectoryRecord(r.slice(i)),d=h.fileName(r);d!=="\0"&&d!==""?(!h.hasRockRidge()||h.getSUEntries(r).filter(function(F){return F instanceof ni}).length===0)&&(e._fileMap[d]=h,e._fileList.push(d)):o===Infinity&&(o=i+h.dataLength()),i+=h.length()}};pr.prototype.getRecord=function(t){return this._fileMap[t]},pr.prototype.getFileList=function(){return this._fileList},pr.prototype.getDotEntry=function(t){return this._constructDirectoryRecord(t.slice(this._record.lba()))};var Jo=function(n){function t(r,e){n.call(this,r,e)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype._constructDirectoryRecord=function(e){return new qn(e,this._record.getRockRidgeOffset())},t}(pr),Qo=function(n){function t(r,e){n.call(this,r,e)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype._constructDirectoryRecord=function(e){return new Gn(e,this._record.getRockRidgeOffset())},t}(pr),Or=function(n){function t(r,e,i){var o=this;e===void 0&&(e=""),i===void 0&&(i=!0),n.call(this),this._data=r,bt(i,t.Name,{data:"ISO data as a Buffer",name:e});for(var a=!1,s=16*2048,h=new Array;!a;){var d=r.slice(s),F=new er(d);switch(F.type()){case 1:h.push(new Zo(d));break;case 2:h.push(new Vo(d));break;case 255:a=!0;break}s+=2048}if(h.length===0)throw new u(l.EIO,"Unable to find a suitable volume descriptor.");h.forEach(function(O){(!o._pvd||o._pvd.type()!==2)&&(o._pvd=O)}),this._root=this._pvd.rootDirectoryEntry(r),this._name=e}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){var o,a;try{o=new t(e.data,e.name,!1)}catch(s){s=s}finally{i(a,o)}},t.isAvailable=function(){return!0},t.prototype.getName=function(){var e="IsoFS"+this._name+(this._pvd?"-"+this._pvd.name():"");return this._root&&this._root.hasRockRidge()&&(e+="-RockRidge"),e},t.prototype.diskSpace=function(e,i){i(this._data.length,0)},t.prototype.isReadOnly=function(){return!0},t.prototype.supportsLinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!0},t.prototype.statSync=function(e,i){var o=this._getDirectoryRecord(e);if(o===null)throw u.ENOENT(e);return this._getStats(e,o)},t.prototype.openSync=function(e,i,o){if(i.isWriteable())throw new u(l.EPERM,e);var a=this._getDirectoryRecord(e);if(a){if(a.isSymlink(this._data))return this.openSync(p.resolve(e,a.getSymlinkPath(this._data)),i,o);if(a.isDirectory(this._data))throw u.EISDIR(e);var s=a.getFile(this._data),h=this._getStats(e,a);switch(i.pathExistsAction()){case I.THROW_EXCEPTION:case I.TRUNCATE_FILE:throw u.EEXIST(e);case I.NOP:return new ae(this,e,i,h,s);default:throw new u(l.EINVAL,"Invalid FileMode object.")}}else throw u.ENOENT(e)},t.prototype.readdirSync=function(e){var i=this._getDirectoryRecord(e);if(i){if(i.isDirectory(this._data))return i.getDirectory(this._data).getFileList().slice(0);throw u.ENOTDIR(e)}else throw u.ENOENT(e)},t.prototype.readFileSync=function(e,i,o){var a=this.openSync(e,o,420);try{var s=a,h=s.getBuffer();return i===null?Zt(h):h.toString(i)}finally{a.closeSync()}},t.prototype._getDirectoryRecord=function(e){var i=this;if(e==="/")return this._root;for(var o=e.split("/").slice(1),a=this._root,s=0,h=o;s<h.length;s+=1){var d=h[s];if(a.isDirectory(i._data)){if(a=a.getDirectory(i._data).getRecord(d),!a)return null}else return null}return a},t.prototype._getStats=function(e,i){if(i.isSymlink(this._data)){var o=p.resolve(e,i.getSymlinkPath(this._data)),a=this._getDirectoryRecord(o);return a?this._getStats(o,a):null}else{var s=i.dataLength(),h=365,d=i.recordingDate(),F=d,O=d,B=d;if(i.hasRockRidge())for(var J=i.getSUEntries(this._data),tt=0,ct=J;tt<ct.length;tt+=1){var yt=ct[tt];if(yt instanceof ei)h=yt.mode();else if(yt instanceof ii){var Ft=yt.flags();Ft&4&&(F=yt.access()),Ft&2&&(O=yt.modify()),Ft&1&&(B=yt.creation())}}return h=h&365,new A(i.isDirectory(this._data)?L.DIRECTORY:L.FILE,s,h,F,O,B)}},t}(Jt);Or.Name="IsoFS",Or.Options={data:{type:"object",description:"The ISO file in a buffer",validator:_}},[f,wr,mr,Ge,_r,Ke,or,Or,sr,Je,cr,br,Rr,Ze].forEach(function(n){var t=n.Create;n.Create=function(r,e){var i=typeof r=="function",o=i?r:e,a=i?{}:r;function s(h){h?o(h):t.call(n,a,o)}E(n,a,s)}});var Lr={AsyncMirror:f,Dropbox:wr,Emscripten:mr,FolderAdapter:Ge,HTML5FS:_r,InMemory:Ke,IndexedDB:or,IsoFS:Or,LocalStorage:sr,MountableFileSystem:Je,OverlayFS:cr,WorkerFS:br,XmlHttpRequest:Rr,ZipFS:Ze};N.initializeTTYs&&N.initializeTTYs();function $o(n){n.Buffer=v,n.process=N;var t=n.require?n.require:null;n.require=function(r){var e=oi(r);return e||t.apply(null,Array.prototype.slice.call(arguments,0))}}function ta(n,t){Lr[n]=t}function oi(n){switch(n){case"fs":return st;case"path":return p;case"buffer":return m;case"process":return N;case"bfs_utils":return Y;default:return Lr[n]}}function ai(n){return st.initialize(n)}function ea(n,t){Gr(n,function(r,e){e?(ai(e),t()):t(r)})}function Gr(n,t){var r=n.fs;if(!r)return t(new u(l.EPERM,'Missing "fs" property on configuration object.'));var e=n.options,i=0,o=!1;function a(){if(!o){o=!0;var d=Lr[r];d?d.Create(e,t):t(new u(l.EPERM,"File system "+r+" is not available in BrowserFS."))}}if(e!==null&&typeof e=="object"){var s=!1,h=Object.keys(e).filter(function(d){return d!=="fs"});h.forEach(function(d){var F=e[d];F!==null&&typeof F=="object"&&F.fs&&(i++,Gr(F,function(O,B){if(i--,O){if(o)return;o=!0,t(O)}else e[d]=B,i===0&&s&&a()}))}),s=!0}i===0&&a()}"ab".substr(-1)!=="b"&&(String.prototype.substr=function(n){return function(t,r){return t<0&&(t=this.length+t),n.call(this,t,r)}}(String.prototype.substr)),typeof ArrayBuffer!="undefined"&&typeof Uint8Array!="undefined"&&(Uint8Array.prototype.slice||(Uint8Array.prototype.slice=function(n,t){n===void 0&&(n=0),t===void 0&&(t=this.length);var r=this;return n<0&&(n=this.length+n,n<0&&(n=0)),t<0&&(t=this.length+t,t<0&&(t=0)),t<n&&(t=n),new Uint8Array(r.buffer,r.byteOffset+n,t-n)})),T.install=$o,T.registerFileSystem=ta,T.BFSRequire=oi,T.initialize=ai,T.configure=ea,T.getFileSystem=Gr,T.EmscriptenFS=St,T.FileSystem=Lr,T.Errors=R,T.setImmediate=Zr}).call(T,b(1),function(){return this}(),b(5)(rt),b(6))},function(rt,T,b){rt.exports=b(2).Buffer},function(rt,T,b){(function(v){/*!
* The buffer module from node.js, for the browser.
*
* @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
* @license  MIT
*/var j=b(3),x=b(4);T.Buffer=v,T.SlowBuffer=z,T.INSPECT_MAX_BYTES=50;var N=2147483647;T.kMaxLength=N,v.TYPED_ARRAY_SUPPORT=m(),!v.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function m(){try{var w=new Uint8Array(1);return w.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},w.foo()===42}catch(f){return!1}}function p(w){if(w>N)throw new RangeError("Invalid typed array length");var f=new Uint8Array(w);return f.__proto__=v.prototype,f}function v(w,f,c){if(typeof w=="number"){if(typeof f=="string")throw new Error("If encoding is specified then the first argument must be a string");return R(w)}return l(w,f,c)}typeof Symbol!="undefined"&&Symbol.species&&v[Symbol.species]===v&&Object.defineProperty(v,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),v.poolSize=8192;function l(w,f,c){if(typeof w=="number")throw new TypeError('"value" argument must not be a number');return gt(w)?L(w,f,c):typeof w=="string"?I(w,f):A(w)}v.from=function(w,f,c){return l(w,f,c)},v.prototype.__proto__=Uint8Array.prototype,v.__proto__=Uint8Array;function g(w){if(typeof w!="number")throw new TypeError('"size" argument must be a number');if(w<0)throw new RangeError('"size" argument must not be negative')}function u(w,f,c){return g(w),w<=0?p(w):f!==void 0?typeof c=="string"?p(w).fill(f,c):p(w).fill(f):p(w)}v.alloc=function(w,f,c){return u(w,f,c)};function R(w){return g(w),p(w<0?0:Q(w)|0)}v.allocUnsafe=function(w){return R(w)},v.allocUnsafeSlow=function(w){return R(w)};function I(w,f){if((typeof f!="string"||f==="")&&(f="utf8"),!v.isEncoding(f))throw new TypeError('"encoding" must be a valid string encoding');var c=W(w,f)|0,S=p(c),D=S.write(w,f);return D!==c&&(S=S.slice(0,D)),S}function k(w){for(var f=w.length<0?0:Q(w.length)|0,c=p(f),S=0;S<f;S+=1)c[S]=w[S]&255;return c}function L(w,f,c){if(f<0||w.byteLength<f)throw new RangeError("'offset' is out of bounds");if(w.byteLength<f+(c||0))throw new RangeError("'length' is out of bounds");var S;return f===void 0&&c===void 0?S=new Uint8Array(w):c===void 0?S=new Uint8Array(w,f):S=new Uint8Array(w,f,c),S.__proto__=v.prototype,S}function A(w){if(v.isBuffer(w)){var f=Q(w.length)|0,c=p(f);return c.length===0||w.copy(c,0,0,f),c}if(w){if(ne(w)||"length"in w)return typeof w.length!="number"||ae(w.length)?p(0):k(w);if(w.type==="Buffer"&&Array.isArray(w.data))return k(w.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function Q(w){if(w>=N)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+N.toString(16)+" bytes");return w|0}function z(w){return+w!=w&&(w=0),v.alloc(+w)}v.isBuffer=function(f){return f!=null&&f._isBuffer===!0},v.compare=function(f,c){if(!v.isBuffer(f)||!v.isBuffer(c))throw new TypeError("Arguments must be Buffers");if(f===c)return 0;for(var S=f.length,D=c.length,X=0,H=Math.min(S,D);X<H;++X)if(f[X]!==c[X]){S=f[X],D=c[X];break}return S<D?-1:D<S?1:0},v.isEncoding=function(f){switch(String(f).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},v.concat=function(f,c){if(!Array.isArray(f))throw new TypeError('"list" argument must be an Array of Buffers');if(f.length===0)return v.alloc(0);var S;if(c===void 0)for(c=0,S=0;S<f.length;++S)c+=f[S].length;var D=v.allocUnsafe(c),X=0;for(S=0;S<f.length;++S){var H=f[S];if(!v.isBuffer(H))throw new TypeError('"list" argument must be an Array of Buffers');H.copy(D,X),X+=H.length}return D};function W(w,f){if(v.isBuffer(w))return w.length;if(ne(w)||gt(w))return w.byteLength;typeof w!="string"&&(w=""+w);var c=w.length;if(c===0)return 0;for(var S=!1;;)switch(f){case"ascii":case"latin1":case"binary":return c;case"utf8":case"utf-8":case void 0:return et(w).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return c*2;case"hex":return c>>>1;case"base64":return K(w).length;default:if(S)return et(w).length;f=(""+f).toLowerCase(),S=!0}}v.byteLength=W;function _t(w,f,c){var S=!1;if((f===void 0||f<0)&&(f=0),f>this.length||((c===void 0||c>this.length)&&(c=this.length),c<=0)||(c>>>=0,f>>>=0,c<=f))return"";for(w||(w="utf8");;)switch(w){case"hex":return lt(this,f,c);case"utf8":case"utf-8":return wt(this,f,c);case"ascii":return C(this,f,c);case"latin1":case"binary":return G(this,f,c);case"base64":return bt(this,f,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return It(this,f,c);default:if(S)throw new TypeError("Unknown encoding: "+w);w=(w+"").toLowerCase(),S=!0}}v.prototype._isBuffer=!0;function q(w,f,c){var S=w[f];w[f]=w[c],w[c]=S}v.prototype.swap16=function(){var f=this.length;if(f%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var c=0;c<f;c+=2)q(this,c,c+1);return this},v.prototype.swap32=function(){var f=this.length;if(f%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var c=0;c<f;c+=4)q(this,c,c+3),q(this,c+1,c+2);return this},v.prototype.swap64=function(){var f=this.length;if(f%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var c=0;c<f;c+=8)q(this,c,c+7),q(this,c+1,c+6),q(this,c+2,c+5),q(this,c+3,c+4);return this},v.prototype.toString=function(){var f=this.length;return f===0?"":arguments.length===0?wt(this,0,f):_t.apply(this,arguments)},v.prototype.equals=function(f){if(!v.isBuffer(f))throw new TypeError("Argument must be a Buffer");return this===f?!0:v.compare(this,f)===0},v.prototype.inspect=function(){var f="",c=T.INSPECT_MAX_BYTES;return this.length>0&&(f=this.toString("hex",0,c).match(/.{2}/g).join(" "),this.length>c&&(f+=" ... ")),"<Buffer "+f+">"},v.prototype.compare=function(f,c,S,D,X){if(!v.isBuffer(f))throw new TypeError("Argument must be a Buffer");if(c===void 0&&(c=0),S===void 0&&(S=f?f.length:0),D===void 0&&(D=0),X===void 0&&(X=this.length),c<0||S>f.length||D<0||X>this.length)throw new RangeError("out of range index");if(D>=X&&c>=S)return 0;if(D>=X)return-1;if(c>=S)return 1;if(c>>>=0,S>>>=0,D>>>=0,X>>>=0,this===f)return 0;for(var H=X-D,xt=S-c,Lt=Math.min(H,xt),At=this.slice(D,X),Qt=f.slice(c,S),Ct=0;Ct<Lt;++Ct)if(At[Ct]!==Qt[Ct]){H=At[Ct],xt=Qt[Ct];break}return H<xt?-1:xt<H?1:0};function kt(w,f,c,S,D){if(w.length===0)return-1;if(typeof c=="string"?(S=c,c=0):c>2147483647?c=2147483647:c<-2147483648&&(c=-2147483648),c=+c,ae(c)&&(c=D?0:w.length-1),c<0&&(c=w.length+c),c>=w.length){if(D)return-1;c=w.length-1}else if(c<0)if(D)c=0;else return-1;if(typeof f=="string"&&(f=v.from(f,S)),v.isBuffer(f))return f.length===0?-1:dt(w,f,c,S,D);if(typeof f=="number")return f=f&255,typeof Uint8Array.prototype.indexOf=="function"?D?Uint8Array.prototype.indexOf.call(w,f,c):Uint8Array.prototype.lastIndexOf.call(w,f,c):dt(w,[f],c,S,D);throw new TypeError("val must be string, number or Buffer")}function dt(w,f,c,S,D){var X=1,H=w.length,xt=f.length;if(S!==void 0&&(S=String(S).toLowerCase(),S==="ucs2"||S==="ucs-2"||S==="utf16le"||S==="utf-16le")){if(w.length<2||f.length<2)return-1;X=2,H/=2,xt/=2,c/=2}function Lt(be,Xe){return X===1?be[Xe]:be.readUInt16BE(Xe*X)}var At;if(D){var Qt=-1;for(At=c;At<H;At++)if(Lt(w,At)===Lt(f,Qt===-1?0:At-Qt)){if(Qt===-1&&(Qt=At),At-Qt+1===xt)return Qt*X}else Qt!==-1&&(At-=At-Qt),Qt=-1}else for(c+xt>H&&(c=H-xt),At=c;At>=0;At--){for(var Ct=!0,de=0;de<xt;de++)if(Lt(w,At+de)!==Lt(f,de)){Ct=!1;break}if(Ct)return At}return-1}v.prototype.includes=function(f,c,S){return this.indexOf(f,c,S)!==-1},v.prototype.indexOf=function(f,c,S){return kt(this,f,c,S,!0)},v.prototype.lastIndexOf=function(f,c,S){return kt(this,f,c,S,!1)};function M(w,f,c,S){c=Number(c)||0;var D=w.length-c;S?(S=Number(S),S>D&&(S=D)):S=D;var X=f.length;if(X%2!=0)throw new TypeError("Invalid hex string");S>X/2&&(S=X/2);for(var H=0;H<S;++H){var xt=parseInt(f.substr(H*2,2),16);if(ae(xt))return H;w[c+H]=xt}return H}function $(w,f,c,S){return Jt(et(f,w.length-c),w,c,S)}function st(w,f,c,S){return Jt(pt(f),w,c,S)}function Rt(w,f,c,S){return st(w,f,c,S)}function vt(w,f,c,S){return Jt(K(f),w,c,S)}function Dt(w,f,c,S){return Jt(St(f,w.length-c),w,c,S)}v.prototype.write=function(f,c,S,D){if(c===void 0)D="utf8",S=this.length,c=0;else if(S===void 0&&typeof c=="string")D=c,S=this.length,c=0;else if(isFinite(c))c=c>>>0,isFinite(S)?(S=S>>>0,D===void 0&&(D="utf8")):(D=S,S=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var X=this.length-c;if((S===void 0||S>X)&&(S=X),f.length>0&&(S<0||c<0)||c>this.length)throw new RangeError("Attempt to write outside buffer bounds");D||(D="utf8");for(var H=!1;;)switch(D){case"hex":return M(this,f,c,S);case"utf8":case"utf-8":return $(this,f,c,S);case"ascii":return st(this,f,c,S);case"latin1":case"binary":return Rt(this,f,c,S);case"base64":return vt(this,f,c,S);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Dt(this,f,c,S);default:if(H)throw new TypeError("Unknown encoding: "+D);D=(""+D).toLowerCase(),H=!0}},v.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function bt(w,f,c){return f===0&&c===w.length?j.fromByteArray(w):j.fromByteArray(w.slice(f,c))}function wt(w,f,c){c=Math.min(w.length,c);for(var S=[],D=f;D<c;){var X=w[D],H=null,xt=X>239?4:X>223?3:X>191?2:1;if(D+xt<=c){var Lt,At,Qt,Ct;switch(xt){case 1:X<128&&(H=X);break;case 2:Lt=w[D+1],(Lt&192)==128&&(Ct=(X&31)<<6|Lt&63,Ct>127&&(H=Ct));break;case 3:Lt=w[D+1],At=w[D+2],(Lt&192)==128&&(At&192)==128&&(Ct=(X&15)<<12|(Lt&63)<<6|At&63,Ct>2047&&(Ct<55296||Ct>57343)&&(H=Ct));break;case 4:Lt=w[D+1],At=w[D+2],Qt=w[D+3],(Lt&192)==128&&(At&192)==128&&(Qt&192)==128&&(Ct=(X&15)<<18|(Lt&63)<<12|(At&63)<<6|Qt&63,Ct>65535&&Ct<1114112&&(H=Ct))}}H===null?(H=65533,xt=1):H>65535&&(H-=65536,S.push(H>>>10&1023|55296),H=56320|H&1023),S.push(H),D+=xt}return P(S)}var Yt=4096;function P(w){var f=w.length;if(f<=Yt)return String.fromCharCode.apply(String,w);for(var c="",S=0;S<f;)c+=String.fromCharCode.apply(String,w.slice(S,S+=Yt));return c}function C(w,f,c){var S="";c=Math.min(w.length,c);for(var D=f;D<c;++D)S+=String.fromCharCode(w[D]&127);return S}function G(w,f,c){var S="";c=Math.min(w.length,c);for(var D=f;D<c;++D)S+=String.fromCharCode(w[D]);return S}function lt(w,f,c){var S=w.length;(!f||f<0)&&(f=0),(!c||c<0||c>S)&&(c=S);for(var D="",X=f;X<c;++X)D+=Y(w[X]);return D}function It(w,f,c){for(var S=w.slice(f,c),D="",X=0;X<S.length;X+=2)D+=String.fromCharCode(S[X]+S[X+1]*256);return D}v.prototype.slice=function(f,c){var S=this.length;f=~~f,c=c===void 0?S:~~c,f<0?(f+=S,f<0&&(f=0)):f>S&&(f=S),c<0?(c+=S,c<0&&(c=0)):c>S&&(c=S),c<f&&(c=f);var D=this.subarray(f,c);return D.__proto__=v.prototype,D};function ut(w,f,c){if(w%1!=0||w<0)throw new RangeError("offset is not uint");if(w+f>c)throw new RangeError("Trying to access beyond buffer length")}v.prototype.readUIntLE=function(f,c,S){f=f>>>0,c=c>>>0,S||ut(f,c,this.length);for(var D=this[f],X=1,H=0;++H<c&&(X*=256);)D+=this[f+H]*X;return D},v.prototype.readUIntBE=function(f,c,S){f=f>>>0,c=c>>>0,S||ut(f,c,this.length);for(var D=this[f+--c],X=1;c>0&&(X*=256);)D+=this[f+--c]*X;return D},v.prototype.readUInt8=function(f,c){return f=f>>>0,c||ut(f,1,this.length),this[f]},v.prototype.readUInt16LE=function(f,c){return f=f>>>0,c||ut(f,2,this.length),this[f]|this[f+1]<<8},v.prototype.readUInt16BE=function(f,c){return f=f>>>0,c||ut(f,2,this.length),this[f]<<8|this[f+1]},v.prototype.readUInt32LE=function(f,c){return f=f>>>0,c||ut(f,4,this.length),(this[f]|this[f+1]<<8|this[f+2]<<16)+this[f+3]*16777216},v.prototype.readUInt32BE=function(f,c){return f=f>>>0,c||ut(f,4,this.length),this[f]*16777216+(this[f+1]<<16|this[f+2]<<8|this[f+3])},v.prototype.readIntLE=function(f,c,S){f=f>>>0,c=c>>>0,S||ut(f,c,this.length);for(var D=this[f],X=1,H=0;++H<c&&(X*=256);)D+=this[f+H]*X;return X*=128,D>=X&&(D-=Math.pow(2,8*c)),D},v.prototype.readIntBE=function(f,c,S){f=f>>>0,c=c>>>0,S||ut(f,c,this.length);for(var D=c,X=1,H=this[f+--D];D>0&&(X*=256);)H+=this[f+--D]*X;return X*=128,H>=X&&(H-=Math.pow(2,8*c)),H},v.prototype.readInt8=function(f,c){return f=f>>>0,c||ut(f,1,this.length),this[f]&128?(255-this[f]+1)*-1:this[f]},v.prototype.readInt16LE=function(f,c){f=f>>>0,c||ut(f,2,this.length);var S=this[f]|this[f+1]<<8;return S&32768?S|4294901760:S},v.prototype.readInt16BE=function(f,c){f=f>>>0,c||ut(f,2,this.length);var S=this[f+1]|this[f]<<8;return S&32768?S|4294901760:S},v.prototype.readInt32LE=function(f,c){return f=f>>>0,c||ut(f,4,this.length),this[f]|this[f+1]<<8|this[f+2]<<16|this[f+3]<<24},v.prototype.readInt32BE=function(f,c){return f=f>>>0,c||ut(f,4,this.length),this[f]<<24|this[f+1]<<16|this[f+2]<<8|this[f+3]},v.prototype.readFloatLE=function(f,c){return f=f>>>0,c||ut(f,4,this.length),x.read(this,f,!0,23,4)},v.prototype.readFloatBE=function(f,c){return f=f>>>0,c||ut(f,4,this.length),x.read(this,f,!1,23,4)},v.prototype.readDoubleLE=function(f,c){return f=f>>>0,c||ut(f,8,this.length),x.read(this,f,!0,52,8)},v.prototype.readDoubleBE=function(f,c){return f=f>>>0,c||ut(f,8,this.length),x.read(this,f,!1,52,8)};function Et(w,f,c,S,D,X){if(!v.isBuffer(w))throw new TypeError('"buffer" argument must be a Buffer instance');if(f>D||f<X)throw new RangeError('"value" argument is out of bounds');if(c+S>w.length)throw new RangeError("Index out of range")}v.prototype.writeUIntLE=function(f,c,S,D){if(f=+f,c=c>>>0,S=S>>>0,!D){var X=Math.pow(2,8*S)-1;Et(this,f,c,S,X,0)}var H=1,xt=0;for(this[c]=f&255;++xt<S&&(H*=256);)this[c+xt]=f/H&255;return c+S},v.prototype.writeUIntBE=function(f,c,S,D){if(f=+f,c=c>>>0,S=S>>>0,!D){var X=Math.pow(2,8*S)-1;Et(this,f,c,S,X,0)}var H=S-1,xt=1;for(this[c+H]=f&255;--H>=0&&(xt*=256);)this[c+H]=f/xt&255;return c+S},v.prototype.writeUInt8=function(f,c,S){return f=+f,c=c>>>0,S||Et(this,f,c,1,255,0),this[c]=f&255,c+1},v.prototype.writeUInt16LE=function(f,c,S){return f=+f,c=c>>>0,S||Et(this,f,c,2,65535,0),this[c]=f&255,this[c+1]=f>>>8,c+2},v.prototype.writeUInt16BE=function(f,c,S){return f=+f,c=c>>>0,S||Et(this,f,c,2,65535,0),this[c]=f>>>8,this[c+1]=f&255,c+2},v.prototype.writeUInt32LE=function(f,c,S){return f=+f,c=c>>>0,S||Et(this,f,c,4,4294967295,0),this[c+3]=f>>>24,this[c+2]=f>>>16,this[c+1]=f>>>8,this[c]=f&255,c+4},v.prototype.writeUInt32BE=function(f,c,S){return f=+f,c=c>>>0,S||Et(this,f,c,4,4294967295,0),this[c]=f>>>24,this[c+1]=f>>>16,this[c+2]=f>>>8,this[c+3]=f&255,c+4},v.prototype.writeIntLE=function(f,c,S,D){if(f=+f,c=c>>>0,!D){var X=Math.pow(2,8*S-1);Et(this,f,c,S,X-1,-X)}var H=0,xt=1,Lt=0;for(this[c]=f&255;++H<S&&(xt*=256);)f<0&&Lt===0&&this[c+H-1]!==0&&(Lt=1),this[c+H]=(f/xt>>0)-Lt&255;return c+S},v.prototype.writeIntBE=function(f,c,S,D){if(f=+f,c=c>>>0,!D){var X=Math.pow(2,8*S-1);Et(this,f,c,S,X-1,-X)}var H=S-1,xt=1,Lt=0;for(this[c+H]=f&255;--H>=0&&(xt*=256);)f<0&&Lt===0&&this[c+H+1]!==0&&(Lt=1),this[c+H]=(f/xt>>0)-Lt&255;return c+S},v.prototype.writeInt8=function(f,c,S){return f=+f,c=c>>>0,S||Et(this,f,c,1,127,-128),f<0&&(f=255+f+1),this[c]=f&255,c+1},v.prototype.writeInt16LE=function(f,c,S){return f=+f,c=c>>>0,S||Et(this,f,c,2,32767,-32768),this[c]=f&255,this[c+1]=f>>>8,c+2},v.prototype.writeInt16BE=function(f,c,S){return f=+f,c=c>>>0,S||Et(this,f,c,2,32767,-32768),this[c]=f>>>8,this[c+1]=f&255,c+2},v.prototype.writeInt32LE=function(f,c,S){return f=+f,c=c>>>0,S||Et(this,f,c,4,2147483647,-2147483648),this[c]=f&255,this[c+1]=f>>>8,this[c+2]=f>>>16,this[c+3]=f>>>24,c+4},v.prototype.writeInt32BE=function(f,c,S){return f=+f,c=c>>>0,S||Et(this,f,c,4,2147483647,-2147483648),f<0&&(f=4294967295+f+1),this[c]=f>>>24,this[c+1]=f>>>16,this[c+2]=f>>>8,this[c+3]=f&255,c+4};function Zt(w,f,c,S,D,X){if(c+S>w.length)throw new RangeError("Index out of range");if(c<0)throw new RangeError("Index out of range")}function jt(w,f,c,S,D){return f=+f,c=c>>>0,D||Zt(w,f,c,4),x.write(w,f,c,S,23,4),c+4}v.prototype.writeFloatLE=function(f,c,S){return jt(this,f,c,!0,S)},v.prototype.writeFloatBE=function(f,c,S){return jt(this,f,c,!1,S)};function Tt(w,f,c,S,D){return f=+f,c=c>>>0,D||Zt(w,f,c,8),x.write(w,f,c,S,52,8),c+8}v.prototype.writeDoubleLE=function(f,c,S){return Tt(this,f,c,!0,S)},v.prototype.writeDoubleBE=function(f,c,S){return Tt(this,f,c,!1,S)},v.prototype.copy=function(f,c,S,D){if(S||(S=0),!D&&D!==0&&(D=this.length),c>=f.length&&(c=f.length),c||(c=0),D>0&&D<S&&(D=S),D===S||f.length===0||this.length===0)return 0;if(c<0)throw new RangeError("targetStart out of bounds");if(S<0||S>=this.length)throw new RangeError("sourceStart out of bounds");if(D<0)throw new RangeError("sourceEnd out of bounds");D>this.length&&(D=this.length),f.length-c<D-S&&(D=f.length-c+S);var X=D-S,H;if(this===f&&S<c&&c<D)for(H=X-1;H>=0;--H)f[H+c]=this[H+S];else if(X<1e3)for(H=0;H<X;++H)f[H+c]=this[H+S];else Uint8Array.prototype.set.call(f,this.subarray(S,S+X),c);return X},v.prototype.fill=function(f,c,S,D){if(typeof f=="string"){if(typeof c=="string"?(D=c,c=0,S=this.length):typeof S=="string"&&(D=S,S=this.length),f.length===1){var X=f.charCodeAt(0);X<256&&(f=X)}if(D!==void 0&&typeof D!="string")throw new TypeError("encoding must be a string");if(typeof D=="string"&&!v.isEncoding(D))throw new TypeError("Unknown encoding: "+D)}else typeof f=="number"&&(f=f&255);if(c<0||this.length<c||this.length<S)throw new RangeError("Out of range index");if(S<=c)return this;c=c>>>0,S=S===void 0?this.length:S>>>0,f||(f=0);var H;if(typeof f=="number")for(H=c;H<S;++H)this[H]=f;else{var xt=v.isBuffer(f)?f:new v(f,D),Lt=xt.length;for(H=0;H<S-c;++H)this[H+c]=xt[H%Lt]}return this};var _=/[^+/0-9A-Za-z-_]/g;function E(w){if(w=w.trim().replace(_,""),w.length<2)return"";for(;w.length%4!=0;)w=w+"=";return w}function Y(w){return w<16?"0"+w.toString(16):w.toString(16)}function et(w,f){f=f||Infinity;for(var c,S=w.length,D=null,X=[],H=0;H<S;++H){if(c=w.charCodeAt(H),c>55295&&c<57344){if(!D){if(c>56319){(f-=3)>-1&&X.push(239,191,189);continue}else if(H+1===S){(f-=3)>-1&&X.push(239,191,189);continue}D=c;continue}if(c<56320){(f-=3)>-1&&X.push(239,191,189),D=c;continue}c=(D-55296<<10|c-56320)+65536}else D&&(f-=3)>-1&&X.push(239,191,189);if(D=null,c<128){if((f-=1)<0)break;X.push(c)}else if(c<2048){if((f-=2)<0)break;X.push(c>>6|192,c&63|128)}else if(c<65536){if((f-=3)<0)break;X.push(c>>12|224,c>>6&63|128,c&63|128)}else if(c<1114112){if((f-=4)<0)break;X.push(c>>18|240,c>>12&63|128,c>>6&63|128,c&63|128)}else throw new Error("Invalid code point")}return X}function pt(w){for(var f=[],c=0;c<w.length;++c)f.push(w.charCodeAt(c)&255);return f}function St(w,f){for(var c,S,D,X=[],H=0;H<w.length&&!((f-=2)<0);++H)c=w.charCodeAt(H),S=c>>8,D=c%256,X.push(D),X.push(S);return X}function K(w){return j.toByteArray(E(w))}function Jt(w,f,c,S){for(var D=0;D<S&&!(D+c>=f.length||D>=w.length);++D)f[D+c]=w[D];return D}function gt(w){return w instanceof ArrayBuffer||w!=null&&w.constructor!=null&&w.constructor.name==="ArrayBuffer"&&typeof w.byteLength=="number"}function ne(w){return typeof ArrayBuffer.isView=="function"&&ArrayBuffer.isView(w)}function ae(w){return w!==w}}).call(T,b(1))},function(rt,T){T.byteLength=l,T.toByteArray=g,T.fromByteArray=I;for(var b=[],v=[],j=typeof Uint8Array!="undefined"?Uint8Array:Array,x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",N=0,m=x.length;N<m;++N)b[N]=x[N],v[x.charCodeAt(N)]=N;v["-".charCodeAt(0)]=62,v["_".charCodeAt(0)]=63;function p(k){var L=k.length;if(L%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return k[L-2]==="="?2:k[L-1]==="="?1:0}function l(k){return k.length*3/4-p(k)}function g(k){var L,A,Q,z,W,_t,q=k.length;W=p(k),_t=new j(q*3/4-W),Q=W>0?q-4:q;var kt=0;for(L=0,A=0;L<Q;L+=4,A+=3)z=v[k.charCodeAt(L)]<<18|v[k.charCodeAt(L+1)]<<12|v[k.charCodeAt(L+2)]<<6|v[k.charCodeAt(L+3)],_t[kt++]=z>>16&255,_t[kt++]=z>>8&255,_t[kt++]=z&255;return W===2?(z=v[k.charCodeAt(L)]<<2|v[k.charCodeAt(L+1)]>>4,_t[kt++]=z&255):W===1&&(z=v[k.charCodeAt(L)]<<10|v[k.charCodeAt(L+1)]<<4|v[k.charCodeAt(L+2)]>>2,_t[kt++]=z>>8&255,_t[kt++]=z&255),_t}function u(k){return b[k>>18&63]+b[k>>12&63]+b[k>>6&63]+b[k&63]}function R(k,L,A){for(var Q,z=[],W=L;W<A;W+=3)Q=(k[W]<<16)+(k[W+1]<<8)+k[W+2],z.push(u(Q));return z.join("")}function I(k){for(var L,A=k.length,Q=A%3,z="",W=[],_t=16383,q=0,kt=A-Q;q<kt;q+=_t)W.push(R(k,q,q+_t>kt?kt:q+_t));return Q===1?(L=k[A-1],z+=b[L>>2],z+=b[L<<4&63],z+="=="):Q===2&&(L=(k[A-2]<<8)+k[A-1],z+=b[L>>10],z+=b[L>>4&63],z+=b[L<<2&63],z+="="),W.push(z),W.join("")}},function(rt,T){T.read=function(b,v,j,x,N){var m,p,l=N*8-x-1,g=(1<<l)-1,u=g>>1,R=-7,I=j?N-1:0,k=j?-1:1,L=b[v+I];for(I+=k,m=L&(1<<-R)-1,L>>=-R,R+=l;R>0;m=m*256+b[v+I],I+=k,R-=8);for(p=m&(1<<-R)-1,m>>=-R,R+=x;R>0;p=p*256+b[v+I],I+=k,R-=8);if(m===0)m=1-u;else{if(m===g)return p?NaN:(L?-1:1)*Infinity;p=p+Math.pow(2,x),m=m-u}return(L?-1:1)*p*Math.pow(2,m-x)},T.write=function(b,v,j,x,N,m){var p,l,g,u=m*8-N-1,R=(1<<u)-1,I=R>>1,k=N===23?Math.pow(2,-24)-Math.pow(2,-77):0,L=x?0:m-1,A=x?1:-1,Q=v<0||v===0&&1/v<0?1:0;for(v=Math.abs(v),isNaN(v)||v===Infinity?(l=isNaN(v)?1:0,p=R):(p=Math.floor(Math.log(v)/Math.LN2),v*(g=Math.pow(2,-p))<1&&(p--,g*=2),p+I>=1?v+=k/g:v+=k*Math.pow(2,1-I),v*g>=2&&(p++,g/=2),p+I>=R?(l=0,p=R):p+I>=1?(l=(v*g-1)*Math.pow(2,N),p=p+I):(l=v*Math.pow(2,I-1)*Math.pow(2,N),p=0));N>=8;b[j+L]=l&255,L+=A,l/=256,N-=8);for(p=p<<N|l,u+=N;u>0;b[j+L]=p&255,L+=A,p/=256,u-=8);b[j+L-A]|=Q*128}},function(rt,T){rt.exports=function(b){return b.webpackPolyfill||(b.deprecate=function(){},b.paths=[],b.children=[],b.webpackPolyfill=1),b}},function(rt,T,b){var v=b(7),j=new v,x={};function N(p){x[p]||(typeof j[p]=="function"?x[p]=function(){return j[p].apply(j,arguments)}:x[p]=j[p])}for(var m in j)N(m);x.initializeTTYs=function(){j.stdin===null&&(j.initializeTTYs(),x.stdin=j.stdin,x.stdout=j.stdout,x.stderr=j.stderr)},j.nextTick(function(){x.initializeTTYs()}),rt.exports=x},function(rt,T,b){(function(v){var j=this&&this.__extends||function(g,u){for(var R in u)u.hasOwnProperty(R)&&(g[R]=u[R]);function I(){this.constructor=g}g.prototype=u===null?Object.create(u):(I.prototype=u.prototype,new I)},x=b(8),N=null,m=function(){function g(u,R){this.fun=u,this.array=R}return g.prototype.run=function(){this.fun.apply(null,this.array)},g}(),p=function(){function g(){this._queue=[],this._draining=!1,this._currentQueue=null,this._queueIndex=-1}return g.prototype.push=function(u){var R=this;this._queue.push(u)===1&&!this._draining&&setTimeout(function(){return R._drainQueue()},0)},g.prototype._cleanUpNextTick=function(){this._draining=!1,this._currentQueue&&this._currentQueue.length?this._queue=this._currentQueue.concat(this._queue):this._queueIndex=-1,this._queue.length&&this._drainQueue()},g.prototype._drainQueue=function(){var u=this;if(!this._draining){var R=setTimeout(function(){return u._cleanUpNextTick()});this._draining=!0;for(var I=this._queue.length;I;){for(this._currentQueue=this._queue,this._queue=[];++this._queueIndex<I;)this._currentQueue&&this._currentQueue[this._queueIndex].run();this._queueIndex=-1,I=this._queue.length}this._currentQueue=null,this._draining=!1,clearTimeout(R)}},g}(),l=function(g){j(u,g);function u(){g.apply(this,arguments),this.startTime=Date.now(),this._cwd="/",this.platform="browser",this.argv=[],this.execArgv=[],this.stdout=null,this.stderr=null,this.stdin=null,this.domain=null,this._queue=new p,this.execPath=v,this.env={},this.exitCode=0,this._gid=1,this._uid=1,this.version="v5.0",this.versions={http_parser:"0.0",node:"5.0",v8:"0.0",uv:"0.0",zlib:"0.0",ares:"0.0",icu:"0.0",modules:"0",openssl:"0.0"},this.config={target_defaults:{cflags:[],default_configuration:"Release",defines:[],include_dirs:[],libraries:[]},variables:{clang:0,host_arch:"x32",node_install_npm:!1,node_install_waf:!1,node_prefix:"",node_shared_cares:!1,node_shared_http_parser:!1,node_shared_libuv:!1,node_shared_zlib:!1,node_shared_v8:!1,node_use_dtrace:!1,node_use_etw:!1,node_use_openssl:!1,node_shared_openssl:!1,strict_aliasing:!1,target_arch:"x32",v8_use_snapshot:!1,v8_no_strict_aliasing:0,visibility:""}},this.pid=Math.random()*1e3|0,this.title="node",this.arch="x32",this._mask=18,this.connected=void 0}return u.prototype.chdir=function(R){N===null&&(N=b(9)),this._cwd=N.resolve(R)},u.prototype.cwd=function(){return this._cwd},u.prototype.uptime=function(){return(Date.now()-this.startTime)/1e3|0},u.prototype.nextTick=function(R){for(var I=[],k=1;k<arguments.length;k++)I[k-1]=arguments[k];this._queue.push(new m(R,I))},u.prototype.abort=function(){this.emit("abort")},u.prototype.exit=function(R){this.exitCode=R,this.emit("exit",[R])},u.prototype.getgid=function(){return this._gid},u.prototype.setgid=function(R){typeof R=="number"?this._gid=R:this._gid=1},u.prototype.getuid=function(){return this._uid},u.prototype.setuid=function(R){typeof R=="number"?this._uid=R:this._uid=1},u.prototype.kill=function(R,I){this.emit("kill",[R,I])},u.prototype.memoryUsage=function(){return{rss:0,heapTotal:0,heapUsed:0}},u.prototype.umask=function(R){R===void 0&&(R=this._mask);var I=this._mask;return this._mask=R,this.emit("umask",[R]),I},u.prototype.hrtime=function(){var R;typeof performance!="undefined"?R=performance.now():Date.now?R=Date.now():R=new Date().getTime();var I=R/1e3|0;return R-=I*1e3,R=R*1e6|0,[I,R]},u.prototype.initializeTTYs=function(){if(this.stdout===null){var R=b(10);this.stdout=new R,this.stderr=new R,this.stdin=new R}},u.prototype.disconnect=function(){},u}(x.EventEmitter);rt.exports=l}).call(T,"/")},function(rt,T){function b(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}rt.exports=b,b.EventEmitter=b,b.prototype._events=void 0,b.prototype._maxListeners=void 0,b.defaultMaxListeners=10,b.prototype.setMaxListeners=function(m){if(!j(m)||m<0||isNaN(m))throw TypeError("n must be a positive number");return this._maxListeners=m,this},b.prototype.emit=function(m){var p,l,g,u,R,I;if(this._events||(this._events={}),m==="error"&&(!this._events.error||x(this._events.error)&&!this._events.error.length)){if(p=arguments[1],p instanceof Error)throw p;var k=new Error('Uncaught, unspecified "error" event. ('+p+")");throw k.context=p,k}if(l=this._events[m],N(l))return!1;if(v(l))switch(arguments.length){case 1:l.call(this);break;case 2:l.call(this,arguments[1]);break;case 3:l.call(this,arguments[1],arguments[2]);break;default:u=Array.prototype.slice.call(arguments,1),l.apply(this,u)}else if(x(l))for(u=Array.prototype.slice.call(arguments,1),I=l.slice(),g=I.length,R=0;R<g;R++)I[R].apply(this,u);return!0},b.prototype.addListener=function(m,p){var l;if(!v(p))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",m,v(p.listener)?p.listener:p),this._events[m]?x(this._events[m])?this._events[m].push(p):this._events[m]=[this._events[m],p]:this._events[m]=p,x(this._events[m])&&!this._events[m].warned&&(N(this._maxListeners)?l=b.defaultMaxListeners:l=this._maxListeners,l&&l>0&&this._events[m].length>l&&(this._events[m].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[m].length),typeof console.trace=="function"&&console.trace())),this},b.prototype.on=b.prototype.addListener,b.prototype.once=function(m,p){if(!v(p))throw TypeError("listener must be a function");var l=!1;function g(){this.removeListener(m,g),l||(l=!0,p.apply(this,arguments))}return g.listener=p,this.on(m,g),this},b.prototype.removeListener=function(m,p){var l,g,u,R;if(!v(p))throw TypeError("listener must be a function");if(!this._events||!this._events[m])return this;if(l=this._events[m],u=l.length,g=-1,l===p||v(l.listener)&&l.listener===p)delete this._events[m],this._events.removeListener&&this.emit("removeListener",m,p);else if(x(l)){for(R=u;R-- >0;)if(l[R]===p||l[R].listener&&l[R].listener===p){g=R;break}if(g<0)return this;l.length===1?(l.length=0,delete this._events[m]):l.splice(g,1),this._events.removeListener&&this.emit("removeListener",m,p)}return this},b.prototype.removeAllListeners=function(m){var p,l;if(!this._events)return this;if(!this._events.removeListener)return arguments.length===0?this._events={}:this._events[m]&&delete this._events[m],this;if(arguments.length===0){for(p in this._events)p!=="removeListener"&&this.removeAllListeners(p);return this.removeAllListeners("removeListener"),this._events={},this}if(l=this._events[m],v(l))this.removeListener(m,l);else if(l)for(;l.length;)this.removeListener(m,l[l.length-1]);return delete this._events[m],this},b.prototype.listeners=function(m){var p;return!this._events||!this._events[m]?p=[]:v(this._events[m])?p=[this._events[m]]:p=this._events[m].slice(),p},b.prototype.listenerCount=function(m){if(this._events){var p=this._events[m];if(v(p))return 1;if(p)return p.length}return 0},b.listenerCount=function(m,p){return m.listenerCount(p)};function v(m){return typeof m=="function"}function j(m){return typeof m=="number"}function x(m){return typeof m=="object"&&m!==null}function N(m){return m===void 0}},function(rt,T,b){(function(v){var j=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;function x(m){var p=j.exec(m);return p.shift(),p}var N=function(){function m(){}return m.normalize=function(p){p===""&&(p=".");var l=p.charAt(0)===m.sep;p=m._removeDuplicateSeps(p);for(var g=p.split(m.sep),u=[],R=0;R<g.length;R++){var I=g[R];I!=="."&&(I===".."&&(l||!l&&u.length>0&&u[0]!=="..")?u.pop():u.push(I))}if(!l&&u.length<2)switch(u.length){case 1:u[0]===""&&u.unshift(".");break;default:u.push(".")}return p=u.join(m.sep),l&&p.charAt(0)!==m.sep&&(p=m.sep+p),p},m.join=function(){for(var p=[],l=0;l<arguments.length;l++)p[l-0]=arguments[l];for(var g=[],u=0;u<p.length;u++){var R=p[u];if(typeof R!="string")throw new TypeError("Invalid argument type to path.join: "+typeof R);R!==""&&g.push(R)}return m.normalize(g.join(m.sep))},m.resolve=function(){for(var p=[],l=0;l<arguments.length;l++)p[l-0]=arguments[l];for(var g=[],u=0;u<p.length;u++){var R=p[u];if(typeof R!="string")throw new TypeError("Invalid argument type to path.join: "+typeof R);R!==""&&(R.charAt(0)===m.sep&&(g=[]),g.push(R))}var I=m.normalize(g.join(m.sep));if(I.length>1&&I.charAt(I.length-1)===m.sep)return I.substr(0,I.length-1);if(I.charAt(0)!==m.sep){I.charAt(0)==="."&&(I.length===1||I.charAt(1)===m.sep)&&(I=I.length===1?"":I.substr(2));var k=v.cwd();I!==""?I=this.normalize(k+(k!=="/"?m.sep:"")+I):I=k}return I},m.relative=function(p,l){var g;p=m.resolve(p),l=m.resolve(l);var u=p.split(m.sep),R=l.split(m.sep);R.shift(),u.shift();var I=0,k=[];for(g=0;g<u.length;g++){var L=u[g];if(L!==R[g]){I=u.length-g;break}}k=R.slice(g),u.length===1&&u[0]===""&&(I=0),I>u.length&&(I=u.length);var A="";for(g=0;g<I;g++)A+="../";return A+=k.join(m.sep),A.length>1&&A.charAt(A.length-1)===m.sep&&(A=A.substr(0,A.length-1)),A},m.dirname=function(p){p=m._removeDuplicateSeps(p);var l=p.charAt(0)===m.sep,g=p.split(m.sep);return g.pop()===""&&g.length>0&&g.pop(),g.length>1||g.length===1&&!l?g.join(m.sep):l?m.sep:"."},m.basename=function(p,l){if(l===void 0&&(l=""),p==="")return p;p=m.normalize(p);var g=p.split(m.sep),u=g[g.length-1];if(u===""&&g.length>1)return g[g.length-2];if(l.length>0){var R=u.substr(u.length-l.length);if(R===l)return u.substr(0,u.length-l.length)}return u},m.extname=function(p){p=m.normalize(p);var l=p.split(m.sep);if(p=l.pop(),p===""&&l.length>0&&(p=l.pop()),p==="..")return"";var g=p.lastIndexOf(".");return g===-1||g===0?"":p.substr(g)},m.isAbsolute=function(p){return p.length>0&&p.charAt(0)===m.sep},m._makeLong=function(p){return p},m.parse=function(p){var l=x(p);return{root:l[0],dir:l[0]+l[1].slice(0,-1),base:l[2],ext:l[3],name:l[2].slice(0,l[2].length-l[3].length)}},m.format=function(p){if(p===null||typeof p!="object")throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof p);var l=p.root||"";if(typeof l!="string")throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof p.root);var g=p.dir?p.dir+m.sep:"",u=p.base||"";return g+u},m._removeDuplicateSeps=function(p){return p=p.replace(this._replaceRegex,this.sep),p},m.sep="/",m._replaceRegex=new RegExp("//+","g"),m.delimiter=":",m.posix=m,m.win32=m,m}();rt.exports=N}).call(T,b(6))},function(rt,T,b){(function(v){var j=this&&this.__extends||function(m,p){for(var l in p)p.hasOwnProperty(l)&&(m[l]=p[l]);function g(){this.constructor=m}m.prototype=p===null?Object.create(p):(g.prototype=p.prototype,new g)},x=b(11),N=function(m){j(p,m);function p(){m.call(this),this.isRaw=!1,this.columns=80,this.rows=120,this.isTTY=!0,this._bufferedWrites=[],this._waitingForWrites=!1}return p.prototype.setRawMode=function(l){this.isRaw!==l&&(this.isRaw=l,this.emit("modeChange"))},p.prototype.changeColumns=function(l){l!==this.columns&&(this.columns=l,this.emit("resize"))},p.prototype.changeRows=function(l){l!==this.rows&&(this.rows=l,this.emit("resize"))},p.isatty=function(l){return l&&l instanceof p},p.prototype._write=function(l,g,u){var R;try{var I;typeof l=="string"?I=new v(l,g):I=l,this._bufferedWrites.push(I),this._waitingForWrites&&this._read(1024)}catch(k){R=k}finally{u(R)}},p.prototype._read=function(l){if(this._bufferedWrites.length===0)this._waitingForWrites=!0;else for(;this._bufferedWrites.length>0&&(this._waitingForWrites=this.push(this._bufferedWrites.shift()),!!this._waitingForWrites););},p}(x.Duplex);rt.exports=N}).call(T,b(1))},function(rt,T,b){rt.exports=x;var v=b(8).EventEmitter,j=b(12);j(x,v),x.Readable=b(13),x.Writable=b(27),x.Duplex=b(28),x.Transform=b(29),x.PassThrough=b(30),x.Stream=x;function x(){v.call(this)}x.prototype.pipe=function(N,m){var p=this;function l(A){N.writable&&N.write(A)===!1&&p.pause&&p.pause()}p.on("data",l);function g(){p.readable&&p.resume&&p.resume()}N.on("drain",g),!N._isStdio&&(!m||m.end!==!1)&&(p.on("end",R),p.on("close",I));var u=!1;function R(){u||(u=!0,N.end())}function I(){u||(u=!0,typeof N.destroy=="function"&&N.destroy())}function k(A){if(L(),v.listenerCount(this,"error")===0)throw A}p.on("error",k),N.on("error",k);function L(){p.removeListener("data",l),N.removeListener("drain",g),p.removeListener("end",R),p.removeListener("close",I),p.removeListener("error",k),N.removeListener("error",k),p.removeListener("end",L),p.removeListener("close",L),N.removeListener("close",L)}return p.on("end",L),p.on("close",L),N.on("close",L),N.emit("pipe",p),N}},function(rt,T){typeof Object.create=="function"?rt.exports=function(v,j){v.super_=j,v.prototype=Object.create(j.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}})}:rt.exports=function(v,j){v.super_=j;var x=function(){};x.prototype=j.prototype,v.prototype=new x,v.prototype.constructor=v}},function(rt,T,b){(function(v){var j=function(){try{return b(11)}catch(x){}}();T=rt.exports=b(14),T.Stream=j||T,T.Readable=T,T.Writable=b(22),T.Duplex=b(21),T.Transform=b(25),T.PassThrough=b(26),!v.browser&&v.env.READABLE_STREAM==="disable"&&j&&(rt.exports=j)}).call(T,b(6))},function(rt,T,b){(function(v){rt.exports=z;var j=b(15),x=b(16),N;z.ReadableState=Q,b(8).EventEmitter;var m=function(_,E){return _.listeners(E).length},p;(function(){try{p=b(11)}catch(_){}finally{p||(p=b(8).EventEmitter)}})();var l=b(2).Buffer,g=b(17),u=b(18);u.inherits=b(12);var R=b(19),I=void 0;R&&R.debuglog?I=R.debuglog("stream"):I=function(){};var k=b(20),L;u.inherits(z,p);function A(_,E,Y){if(typeof _.prependListener=="function")return _.prependListener(E,Y);!_._events||!_._events[E]?_.on(E,Y):x(_._events[E])?_._events[E].unshift(Y):_._events[E]=[Y,_._events[E]]}function Q(_,E){N=N||b(21),_=_||{},this.objectMode=!!_.objectMode,E instanceof N&&(this.objectMode=this.objectMode||!!_.readableObjectMode);var Y=_.highWaterMark,et=this.objectMode?16:16*1024;this.highWaterMark=Y||Y===0?Y:et,this.highWaterMark=~~this.highWaterMark,this.buffer=new k,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=_.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,_.encoding&&(L||(L=b(24).StringDecoder),this.decoder=new L(_.encoding),this.encoding=_.encoding)}function z(_){if(N=N||b(21),!(this instanceof z))return new z(_);this._readableState=new Q(_,this),this.readable=!0,_&&typeof _.read=="function"&&(this._read=_.read),p.call(this)}z.prototype.push=function(_,E){var Y=this._readableState;return!Y.objectMode&&typeof _=="string"&&(E=E||Y.defaultEncoding,E!==Y.encoding&&(_=g.from(_,E),E="")),W(this,Y,_,E,!1)},z.prototype.unshift=function(_){var E=this._readableState;return W(this,E,_,"",!0)},z.prototype.isPaused=function(){return this._readableState.flowing===!1};function W(_,E,Y,et,pt){var St=M(E,Y);if(St)_.emit("error",St);else if(Y===null)E.reading=!1,$(_,E);else if(E.objectMode||Y&&Y.length>0)if(E.ended&&!pt){var K=new Error("stream.push() after EOF");_.emit("error",K)}else if(E.endEmitted&&pt){var Jt=new Error("stream.unshift() after end event");_.emit("error",Jt)}else{var gt;E.decoder&&!pt&&!et&&(Y=E.decoder.write(Y),gt=!E.objectMode&&Y.length===0),pt||(E.reading=!1),gt||(E.flowing&&E.length===0&&!E.sync?(_.emit("data",Y),_.read(0)):(E.length+=E.objectMode?1:Y.length,pt?E.buffer.unshift(Y):E.buffer.push(Y),E.needReadable&&st(_))),vt(_,E)}else pt||(E.reading=!1);return _t(E)}function _t(_){return!_.ended&&(_.needReadable||_.length<_.highWaterMark||_.length===0)}z.prototype.setEncoding=function(_){return L||(L=b(24).StringDecoder),this._readableState.decoder=new L(_),this._readableState.encoding=_,this};var q=8388608;function kt(_){return _>=q?_=q:(_--,_|=_>>>1,_|=_>>>2,_|=_>>>4,_|=_>>>8,_|=_>>>16,_++),_}function dt(_,E){return _<=0||E.length===0&&E.ended?0:E.objectMode?1:_!==_?E.flowing&&E.length?E.buffer.head.data.length:E.length:(_>E.highWaterMark&&(E.highWaterMark=kt(_)),_<=E.length?_:E.ended?E.length:(E.needReadable=!0,0))}z.prototype.read=function(_){I("read",_),_=parseInt(_,10);var E=this._readableState,Y=_;if(_!==0&&(E.emittedReadable=!1),_===0&&E.needReadable&&(E.length>=E.highWaterMark||E.ended))return I("read: emitReadable",E.length,E.ended),E.length===0&&E.ended?Et(this):st(this),null;if(_=dt(_,E),_===0&&E.ended)return E.length===0&&Et(this),null;var et=E.needReadable;I("need readable",et),(E.length===0||E.length-_<E.highWaterMark)&&(et=!0,I("length less than watermark",et)),E.ended||E.reading?(et=!1,I("reading or ended",et)):et&&(I("do read"),E.reading=!0,E.sync=!0,E.length===0&&(E.needReadable=!0),this._read(E.highWaterMark),E.sync=!1,E.reading||(_=dt(Y,E)));var pt;return _>0?pt=G(_,E):pt=null,pt===null?(E.needReadable=!0,_=0):E.length-=_,E.length===0&&(E.ended||(E.needReadable=!0),Y!==_&&E.ended&&Et(this)),pt!==null&&this.emit("data",pt),pt};function M(_,E){var Y=null;return!l.isBuffer(E)&&typeof E!="string"&&E!==null&&E!==void 0&&!_.objectMode&&(Y=new TypeError("Invalid non-string/buffer chunk")),Y}function $(_,E){if(!E.ended){if(E.decoder){var Y=E.decoder.end();Y&&Y.length&&(E.buffer.push(Y),E.length+=E.objectMode?1:Y.length)}E.ended=!0,st(_)}}function st(_){var E=_._readableState;E.needReadable=!1,E.emittedReadable||(I("emitReadable",E.flowing),E.emittedReadable=!0,E.sync?j(Rt,_):Rt(_))}function Rt(_){I("emit readable"),_.emit("readable"),C(_)}function vt(_,E){E.readingMore||(E.readingMore=!0,j(Dt,_,E))}function Dt(_,E){for(var Y=E.length;!E.reading&&!E.flowing&&!E.ended&&E.length<E.highWaterMark&&(I("maybeReadMore read 0"),_.read(0),Y!==E.length);)Y=E.length;E.readingMore=!1}z.prototype._read=function(_){this.emit("error",new Error("_read() is not implemented"))},z.prototype.pipe=function(_,E){var Y=this,et=this._readableState;switch(et.pipesCount){case 0:et.pipes=_;break;case 1:et.pipes=[et.pipes,_];break;default:et.pipes.push(_);break}et.pipesCount+=1,I("pipe count=%d opts=%j",et.pipesCount,E);var pt=(!E||E.end!==!1)&&_!==v.stdout&&_!==v.stderr,St=pt?Jt:ae;et.endEmitted?j(St):Y.once("end",St),_.on("unpipe",K);function K(H){I("onunpipe"),H===Y&&ae()}function Jt(){I("onend"),_.end()}var gt=bt(Y);_.on("drain",gt);var ne=!1;function ae(){I("cleanup"),_.removeListener("close",S),_.removeListener("finish",D),_.removeListener("drain",gt),_.removeListener("error",c),_.removeListener("unpipe",K),Y.removeListener("end",Jt),Y.removeListener("end",ae),Y.removeListener("data",f),ne=!0,et.awaitDrain&&(!_._writableState||_._writableState.needDrain)&&gt()}var w=!1;Y.on("data",f);function f(H){I("ondata"),w=!1;var xt=_.write(H);xt===!1&&!w&&((et.pipesCount===1&&et.pipes===_||et.pipesCount>1&&Tt(et.pipes,_)!==-1)&&!ne&&(I("false write response, pause",Y._readableState.awaitDrain),Y._readableState.awaitDrain++,w=!0),Y.pause())}function c(H){I("onerror",H),X(),_.removeListener("error",c),m(_,"error")===0&&_.emit("error",H)}A(_,"error",c);function S(){_.removeListener("finish",D),X()}_.once("close",S);function D(){I("onfinish"),_.removeListener("close",S),X()}_.once("finish",D);function X(){I("unpipe"),Y.unpipe(_)}return _.emit("pipe",Y),et.flowing||(I("pipe resume"),Y.resume()),_};function bt(_){return function(){var E=_._readableState;I("pipeOnDrain",E.awaitDrain),E.awaitDrain&&E.awaitDrain--,E.awaitDrain===0&&m(_,"data")&&(E.flowing=!0,C(_))}}z.prototype.unpipe=function(_){var E=this._readableState;if(E.pipesCount===0)return this;if(E.pipesCount===1)return _&&_!==E.pipes?this:(_||(_=E.pipes),E.pipes=null,E.pipesCount=0,E.flowing=!1,_&&_.emit("unpipe",this),this);if(!_){var Y=E.pipes,et=E.pipesCount;E.pipes=null,E.pipesCount=0,E.flowing=!1;for(var pt=0;pt<et;pt++)Y[pt].emit("unpipe",this);return this}var St=Tt(E.pipes,_);return St===-1?this:(E.pipes.splice(St,1),E.pipesCount-=1,E.pipesCount===1&&(E.pipes=E.pipes[0]),_.emit("unpipe",this),this)},z.prototype.on=function(_,E){var Y=p.prototype.on.call(this,_,E);if(_==="data")this._readableState.flowing!==!1&&this.resume();else if(_==="readable"){var et=this._readableState;!et.endEmitted&&!et.readableListening&&(et.readableListening=et.needReadable=!0,et.emittedReadable=!1,et.reading?et.length&&st(this):j(wt,this))}return Y},z.prototype.addListener=z.prototype.on;function wt(_){I("readable nexttick read 0"),_.read(0)}z.prototype.resume=function(){var _=this._readableState;return _.flowing||(I("resume"),_.flowing=!0,Yt(this,_)),this};function Yt(_,E){E.resumeScheduled||(E.resumeScheduled=!0,j(P,_,E))}function P(_,E){E.reading||(I("resume read 0"),_.read(0)),E.resumeScheduled=!1,E.awaitDrain=0,_.emit("resume"),C(_),E.flowing&&!E.reading&&_.read(0)}z.prototype.pause=function(){return I("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(I("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function C(_){var E=_._readableState;for(I("flow",E.flowing);E.flowing&&_.read()!==null;);}z.prototype.wrap=function(_){var E=this._readableState,Y=!1,et=this;_.on("end",function(){if(I("wrapped end"),E.decoder&&!E.ended){var K=E.decoder.end();K&&K.length&&et.push(K)}et.push(null)}),_.on("data",function(K){if(I("wrapped data"),E.decoder&&(K=E.decoder.write(K)),!(E.objectMode&&K==null)&&!(!E.objectMode&&(!K||!K.length))){var Jt=et.push(K);Jt||(Y=!0,_.pause())}});for(var pt in _)this[pt]===void 0&&typeof _[pt]=="function"&&(this[pt]=function(K){return function(){return _[K].apply(_,arguments)}}(pt));var St=["error","close","destroy","pause","resume"];return jt(St,function(K){_.on(K,et.emit.bind(et,K))}),et._read=function(K){I("wrapped _read",K),Y&&(Y=!1,_.resume())},et},z._fromList=G;function G(_,E){if(E.length===0)return null;var Y;return E.objectMode?Y=E.buffer.shift():!_||_>=E.length?(E.decoder?Y=E.buffer.join(""):E.buffer.length===1?Y=E.buffer.head.data:Y=E.buffer.concat(E.length),E.buffer.clear()):Y=lt(_,E.buffer,E.decoder),Y}function lt(_,E,Y){var et;return _<E.head.data.length?(et=E.head.data.slice(0,_),E.head.data=E.head.data.slice(_)):_===E.head.data.length?et=E.shift():et=Y?It(_,E):ut(_,E),et}function It(_,E){var Y=E.head,et=1,pt=Y.data;for(_-=pt.length;Y=Y.next;){var St=Y.data,K=_>St.length?St.length:_;if(K===St.length?pt+=St:pt+=St.slice(0,_),_-=K,_===0){K===St.length?(++et,Y.next?E.head=Y.next:E.head=E.tail=null):(E.head=Y,Y.data=St.slice(K));break}++et}return E.length-=et,pt}function ut(_,E){var Y=g.allocUnsafe(_),et=E.head,pt=1;for(et.data.copy(Y),_-=et.data.length;et=et.next;){var St=et.data,K=_>St.length?St.length:_;if(St.copy(Y,Y.length-_,0,K),_-=K,_===0){K===St.length?(++pt,et.next?E.head=et.next:E.head=E.tail=null):(E.head=et,et.data=St.slice(K));break}++pt}return E.length-=pt,Y}function Et(_){var E=_._readableState;if(E.length>0)throw new Error('"endReadable()" called on non-empty stream');E.endEmitted||(E.ended=!0,j(Zt,E,_))}function Zt(_,E){!_.endEmitted&&_.length===0&&(_.endEmitted=!0,E.readable=!1,E.emit("end"))}function jt(_,E){for(var Y=0,et=_.length;Y<et;Y++)E(_[Y],Y)}function Tt(_,E){for(var Y=0,et=_.length;Y<et;Y++)if(_[Y]===E)return Y;return-1}}).call(T,b(6))},function(rt,T,b){(function(v){!v.version||v.version.indexOf("v0.")===0||v.version.indexOf("v1.")===0&&v.version.indexOf("v1.8.")!==0?rt.exports=j:rt.exports=v.nextTick;function j(x,N,m,p){if(typeof x!="function")throw new TypeError('"callback" argument must be a function');var l=arguments.length,g,u;switch(l){case 0:case 1:return v.nextTick(x);case 2:return v.nextTick(function(){x.call(null,N)});case 3:return v.nextTick(function(){x.call(null,N,m)});case 4:return v.nextTick(function(){x.call(null,N,m,p)});default:for(g=new Array(l-1),u=0;u<g.length;)g[u++]=arguments[u];return v.nextTick(function(){x.apply(null,g)})}}}).call(T,b(6))},function(rt,T){var b={}.toString;rt.exports=Array.isArray||function(v){return b.call(v)=="[object Array]"}},function(rt,T,b){(function(v){var j=b(2),x=j.Buffer,N=j.SlowBuffer,m=j.kMaxLength||2147483647;T.alloc=function(l,g,u){if(typeof x.alloc=="function")return x.alloc(l,g,u);if(typeof u=="number")throw new TypeError("encoding must not be number");if(typeof l!="number")throw new TypeError("size must be a number");if(l>m)throw new RangeError("size is too large");var R=u,I=g;I===void 0&&(R=void 0,I=0);var k=new x(l);if(typeof I=="string")for(var L=new x(I,R),A=L.length,Q=-1;++Q<l;)k[Q]=L[Q%A];else k.fill(I);return k},T.allocUnsafe=function(l){if(typeof x.allocUnsafe=="function")return x.allocUnsafe(l);if(typeof l!="number")throw new TypeError("size must be a number");if(l>m)throw new RangeError("size is too large");return new x(l)},T.from=function(l,g,u){if(typeof x.from=="function"&&(!v.Uint8Array||Uint8Array.from!==x.from))return x.from(l,g,u);if(typeof l=="number")throw new TypeError('"value" argument must not be a number');if(typeof l=="string")return new x(l,g);if(typeof ArrayBuffer!="undefined"&&l instanceof ArrayBuffer){var R=g;if(arguments.length===1)return new x(l);typeof R=="undefined"&&(R=0);var I=u;if(typeof I=="undefined"&&(I=l.byteLength-R),R>=l.byteLength)throw new RangeError("'offset' is out of bounds");if(I>l.byteLength-R)throw new RangeError("'length' is out of bounds");return new x(l.slice(R,R+I))}if(x.isBuffer(l)){var k=new x(l.length);return l.copy(k,0,0,l.length),k}if(l){if(Array.isArray(l)||typeof ArrayBuffer!="undefined"&&l.buffer instanceof ArrayBuffer||"length"in l)return new x(l);if(l.type==="Buffer"&&Array.isArray(l.data))return new x(l.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")},T.allocUnsafeSlow=function(l){if(typeof x.allocUnsafeSlow=="function")return x.allocUnsafeSlow(l);if(typeof l!="number")throw new TypeError("size must be a number");if(l>=m)throw new RangeError("size is too large");return new N(l)}}).call(T,function(){return this}())},function(rt,T,b){(function(v){function j(W){return Array.isArray?Array.isArray(W):z(W)==="[object Array]"}T.isArray=j;function x(W){return typeof W=="boolean"}T.isBoolean=x;function N(W){return W===null}T.isNull=N;function m(W){return W==null}T.isNullOrUndefined=m;function p(W){return typeof W=="number"}T.isNumber=p;function l(W){return typeof W=="string"}T.isString=l;function g(W){return typeof W=="symbol"}T.isSymbol=g;function u(W){return W===void 0}T.isUndefined=u;function R(W){return z(W)==="[object RegExp]"}T.isRegExp=R;function I(W){return typeof W=="object"&&W!==null}T.isObject=I;function k(W){return z(W)==="[object Date]"}T.isDate=k;function L(W){return z(W)==="[object Error]"||W instanceof Error}T.isError=L;function A(W){return typeof W=="function"}T.isFunction=A;function Q(W){return W===null||typeof W=="boolean"||typeof W=="number"||typeof W=="string"||typeof W=="symbol"||typeof W=="undefined"}T.isPrimitive=Q,T.isBuffer=v.isBuffer;function z(W){return Object.prototype.toString.call(W)}}).call(T,b(1))},function(rt,T){},function(rt,T,b){b(2).Buffer;var v=b(17);rt.exports=j;function j(){this.head=null,this.tail=null,this.length=0}j.prototype.push=function(x){var N={data:x,next:null};this.length>0?this.tail.next=N:this.head=N,this.tail=N,++this.length},j.prototype.unshift=function(x){var N={data:x,next:this.head};this.length===0&&(this.tail=N),this.head=N,++this.length},j.prototype.shift=function(){if(this.length!==0){var x=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,x}},j.prototype.clear=function(){this.head=this.tail=null,this.length=0},j.prototype.join=function(x){if(this.length===0)return"";for(var N=this.head,m=""+N.data;N=N.next;)m+=x+N.data;return m},j.prototype.concat=function(x){if(this.length===0)return v.alloc(0);if(this.length===1)return this.head.data;for(var N=v.allocUnsafe(x>>>0),m=this.head,p=0;m;)m.data.copy(N,p),p+=m.data.length,m=m.next;return N}},function(rt,T,b){var v=Object.keys||function(k){var L=[];for(var A in k)L.push(A);return L};rt.exports=u;var j=b(15),x=b(18);x.inherits=b(12);var N=b(14),m=b(22);x.inherits(u,N);for(var p=v(m.prototype),l=0;l<p.length;l++){var g=p[l];u.prototype[g]||(u.prototype[g]=m.prototype[g])}function u(k){if(!(this instanceof u))return new u(k);N.call(this,k),m.call(this,k),k&&k.readable===!1&&(this.readable=!1),k&&k.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,k&&k.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",R)}function R(){this.allowHalfOpen||this._writableState.ended||j(I,this)}function I(k){k.end()}},function(rt,T,b){(function(v){rt.exports=A;var j=b(15),x=!v.browser&&["v0.10","v0.9."].indexOf(v.version.slice(0,5))>-1?setImmediate:j,N;A.WritableState=k;var m=b(18);m.inherits=b(12);var p={deprecate:b(23)},l;(function(){try{l=b(11)}catch(P){}finally{l||(l=b(8).EventEmitter)}})();var g=b(2).Buffer,u=b(17);m.inherits(A,l);function R(){}function I(P,C,G){this.chunk=P,this.encoding=C,this.callback=G,this.next=null}function k(P,C){N=N||b(21),P=P||{},this.objectMode=!!P.objectMode,C instanceof N&&(this.objectMode=this.objectMode||!!P.writableObjectMode);var G=P.highWaterMark,lt=this.objectMode?16:16*1024;this.highWaterMark=G||G===0?G:lt,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var It=P.decodeStrings===!1;this.decodeStrings=!It,this.defaultEncoding=P.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(ut){M(C,ut)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new Yt(this)}k.prototype.getBuffer=function(){for(var C=this.bufferedRequest,G=[];C;)G.push(C),C=C.next;return G},function(){try{Object.defineProperty(k.prototype,"buffer",{get:p.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")})}catch(P){}}();var L;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(L=Function.prototype[Symbol.hasInstance],Object.defineProperty(A,Symbol.hasInstance,{value:function(P){return L.call(this,P)?!0:P&&P._writableState instanceof k}})):L=function(P){return P instanceof this};function A(P){if(N=N||b(21),!L.call(A,this)&&!(this instanceof N))return new A(P);this._writableState=new k(P,this),this.writable=!0,P&&(typeof P.write=="function"&&(this._write=P.write),typeof P.writev=="function"&&(this._writev=P.writev)),l.call(this)}A.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function Q(P,C){var G=new Error("write after end");P.emit("error",G),j(C,G)}function z(P,C,G,lt){var It=!0,ut=!1;return G===null?ut=new TypeError("May not write null values to stream"):typeof G!="string"&&G!==void 0&&!C.objectMode&&(ut=new TypeError("Invalid non-string/buffer chunk")),ut&&(P.emit("error",ut),j(lt,ut),It=!1),It}A.prototype.write=function(P,C,G){var lt=this._writableState,It=!1,ut=g.isBuffer(P);return typeof C=="function"&&(G=C,C=null),ut?C="buffer":C||(C=lt.defaultEncoding),typeof G!="function"&&(G=R),lt.ended?Q(this,G):(ut||z(this,lt,P,G))&&(lt.pendingcb++,It=_t(this,lt,ut,P,C,G)),It},A.prototype.cork=function(){var P=this._writableState;P.corked++},A.prototype.uncork=function(){var P=this._writableState;P.corked&&(P.corked--,!P.writing&&!P.corked&&!P.finished&&!P.bufferProcessing&&P.bufferedRequest&&Rt(this,P))},A.prototype.setDefaultEncoding=function(C){if(typeof C=="string"&&(C=C.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((C+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+C);return this._writableState.defaultEncoding=C,this};function W(P,C,G){return!P.objectMode&&P.decodeStrings!==!1&&typeof C=="string"&&(C=u.from(C,G)),C}function _t(P,C,G,lt,It,ut){G||(lt=W(C,lt,It),g.isBuffer(lt)&&(It="buffer"));var Et=C.objectMode?1:lt.length;C.length+=Et;var Zt=C.length<C.highWaterMark;if(Zt||(C.needDrain=!0),C.writing||C.corked){var jt=C.lastBufferedRequest;C.lastBufferedRequest=new I(lt,It,ut),jt?jt.next=C.lastBufferedRequest:C.bufferedRequest=C.lastBufferedRequest,C.bufferedRequestCount+=1}else q(P,C,!1,Et,lt,It,ut);return Zt}function q(P,C,G,lt,It,ut,Et){C.writelen=lt,C.writecb=Et,C.writing=!0,C.sync=!0,G?P._writev(It,C.onwrite):P._write(It,ut,C.onwrite),C.sync=!1}function kt(P,C,G,lt,It){--C.pendingcb,G?j(It,lt):It(lt),P._writableState.errorEmitted=!0,P.emit("error",lt)}function dt(P){P.writing=!1,P.writecb=null,P.length-=P.writelen,P.writelen=0}function M(P,C){var G=P._writableState,lt=G.sync,It=G.writecb;if(dt(G),C)kt(P,G,lt,C,It);else{var ut=vt(G);!ut&&!G.corked&&!G.bufferProcessing&&G.bufferedRequest&&Rt(P,G),lt?x($,P,G,ut,It):$(P,G,ut,It)}}function $(P,C,G,lt){G||st(P,C),C.pendingcb--,lt(),bt(P,C)}function st(P,C){C.length===0&&C.needDrain&&(C.needDrain=!1,P.emit("drain"))}function Rt(P,C){C.bufferProcessing=!0;var G=C.bufferedRequest;if(P._writev&&G&&G.next){var lt=C.bufferedRequestCount,It=new Array(lt),ut=C.corkedRequestsFree;ut.entry=G;for(var Et=0;G;)It[Et]=G,G=G.next,Et+=1;q(P,C,!0,C.length,It,"",ut.finish),C.pendingcb++,C.lastBufferedRequest=null,ut.next?(C.corkedRequestsFree=ut.next,ut.next=null):C.corkedRequestsFree=new Yt(C)}else{for(;G;){var Zt=G.chunk,jt=G.encoding,Tt=G.callback,_=C.objectMode?1:Zt.length;if(q(P,C,!1,_,Zt,jt,Tt),G=G.next,C.writing)break}G===null&&(C.lastBufferedRequest=null)}C.bufferedRequestCount=0,C.bufferedRequest=G,C.bufferProcessing=!1}A.prototype._write=function(P,C,G){G(new Error("_write() is not implemented"))},A.prototype._writev=null,A.prototype.end=function(P,C,G){var lt=this._writableState;typeof P=="function"?(G=P,P=null,C=null):typeof C=="function"&&(G=C,C=null),P!=null&&this.write(P,C),lt.corked&&(lt.corked=1,this.uncork()),!lt.ending&&!lt.finished&&wt(this,lt,G)};function vt(P){return P.ending&&P.length===0&&P.bufferedRequest===null&&!P.finished&&!P.writing}function Dt(P,C){C.prefinished||(C.prefinished=!0,P.emit("prefinish"))}function bt(P,C){var G=vt(C);return G&&(C.pendingcb===0?(Dt(P,C),C.finished=!0,P.emit("finish")):Dt(P,C)),G}function wt(P,C,G){C.ending=!0,bt(P,C),G&&(C.finished?j(G):P.once("finish",G)),C.ended=!0,P.writable=!1}function Yt(P){var C=this;this.next=null,this.entry=null,this.finish=function(G){var lt=C.entry;for(C.entry=null;lt;){var It=lt.callback;P.pendingcb--,It(G),lt=lt.next}P.corkedRequestsFree?P.corkedRequestsFree.next=C:P.corkedRequestsFree=C}}}).call(T,b(6))},function(rt,T){(function(b){rt.exports=v;function v(x,N){if(j("noDeprecation"))return x;var m=!1;function p(){if(!m){if(j("throwDeprecation"))throw new Error(N);j("traceDeprecation")?console.trace(N):console.warn(N),m=!0}return x.apply(this,arguments)}return p}function j(x){try{if(!b.localStorage)return!1}catch(m){return!1}var N=b.localStorage[x];return N==null?!1:String(N).toLowerCase()==="true"}}).call(T,function(){return this}())},function(rt,T,b){var v=b(2).Buffer,j=v.isEncoding||function(g){switch(g&&g.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function x(g){if(g&&!j(g))throw new Error("Unknown encoding: "+g)}var N=T.StringDecoder=function(g){switch(this.encoding=(g||"utf8").toLowerCase().replace(/[-_]/,""),x(g),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=p;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=l;break;default:this.write=m;return}this.charBuffer=new v(6),this.charReceived=0,this.charLength=0};N.prototype.write=function(g){for(var u="";this.charLength;){var R=g.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:g.length;if(g.copy(this.charBuffer,this.charReceived,0,R),this.charReceived+=R,this.charReceived<this.charLength)return"";g=g.slice(R,g.length),u=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var k=u.charCodeAt(u.length-1);if(k>=55296&&k<=56319){this.charLength+=this.surrogateSize,u="";continue}if(this.charReceived=this.charLength=0,g.length===0)return u;break}this.detectIncompleteChar(g);var I=g.length;this.charLength&&(g.copy(this.charBuffer,0,g.length-this.charReceived,I),I-=this.charReceived),u+=g.toString(this.encoding,0,I);var I=u.length-1,k=u.charCodeAt(I);if(k>=55296&&k<=56319){var L=this.surrogateSize;return this.charLength+=L,this.charReceived+=L,this.charBuffer.copy(this.charBuffer,L,0,L),g.copy(this.charBuffer,0,0,L),u.substring(0,I)}return u},N.prototype.detectIncompleteChar=function(g){for(var u=g.length>=3?3:g.length;u>0;u--){var R=g[g.length-u];if(u==1&&R>>5==6){this.charLength=2;break}if(u<=2&&R>>4==14){this.charLength=3;break}if(u<=3&&R>>3==30){this.charLength=4;break}}this.charReceived=u},N.prototype.end=function(g){var u="";if(g&&g.length&&(u=this.write(g)),this.charReceived){var R=this.charReceived,I=this.charBuffer,k=this.encoding;u+=I.slice(0,R).toString(k)}return u};function m(g){return g.toString(this.encoding)}function p(g){this.charReceived=g.length%2,this.charLength=this.charReceived?2:0}function l(g){this.charReceived=g.length%3,this.charLength=this.charReceived?3:0}},function(rt,T,b){rt.exports=m;var v=b(21),j=b(18);j.inherits=b(12),j.inherits(m,v);function x(l){this.afterTransform=function(g,u){return N(l,g,u)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function N(l,g,u){var R=l._transformState;R.transforming=!1;var I=R.writecb;if(!I)return l.emit("error",new Error("no writecb in Transform class"));R.writechunk=null,R.writecb=null,u!=null&&l.push(u),I(g);var k=l._readableState;k.reading=!1,(k.needReadable||k.length<k.highWaterMark)&&l._read(k.highWaterMark)}function m(l){if(!(this instanceof m))return new m(l);v.call(this,l),this._transformState=new x(this);var g=this;this._readableState.needReadable=!0,this._readableState.sync=!1,l&&(typeof l.transform=="function"&&(this._transform=l.transform),typeof l.flush=="function"&&(this._flush=l.flush)),this.once("prefinish",function(){typeof this._flush=="function"?this._flush(function(u,R){p(g,u,R)}):p(g)})}m.prototype.push=function(l,g){return this._transformState.needTransform=!1,v.prototype.push.call(this,l,g)},m.prototype._transform=function(l,g,u){throw new Error("_transform() is not implemented")},m.prototype._write=function(l,g,u){var R=this._transformState;if(R.writecb=u,R.writechunk=l,R.writeencoding=g,!R.transforming){var I=this._readableState;(R.needTransform||I.needReadable||I.length<I.highWaterMark)&&this._read(I.highWaterMark)}},m.prototype._read=function(l){var g=this._transformState;g.writechunk!==null&&g.writecb&&!g.transforming?(g.transforming=!0,this._transform(g.writechunk,g.writeencoding,g.afterTransform)):g.needTransform=!0};function p(l,g,u){if(g)return l.emit("error",g);u!=null&&l.push(u);var R=l._writableState,I=l._transformState;if(R.length)throw new Error("Calling transform done when ws.length != 0");if(I.transforming)throw new Error("Calling transform done when still transforming");return l.push(null)}},function(rt,T,b){rt.exports=x;var v=b(25),j=b(18);j.inherits=b(12),j.inherits(x,v);function x(N){if(!(this instanceof x))return new x(N);v.call(this,N)}x.prototype._transform=function(N,m,p){p(null,N)}},function(rt,T,b){rt.exports=b(22)},function(rt,T,b){rt.exports=b(21)},function(rt,T,b){rt.exports=b(25)},function(rt,T,b){rt.exports=b(26)},function(rt,T,b){var v=b(32),j=b(33),x=b(38),N=b(39),m=b(40),p=b(41),l=b(42),g=Object.prototype.toString;function u(k){if(!(this instanceof u))return new u(k);this.options=j.assign({chunkSize:16384,windowBits:0,to:""},k||{});var L=this.options;L.raw&&L.windowBits>=0&&L.windowBits<16&&(L.windowBits=-L.windowBits,L.windowBits===0&&(L.windowBits=-15)),L.windowBits>=0&&L.windowBits<16&&!(k&&k.windowBits)&&(L.windowBits+=32),L.windowBits>15&&L.windowBits<48&&(L.windowBits&15)==0&&(L.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new p,this.strm.avail_out=0;var A=v.inflateInit2(this.strm,L.windowBits);if(A!==N.Z_OK)throw new Error(m[A]);this.header=new l,v.inflateGetHeader(this.strm,this.header)}u.prototype.push=function(k,L){var A=this.strm,Q=this.options.chunkSize,z=this.options.dictionary,W,_t,q,kt,dt,M,$=!1;if(this.ended)return!1;_t=L===~~L?L:L===!0?N.Z_FINISH:N.Z_NO_FLUSH,typeof k=="string"?A.input=x.binstring2buf(k):g.call(k)==="[object ArrayBuffer]"?A.input=new Uint8Array(k):A.input=k,A.next_in=0,A.avail_in=A.input.length;do{if(A.avail_out===0&&(A.output=new j.Buf8(Q),A.next_out=0,A.avail_out=Q),W=v.inflate(A,N.Z_NO_FLUSH),W===N.Z_NEED_DICT&&z&&(typeof z=="string"?M=x.string2buf(z):g.call(z)==="[object ArrayBuffer]"?M=new Uint8Array(z):M=z,W=v.inflateSetDictionary(this.strm,M)),W===N.Z_BUF_ERROR&&$===!0&&(W=N.Z_OK,$=!1),W!==N.Z_STREAM_END&&W!==N.Z_OK)return this.onEnd(W),this.ended=!0,!1;A.next_out&&(A.avail_out===0||W===N.Z_STREAM_END||A.avail_in===0&&(_t===N.Z_FINISH||_t===N.Z_SYNC_FLUSH))&&(this.options.to==="string"?(q=x.utf8border(A.output,A.next_out),kt=A.next_out-q,dt=x.buf2string(A.output,q),A.next_out=kt,A.avail_out=Q-kt,kt&&j.arraySet(A.output,A.output,q,kt,0),this.onData(dt)):this.onData(j.shrinkBuf(A.output,A.next_out))),A.avail_in===0&&A.avail_out===0&&($=!0)}while((A.avail_in>0||A.avail_out===0)&&W!==N.Z_STREAM_END);return W===N.Z_STREAM_END&&(_t=N.Z_FINISH),_t===N.Z_FINISH?(W=v.inflateEnd(this.strm),this.onEnd(W),this.ended=!0,W===N.Z_OK):(_t===N.Z_SYNC_FLUSH&&(this.onEnd(N.Z_OK),A.avail_out=0),!0)},u.prototype.onData=function(k){this.chunks.push(k)},u.prototype.onEnd=function(k){k===N.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=j.flattenChunks(this.chunks)),this.chunks=[],this.err=k,this.msg=this.strm.msg};function R(k,L){var A=new u(L);if(A.push(k,!0),A.err)throw A.msg||m[A.err];return A.result}function I(k,L){return L=L||{},L.raw=!0,R(k,L)}T.Inflate=u,T.inflate=R,T.inflateRaw=I,T.ungzip=R},function(rt,T,b){var v=b(33),j=b(34),x=b(35),N=b(36),m=b(37),p=0,l=1,g=2,u=4,R=5,I=6,k=0,L=1,A=2,Q=-2,z=-3,W=-4,_t=-5,q=8,kt=1,dt=2,M=3,$=4,st=5,Rt=6,vt=7,Dt=8,bt=9,wt=10,Yt=11,P=12,C=13,G=14,lt=15,It=16,ut=17,Et=18,Zt=19,jt=20,Tt=21,_=22,E=23,Y=24,et=25,pt=26,St=27,K=28,Jt=29,gt=30,ne=31,ae=32,w=852,f=592,c=15,S=c;function D(U){return(U>>>24&255)+(U>>>8&65280)+((U&65280)<<8)+((U&255)<<24)}function X(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new v.Buf16(320),this.work=new v.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function H(U){var it;return!U||!U.state?Q:(it=U.state,U.total_in=U.total_out=it.total=0,U.msg="",it.wrap&&(U.adler=it.wrap&1),it.mode=kt,it.last=0,it.havedict=0,it.dmax=32768,it.head=null,it.hold=0,it.bits=0,it.lencode=it.lendyn=new v.Buf32(w),it.distcode=it.distdyn=new v.Buf32(f),it.sane=1,it.back=-1,k)}function xt(U){var it;return!U||!U.state?Q:(it=U.state,it.wsize=0,it.whave=0,it.wnext=0,H(U))}function Lt(U,it){var y,ft;return!U||!U.state||(ft=U.state,it<0?(y=0,it=-it):(y=(it>>4)+1,it<48&&(it&=15)),it&&(it<8||it>15))?Q:(ft.window!==null&&ft.wbits!==it&&(ft.window=null),ft.wrap=y,ft.wbits=it,xt(U))}function At(U,it){var y,ft;return U?(ft=new X,U.state=ft,ft.window=null,y=Lt(U,it),y!==k&&(U.state=null),y):Q}function Qt(U){return At(U,S)}var Ct=!0,de,be;function Xe(U){if(Ct){var it;for(de=new v.Buf32(512),be=new v.Buf32(32),it=0;it<144;)U.lens[it++]=8;for(;it<256;)U.lens[it++]=9;for(;it<280;)U.lens[it++]=7;for(;it<288;)U.lens[it++]=8;for(m(l,U.lens,0,288,de,0,U.work,{bits:9}),it=0;it<32;)U.lens[it++]=5;m(g,U.lens,0,32,be,0,U.work,{bits:5}),Ct=!1}U.lencode=de,U.lenbits=9,U.distcode=be,U.distbits=5}function dr(U,it,y,ft){var Mt,nt=U.state;return nt.window===null&&(nt.wsize=1<<nt.wbits,nt.wnext=0,nt.whave=0,nt.window=new v.Buf8(nt.wsize)),ft>=nt.wsize?(v.arraySet(nt.window,it,y-nt.wsize,nt.wsize,0),nt.wnext=0,nt.whave=nt.wsize):(Mt=nt.wsize-nt.wnext,Mt>ft&&(Mt=ft),v.arraySet(nt.window,it,y-ft,Mt,nt.wnext),ft-=Mt,ft?(v.arraySet(nt.window,it,y-ft,ft,0),nt.wnext=ft,nt.whave=nt.wsize):(nt.wnext+=Mt,nt.wnext===nt.wsize&&(nt.wnext=0),nt.whave<nt.wsize&&(nt.whave+=Mt))),0}function Me(U,it){var y,ft,Mt,nt,ue,at,qt,V,Z,Ye,Pt,ht,Pe,Re,Bt=0,Nt,ee,se,re,qe,Ue,Vt,fe,te=new v.Buf8(4),_e,we,yr=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!U||!U.state||!U.output||!U.input&&U.avail_in!==0)return Q;y=U.state,y.mode===P&&(y.mode=C),ue=U.next_out,Mt=U.output,qt=U.avail_out,nt=U.next_in,ft=U.input,at=U.avail_in,V=y.hold,Z=y.bits,Ye=at,Pt=qt,fe=k;t:for(;;)switch(y.mode){case kt:if(y.wrap===0){y.mode=C;break}for(;Z<16;){if(at===0)break t;at--,V+=ft[nt++]<<Z,Z+=8}if(y.wrap&2&&V===35615){y.check=0,te[0]=V&255,te[1]=V>>>8&255,y.check=x(y.check,te,2,0),V=0,Z=0,y.mode=dt;break}if(y.flags=0,y.head&&(y.head.done=!1),!(y.wrap&1)||(((V&255)<<8)+(V>>8))%31){U.msg="incorrect header check",y.mode=gt;break}if((V&15)!==q){U.msg="unknown compression method",y.mode=gt;break}if(V>>>=4,Z-=4,Vt=(V&15)+8,y.wbits===0)y.wbits=Vt;else if(Vt>y.wbits){U.msg="invalid window size",y.mode=gt;break}y.dmax=1<<Vt,U.adler=y.check=1,y.mode=V&512?wt:P,V=0,Z=0;break;case dt:for(;Z<16;){if(at===0)break t;at--,V+=ft[nt++]<<Z,Z+=8}if(y.flags=V,(y.flags&255)!==q){U.msg="unknown compression method",y.mode=gt;break}if(y.flags&57344){U.msg="unknown header flags set",y.mode=gt;break}y.head&&(y.head.text=V>>8&1),y.flags&512&&(te[0]=V&255,te[1]=V>>>8&255,y.check=x(y.check,te,2,0)),V=0,Z=0,y.mode=M;case M:for(;Z<32;){if(at===0)break t;at--,V+=ft[nt++]<<Z,Z+=8}y.head&&(y.head.time=V),y.flags&512&&(te[0]=V&255,te[1]=V>>>8&255,te[2]=V>>>16&255,te[3]=V>>>24&255,y.check=x(y.check,te,4,0)),V=0,Z=0,y.mode=$;case $:for(;Z<16;){if(at===0)break t;at--,V+=ft[nt++]<<Z,Z+=8}y.head&&(y.head.xflags=V&255,y.head.os=V>>8),y.flags&512&&(te[0]=V&255,te[1]=V>>>8&255,y.check=x(y.check,te,2,0)),V=0,Z=0,y.mode=st;case st:if(y.flags&1024){for(;Z<16;){if(at===0)break t;at--,V+=ft[nt++]<<Z,Z+=8}y.length=V,y.head&&(y.head.extra_len=V),y.flags&512&&(te[0]=V&255,te[1]=V>>>8&255,y.check=x(y.check,te,2,0)),V=0,Z=0}else y.head&&(y.head.extra=null);y.mode=Rt;case Rt:if(y.flags&1024&&(ht=y.length,ht>at&&(ht=at),ht&&(y.head&&(Vt=y.head.extra_len-y.length,y.head.extra||(y.head.extra=new Array(y.head.extra_len)),v.arraySet(y.head.extra,ft,nt,ht,Vt)),y.flags&512&&(y.check=x(y.check,ft,ht,nt)),at-=ht,nt+=ht,y.length-=ht),y.length))break t;y.length=0,y.mode=vt;case vt:if(y.flags&2048){if(at===0)break t;ht=0;do Vt=ft[nt+ht++],y.head&&Vt&&y.length<65536&&(y.head.name+=String.fromCharCode(Vt));while(Vt&&ht<at);if(y.flags&512&&(y.check=x(y.check,ft,ht,nt)),at-=ht,nt+=ht,Vt)break t}else y.head&&(y.head.name=null);y.length=0,y.mode=Dt;case Dt:if(y.flags&4096){if(at===0)break t;ht=0;do Vt=ft[nt+ht++],y.head&&Vt&&y.length<65536&&(y.head.comment+=String.fromCharCode(Vt));while(Vt&&ht<at);if(y.flags&512&&(y.check=x(y.check,ft,ht,nt)),at-=ht,nt+=ht,Vt)break t}else y.head&&(y.head.comment=null);y.mode=bt;case bt:if(y.flags&512){for(;Z<16;){if(at===0)break t;at--,V+=ft[nt++]<<Z,Z+=8}if(V!==(y.check&65535)){U.msg="header crc mismatch",y.mode=gt;break}V=0,Z=0}y.head&&(y.head.hcrc=y.flags>>9&1,y.head.done=!0),U.adler=y.check=0,y.mode=P;break;case wt:for(;Z<32;){if(at===0)break t;at--,V+=ft[nt++]<<Z,Z+=8}U.adler=y.check=D(V),V=0,Z=0,y.mode=Yt;case Yt:if(y.havedict===0)return U.next_out=ue,U.avail_out=qt,U.next_in=nt,U.avail_in=at,y.hold=V,y.bits=Z,A;U.adler=y.check=1,y.mode=P;case P:if(it===R||it===I)break t;case C:if(y.last){V>>>=Z&7,Z-=Z&7,y.mode=St;break}for(;Z<3;){if(at===0)break t;at--,V+=ft[nt++]<<Z,Z+=8}switch(y.last=V&1,V>>>=1,Z-=1,V&3){case 0:y.mode=G;break;case 1:if(Xe(y),y.mode=jt,it===I){V>>>=2,Z-=2;break t}break;case 2:y.mode=ut;break;case 3:U.msg="invalid block type",y.mode=gt}V>>>=2,Z-=2;break;case G:for(V>>>=Z&7,Z-=Z&7;Z<32;){if(at===0)break t;at--,V+=ft[nt++]<<Z,Z+=8}if((V&65535)!=(V>>>16^65535)){U.msg="invalid stored block lengths",y.mode=gt;break}if(y.length=V&65535,V=0,Z=0,y.mode=lt,it===I)break t;case lt:y.mode=It;case It:if(ht=y.length,ht){if(ht>at&&(ht=at),ht>qt&&(ht=qt),ht===0)break t;v.arraySet(Mt,ft,nt,ht,ue),at-=ht,nt+=ht,qt-=ht,ue+=ht,y.length-=ht;break}y.mode=P;break;case ut:for(;Z<14;){if(at===0)break t;at--,V+=ft[nt++]<<Z,Z+=8}if(y.nlen=(V&31)+257,V>>>=5,Z-=5,y.ndist=(V&31)+1,V>>>=5,Z-=5,y.ncode=(V&15)+4,V>>>=4,Z-=4,y.nlen>286||y.ndist>30){U.msg="too many length or distance symbols",y.mode=gt;break}y.have=0,y.mode=Et;case Et:for(;y.have<y.ncode;){for(;Z<3;){if(at===0)break t;at--,V+=ft[nt++]<<Z,Z+=8}y.lens[yr[y.have++]]=V&7,V>>>=3,Z-=3}for(;y.have<19;)y.lens[yr[y.have++]]=0;if(y.lencode=y.lendyn,y.lenbits=7,_e={bits:y.lenbits},fe=m(p,y.lens,0,19,y.lencode,0,y.work,_e),y.lenbits=_e.bits,fe){U.msg="invalid code lengths set",y.mode=gt;break}y.have=0,y.mode=Zt;case Zt:for(;y.have<y.nlen+y.ndist;){for(;Bt=y.lencode[V&(1<<y.lenbits)-1],Nt=Bt>>>24,ee=Bt>>>16&255,se=Bt&65535,!(Nt<=Z);){if(at===0)break t;at--,V+=ft[nt++]<<Z,Z+=8}if(se<16)V>>>=Nt,Z-=Nt,y.lens[y.have++]=se;else{if(se===16){for(we=Nt+2;Z<we;){if(at===0)break t;at--,V+=ft[nt++]<<Z,Z+=8}if(V>>>=Nt,Z-=Nt,y.have===0){U.msg="invalid bit length repeat",y.mode=gt;break}Vt=y.lens[y.have-1],ht=3+(V&3),V>>>=2,Z-=2}else if(se===17){for(we=Nt+3;Z<we;){if(at===0)break t;at--,V+=ft[nt++]<<Z,Z+=8}V>>>=Nt,Z-=Nt,Vt=0,ht=3+(V&7),V>>>=3,Z-=3}else{for(we=Nt+7;Z<we;){if(at===0)break t;at--,V+=ft[nt++]<<Z,Z+=8}V>>>=Nt,Z-=Nt,Vt=0,ht=11+(V&127),V>>>=7,Z-=7}if(y.have+ht>y.nlen+y.ndist){U.msg="invalid bit length repeat",y.mode=gt;break}for(;ht--;)y.lens[y.have++]=Vt}}if(y.mode===gt)break;if(y.lens[256]===0){U.msg="invalid code -- missing end-of-block",y.mode=gt;break}if(y.lenbits=9,_e={bits:y.lenbits},fe=m(l,y.lens,0,y.nlen,y.lencode,0,y.work,_e),y.lenbits=_e.bits,fe){U.msg="invalid literal/lengths set",y.mode=gt;break}if(y.distbits=6,y.distcode=y.distdyn,_e={bits:y.distbits},fe=m(g,y.lens,y.nlen,y.ndist,y.distcode,0,y.work,_e),y.distbits=_e.bits,fe){U.msg="invalid distances set",y.mode=gt;break}if(y.mode=jt,it===I)break t;case jt:y.mode=Tt;case Tt:if(at>=6&&qt>=258){U.next_out=ue,U.avail_out=qt,U.next_in=nt,U.avail_in=at,y.hold=V,y.bits=Z,N(U,Pt),ue=U.next_out,Mt=U.output,qt=U.avail_out,nt=U.next_in,ft=U.input,at=U.avail_in,V=y.hold,Z=y.bits,y.mode===P&&(y.back=-1);break}for(y.back=0;Bt=y.lencode[V&(1<<y.lenbits)-1],Nt=Bt>>>24,ee=Bt>>>16&255,se=Bt&65535,!(Nt<=Z);){if(at===0)break t;at--,V+=ft[nt++]<<Z,Z+=8}if(ee&&(ee&240)==0){for(re=Nt,qe=ee,Ue=se;Bt=y.lencode[Ue+((V&(1<<re+qe)-1)>>re)],Nt=Bt>>>24,ee=Bt>>>16&255,se=Bt&65535,!(re+Nt<=Z);){if(at===0)break t;at--,V+=ft[nt++]<<Z,Z+=8}V>>>=re,Z-=re,y.back+=re}if(V>>>=Nt,Z-=Nt,y.back+=Nt,y.length=se,ee===0){y.mode=pt;break}if(ee&32){y.back=-1,y.mode=P;break}if(ee&64){U.msg="invalid literal/length code",y.mode=gt;break}y.extra=ee&15,y.mode=_;case _:if(y.extra){for(we=y.extra;Z<we;){if(at===0)break t;at--,V+=ft[nt++]<<Z,Z+=8}y.length+=V&(1<<y.extra)-1,V>>>=y.extra,Z-=y.extra,y.back+=y.extra}y.was=y.length,y.mode=E;case E:for(;Bt=y.distcode[V&(1<<y.distbits)-1],Nt=Bt>>>24,ee=Bt>>>16&255,se=Bt&65535,!(Nt<=Z);){if(at===0)break t;at--,V+=ft[nt++]<<Z,Z+=8}if((ee&240)==0){for(re=Nt,qe=ee,Ue=se;Bt=y.distcode[Ue+((V&(1<<re+qe)-1)>>re)],Nt=Bt>>>24,ee=Bt>>>16&255,se=Bt&65535,!(re+Nt<=Z);){if(at===0)break t;at--,V+=ft[nt++]<<Z,Z+=8}V>>>=re,Z-=re,y.back+=re}if(V>>>=Nt,Z-=Nt,y.back+=Nt,ee&64){U.msg="invalid distance code",y.mode=gt;break}y.offset=se,y.extra=ee&15,y.mode=Y;case Y:if(y.extra){for(we=y.extra;Z<we;){if(at===0)break t;at--,V+=ft[nt++]<<Z,Z+=8}y.offset+=V&(1<<y.extra)-1,V>>>=y.extra,Z-=y.extra,y.back+=y.extra}if(y.offset>y.dmax){U.msg="invalid distance too far back",y.mode=gt;break}y.mode=et;case et:if(qt===0)break t;if(ht=Pt-qt,y.offset>ht){if(ht=y.offset-ht,ht>y.whave&&y.sane){U.msg="invalid distance too far back",y.mode=gt;break}ht>y.wnext?(ht-=y.wnext,Pe=y.wsize-ht):Pe=y.wnext-ht,ht>y.length&&(ht=y.length),Re=y.window}else Re=Mt,Pe=ue-y.offset,ht=y.length;ht>qt&&(ht=qt),qt-=ht,y.length-=ht;do Mt[ue++]=Re[Pe++];while(--ht);y.length===0&&(y.mode=Tt);break;case pt:if(qt===0)break t;Mt[ue++]=y.length,qt--,y.mode=Tt;break;case St:if(y.wrap){for(;Z<32;){if(at===0)break t;at--,V|=ft[nt++]<<Z,Z+=8}if(Pt-=qt,U.total_out+=Pt,y.total+=Pt,Pt&&(U.adler=y.check=y.flags?x(y.check,Mt,Pt,ue-Pt):j(y.check,Mt,Pt,ue-Pt)),Pt=qt,(y.flags?V:D(V))!==y.check){U.msg="incorrect data check",y.mode=gt;break}V=0,Z=0}y.mode=K;case K:if(y.wrap&&y.flags){for(;Z<32;){if(at===0)break t;at--,V+=ft[nt++]<<Z,Z+=8}if(V!==(y.total&4294967295)){U.msg="incorrect length check",y.mode=gt;break}V=0,Z=0}y.mode=Jt;case Jt:fe=L;break t;case gt:fe=z;break t;case ne:return W;case ae:default:return Q}return U.next_out=ue,U.avail_out=qt,U.next_in=nt,U.avail_in=at,y.hold=V,y.bits=Z,(y.wsize||Pt!==U.avail_out&&y.mode<gt&&(y.mode<St||it!==u))&&dr(U,U.output,U.next_out,Pt-U.avail_out),Ye-=U.avail_in,Pt-=U.avail_out,U.total_in+=Ye,U.total_out+=Pt,y.total+=Pt,y.wrap&&Pt&&(U.adler=y.check=y.flags?x(y.check,Mt,Pt,U.next_out-Pt):j(y.check,Mt,Pt,U.next_out-Pt)),U.data_type=y.bits+(y.last?64:0)+(y.mode===P?128:0)+(y.mode===jt||y.mode===lt?256:0),(Ye===0&&Pt===0||it===u)&&fe===k&&(fe=_t),fe}function Dr(U){if(!U||!U.state)return Q;var it=U.state;return it.window&&(it.window=null),U.state=null,k}function Tr(U,it){var y;return!U||!U.state||(y=U.state,(y.wrap&2)==0)?Q:(y.head=it,it.done=!1,k)}function Ar(U,it){var y=it.length,ft,Mt,nt;return!U||!U.state||(ft=U.state,ft.wrap!==0&&ft.mode!==Yt)?Q:ft.mode===Yt&&(Mt=1,Mt=j(Mt,it,y,0),Mt!==ft.check)?z:(nt=dr(U,it,y,y),nt?(ft.mode=ne,W):(ft.havedict=1,k))}T.inflateReset=xt,T.inflateReset2=Lt,T.inflateResetKeep=H,T.inflateInit=Qt,T.inflateInit2=At,T.inflate=Me,T.inflateEnd=Dr,T.inflateGetHeader=Tr,T.inflateSetDictionary=Ar,T.inflateInfo="pako inflate (from Nodeca project)"},function(rt,T){var b=typeof Uint8Array!="undefined"&&typeof Uint16Array!="undefined"&&typeof Int32Array!="undefined";T.assign=function(x){for(var N=Array.prototype.slice.call(arguments,1);N.length;){var m=N.shift();if(!!m){if(typeof m!="object")throw new TypeError(m+"must be non-object");for(var p in m)m.hasOwnProperty(p)&&(x[p]=m[p])}}return x},T.shrinkBuf=function(x,N){return x.length===N?x:x.subarray?x.subarray(0,N):(x.length=N,x)};var v={arraySet:function(x,N,m,p,l){if(N.subarray&&x.subarray){x.set(N.subarray(m,m+p),l);return}for(var g=0;g<p;g++)x[l+g]=N[m+g]},flattenChunks:function(x){var N,m,p,l,g,u;for(p=0,N=0,m=x.length;N<m;N++)p+=x[N].length;for(u=new Uint8Array(p),l=0,N=0,m=x.length;N<m;N++)g=x[N],u.set(g,l),l+=g.length;return u}},j={arraySet:function(x,N,m,p,l){for(var g=0;g<p;g++)x[l+g]=N[m+g]},flattenChunks:function(x){return[].concat.apply([],x)}};T.setTyped=function(x){x?(T.Buf8=Uint8Array,T.Buf16=Uint16Array,T.Buf32=Int32Array,T.assign(T,v)):(T.Buf8=Array,T.Buf16=Array,T.Buf32=Array,T.assign(T,j))},T.setTyped(b)},function(rt,T){function b(v,j,x,N){for(var m=v&65535|0,p=v>>>16&65535|0,l=0;x!==0;){l=x>2e3?2e3:x,x-=l;do m=m+j[N++]|0,p=p+m|0;while(--l);m%=65521,p%=65521}return m|p<<16|0}rt.exports=b},function(rt,T){function b(){for(var x,N=[],m=0;m<256;m++){x=m;for(var p=0;p<8;p++)x=x&1?3988292384^x>>>1:x>>>1;N[m]=x}return N}var v=b();function j(x,N,m,p){var l=v,g=p+m;x^=-1;for(var u=p;u<g;u++)x=x>>>8^l[(x^N[u])&255];return x^-1}rt.exports=j},function(rt,T){var b=30,v=12;rt.exports=function(x,N){var m,p,l,g,u,R,I,k,L,A,Q,z,W,_t,q,kt,dt,M,$,st,Rt,vt,Dt,bt,wt;m=x.state,p=x.next_in,bt=x.input,l=p+(x.avail_in-5),g=x.next_out,wt=x.output,u=g-(N-x.avail_out),R=g+(x.avail_out-257),I=m.dmax,k=m.wsize,L=m.whave,A=m.wnext,Q=m.window,z=m.hold,W=m.bits,_t=m.lencode,q=m.distcode,kt=(1<<m.lenbits)-1,dt=(1<<m.distbits)-1;t:do{W<15&&(z+=bt[p++]<<W,W+=8,z+=bt[p++]<<W,W+=8),M=_t[z&kt];e:for(;;){if($=M>>>24,z>>>=$,W-=$,$=M>>>16&255,$===0)wt[g++]=M&65535;else if($&16){st=M&65535,$&=15,$&&(W<$&&(z+=bt[p++]<<W,W+=8),st+=z&(1<<$)-1,z>>>=$,W-=$),W<15&&(z+=bt[p++]<<W,W+=8,z+=bt[p++]<<W,W+=8),M=q[z&dt];r:for(;;){if($=M>>>24,z>>>=$,W-=$,$=M>>>16&255,$&16){if(Rt=M&65535,$&=15,W<$&&(z+=bt[p++]<<W,W+=8,W<$&&(z+=bt[p++]<<W,W+=8)),Rt+=z&(1<<$)-1,Rt>I){x.msg="invalid distance too far back",m.mode=b;break t}if(z>>>=$,W-=$,$=g-u,Rt>$){if($=Rt-$,$>L&&m.sane){x.msg="invalid distance too far back",m.mode=b;break t}if(vt=0,Dt=Q,A===0){if(vt+=k-$,$<st){st-=$;do wt[g++]=Q[vt++];while(--$);vt=g-Rt,Dt=wt}}else if(A<$){if(vt+=k+A-$,$-=A,$<st){st-=$;do wt[g++]=Q[vt++];while(--$);if(vt=0,A<st){$=A,st-=$;do wt[g++]=Q[vt++];while(--$);vt=g-Rt,Dt=wt}}}else if(vt+=A-$,$<st){st-=$;do wt[g++]=Q[vt++];while(--$);vt=g-Rt,Dt=wt}for(;st>2;)wt[g++]=Dt[vt++],wt[g++]=Dt[vt++],wt[g++]=Dt[vt++],st-=3;st&&(wt[g++]=Dt[vt++],st>1&&(wt[g++]=Dt[vt++]))}else{vt=g-Rt;do wt[g++]=wt[vt++],wt[g++]=wt[vt++],wt[g++]=wt[vt++],st-=3;while(st>2);st&&(wt[g++]=wt[vt++],st>1&&(wt[g++]=wt[vt++]))}}else if(($&64)==0){M=q[(M&65535)+(z&(1<<$)-1)];continue r}else{x.msg="invalid distance code",m.mode=b;break t}break}}else if(($&64)==0){M=_t[(M&65535)+(z&(1<<$)-1)];continue e}else if($&32){m.mode=v;break t}else{x.msg="invalid literal/length code",m.mode=b;break t}break}}while(p<l&&g<R);st=W>>3,p-=st,W-=st<<3,z&=(1<<W)-1,x.next_in=p,x.next_out=g,x.avail_in=p<l?5+(l-p):5-(p-l),x.avail_out=g<R?257+(R-g):257-(g-R),m.hold=z,m.bits=W}},function(rt,T,b){var v=b(33),j=15,x=852,N=592,m=0,p=1,l=2,g=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],u=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],R=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],I=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];rt.exports=function(L,A,Q,z,W,_t,q,kt){var dt=kt.bits,M=0,$=0,st=0,Rt=0,vt=0,Dt=0,bt=0,wt=0,Yt=0,P=0,C,G,lt,It,ut,Et=null,Zt=0,jt,Tt=new v.Buf16(j+1),_=new v.Buf16(j+1),E=null,Y=0,et,pt,St;for(M=0;M<=j;M++)Tt[M]=0;for($=0;$<z;$++)Tt[A[Q+$]]++;for(vt=dt,Rt=j;Rt>=1&&Tt[Rt]===0;Rt--);if(vt>Rt&&(vt=Rt),Rt===0)return W[_t++]=1<<24|64<<16|0,W[_t++]=1<<24|64<<16|0,kt.bits=1,0;for(st=1;st<Rt&&Tt[st]===0;st++);for(vt<st&&(vt=st),wt=1,M=1;M<=j;M++)if(wt<<=1,wt-=Tt[M],wt<0)return-1;if(wt>0&&(L===m||Rt!==1))return-1;for(_[1]=0,M=1;M<j;M++)_[M+1]=_[M]+Tt[M];for($=0;$<z;$++)A[Q+$]!==0&&(q[_[A[Q+$]]++]=$);if(L===m?(Et=E=q,jt=19):L===p?(Et=g,Zt-=257,E=u,Y-=257,jt=256):(Et=R,E=I,jt=-1),P=0,$=0,M=st,ut=_t,Dt=vt,bt=0,lt=-1,Yt=1<<vt,It=Yt-1,L===p&&Yt>x||L===l&&Yt>N)return 1;for(;;){et=M-bt,q[$]<jt?(pt=0,St=q[$]):q[$]>jt?(pt=E[Y+q[$]],St=Et[Zt+q[$]]):(pt=32+64,St=0),C=1<<M-bt,G=1<<Dt,st=G;do G-=C,W[ut+(P>>bt)+G]=et<<24|pt<<16|St|0;while(G!==0);for(C=1<<M-1;P&C;)C>>=1;if(C!==0?(P&=C-1,P+=C):P=0,$++,--Tt[M]==0){if(M===Rt)break;M=A[Q+q[$]]}if(M>vt&&(P&It)!==lt){for(bt===0&&(bt=vt),ut+=st,Dt=M-bt,wt=1<<Dt;Dt+bt<Rt&&(wt-=Tt[Dt+bt],!(wt<=0));)Dt++,wt<<=1;if(Yt+=1<<Dt,L===p&&Yt>x||L===l&&Yt>N)return 1;lt=P&It,W[lt]=vt<<24|Dt<<16|ut-_t|0}}return P!==0&&(W[ut+P]=M-bt<<24|64<<16|0),kt.bits=vt,0}},function(rt,T,b){var v=b(33),j=!0,x=!0;try{String.fromCharCode.apply(null,[0])}catch(l){j=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(l){x=!1}for(var N=new v.Buf8(256),m=0;m<256;m++)N[m]=m>=252?6:m>=248?5:m>=240?4:m>=224?3:m>=192?2:1;N[254]=N[254]=1,T.string2buf=function(l){var g,u,R,I,k,L=l.length,A=0;for(I=0;I<L;I++)u=l.charCodeAt(I),(u&64512)==55296&&I+1<L&&(R=l.charCodeAt(I+1),(R&64512)==56320&&(u=65536+(u-55296<<10)+(R-56320),I++)),A+=u<128?1:u<2048?2:u<65536?3:4;for(g=new v.Buf8(A),k=0,I=0;k<A;I++)u=l.charCodeAt(I),(u&64512)==55296&&I+1<L&&(R=l.charCodeAt(I+1),(R&64512)==56320&&(u=65536+(u-55296<<10)+(R-56320),I++)),u<128?g[k++]=u:u<2048?(g[k++]=192|u>>>6,g[k++]=128|u&63):u<65536?(g[k++]=224|u>>>12,g[k++]=128|u>>>6&63,g[k++]=128|u&63):(g[k++]=240|u>>>18,g[k++]=128|u>>>12&63,g[k++]=128|u>>>6&63,g[k++]=128|u&63);return g};function p(l,g){if(g<65537&&(l.subarray&&x||!l.subarray&&j))return String.fromCharCode.apply(null,v.shrinkBuf(l,g));for(var u="",R=0;R<g;R++)u+=String.fromCharCode(l[R]);return u}T.buf2binstring=function(l){return p(l,l.length)},T.binstring2buf=function(l){for(var g=new v.Buf8(l.length),u=0,R=g.length;u<R;u++)g[u]=l.charCodeAt(u);return g},T.buf2string=function(l,g){var u,R,I,k,L=g||l.length,A=new Array(L*2);for(R=0,u=0;u<L;){if(I=l[u++],I<128){A[R++]=I;continue}if(k=N[I],k>4){A[R++]=65533,u+=k-1;continue}for(I&=k===2?31:k===3?15:7;k>1&&u<L;)I=I<<6|l[u++]&63,k--;if(k>1){A[R++]=65533;continue}I<65536?A[R++]=I:(I-=65536,A[R++]=55296|I>>10&1023,A[R++]=56320|I&1023)}return p(A,R)},T.utf8border=function(l,g){var u;for(g=g||l.length,g>l.length&&(g=l.length),u=g-1;u>=0&&(l[u]&192)==128;)u--;return u<0||u===0?g:u+N[l[u]]>g?u:g}},function(rt,T){rt.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(rt,T){rt.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(rt,T){function b(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}rt.exports=b},function(rt,T){function b(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}rt.exports=b}])})}),aa=na(ot),sa=ot.BFSRequire,ua=ot.BrowserFS,fa=ot.Buf16,ca=ot.Buf32,la=ot.Buf8,ha=ot.Buffer,pa=ot.Duplex,da=ot.EmscriptenFS,ya=ot.Errors,va=ot.FileSystem,ga=ot.INSPECT_MAX_BYTES,wa=ot.Inflate,ma=ot.PassThrough,Sa=ot.Readable,_a=ot.SlowBuffer,Ea=ot.Stream,Fa=ot.StringDecoder,Ia=ot.Transform,xa=ot.Writable,ka=ot.alloc,ba=ot.allocUnsafe,Ra=ot.allocUnsafeSlow,Na=ot.assign,Oa=ot.binstring2buf,La=ot.buf2binstring,Da=ot.buf2string,Ta=ot.byteLength,Aa=ot.configure;export default aa;var Ca=ot.from,Ma=ot.fromByteArray,Pa=ot.getFileSystem,Ua=ot.inflate,za=ot.inflateEnd,ja=ot.inflateGetHeader,Ba=ot.inflateInfo,Wa=ot.inflateInit,Ha=ot.inflateInit2,Za=ot.inflateRaw,Va=ot.inflateReset,Xa=ot.inflateReset2,Ya=ot.inflateResetKeep,qa=ot.inflateSetDictionary,Ga=ot.initialize,Ka=ot.install,Ja=ot.isArray,Qa=ot.isBoolean,$a=ot.isBuffer,ts=ot.isDate,es=ot.isError,rs=ot.isFunction,ns=ot.isNull,is=ot.isNullOrUndefined,os=ot.isNumber,as=ot.isObject,ss=ot.isPrimitive,us=ot.isRegExp,fs=ot.isString,cs=ot.isSymbol,ls=ot.isUndefined,hs=ot.kMaxLength,ps=ot.read,ds=ot.registerFileSystem,ys=ot.setImmediate,vs=ot.setTyped,gs=ot.shrinkBuf,ws=ot.string2buf,ms=ot.toByteArray,Ss=ot.ungzip,_s=ot.utf8border,Es=ot.write;export{sa as BFSRequire,ua as BrowserFS,fa as Buf16,ca as Buf32,la as Buf8,ha as Buffer,pa as Duplex,da as EmscriptenFS,ya as Errors,va as FileSystem,ga as INSPECT_MAX_BYTES,wa as Inflate,ma as PassThrough,Sa as Readable,_a as SlowBuffer,Ea as Stream,Fa as StringDecoder,Ia as Transform,xa as Writable,ot as __moduleExports,ka as alloc,ba as allocUnsafe,Ra as allocUnsafeSlow,Na as assign,Oa as binstring2buf,La as buf2binstring,Da as buf2string,Ta as byteLength,Aa as configure,Ca as from,Ma as fromByteArray,Pa as getFileSystem,Ua as inflate,za as inflateEnd,ja as inflateGetHeader,Ba as inflateInfo,Wa as inflateInit,Ha as inflateInit2,Za as inflateRaw,Va as inflateReset,Xa as inflateReset2,Ya as inflateResetKeep,qa as inflateSetDictionary,Ga as initialize,Ka as install,Ja as isArray,Qa as isBoolean,$a as isBuffer,ts as isDate,es as isError,rs as isFunction,ns as isNull,is as isNullOrUndefined,os as isNumber,as as isObject,ss as isPrimitive,us as isRegExp,fs as isString,cs as isSymbol,ls as isUndefined,hs as kMaxLength,ps as read,ds as registerFileSystem,ys as setImmediate,vs as setTyped,gs as shrinkBuf,ws as string2buf,ms as toByteArray,Ss as ungzip,_s as utf8border,Es as write};
