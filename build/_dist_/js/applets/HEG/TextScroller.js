var h=Object.defineProperty;var a=(n,t,i)=>(typeof t!="symbol"&&(t+=""),t in n?h(n,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):n[t]=i);import{brainsatplay as o}from"../../brainsatplay.js";import{DOMFragment as d}from"../../frontend/utils/DOMFragment.js";export class TextScrollerApplet{constructor(t=document.body,i=new o,e=[]){a(this,"startpxf",()=>{this.pxf=this.lastpxf});a(this,"stoppxf",()=>{this.lastpxf=this.pxf,this.pxf=0});a(this,"updateLoop",()=>{if(this.bci.atlas.settings.heg){let t=this.bci.atlas.data.heg[0].count,i=40;t<i&&(i=t);let e=this.bci.atlas.data.heg[0].ratio.slice(t-i),s=this.bci.atlas.data.heg[0].ratio[t-1]-this.mean(e);this.onData(s)}this.draw(),setTimeout(()=>{this.animationId=requestAnimationFrame(this.updateLoop)},15)});a(this,"draw",()=>{this.maxXPos=this.c.width,this.textXPos+=this.pxf,this.ctx.clearRect(0,0,this.c.width,this.c.height),this.ctx.font="2em Arial",this.ctx.fillStyle="#ffffff",this.ctx.fillText(this.text,this.maxXPos-this.textXPos,this.c.height*.5)});this.bci=i,this.parentNode=t,this.settings=e,this.AppletHTML=null,this.props={id:String(Math.floor(Math.random()*1e6))},this.c=null,this.ctx=null,this.text="Leap clear of all that is corporeal, and make yourself grown to a like expanse with that greatness which is beyond all measure... rise above all time and become eternal... then you will apprehend God.         Think that for you too nothing is impossible; deem that you too are immortal, and that you are able to grasp all things in your thought, to know every craft and science; find your home in the haunts of every living creature;         make yourself higher than all heights and lower than all depths; bring together in yourself all opposites of quality, heat and cold, dryness and fluidity;         think that you are everywhere at once, on land, at sea, in heaven; think that you are not yet begotten, that you are in the womb, that you are young, that you are old, that you have died, that you are in the world beyond the grave;         grasp in your thought all of this at once, all times and places, all substances and qualities and magnitudes together; then you can apprehend God.         But if you shut up your soul in your body, and abase yourself, and say \u201CI know nothing, I can do nothing; I am afraid of earth and sea, I cannot mount to heaven; I know not what I was, nor what I shall be,\u201D then what have you to do with God?",this.hidden=!1,this.pxf=.5,this.lastpxf=this.pxf,this.maxXPos=100,this.textXPos=0,this.animationId=null}init(){let t=(e=this.props)=>`
            <div id='`+e.id+`'>
                <div id='`+e.id+"menu' style='position:absolute; z-index:4;'>                     <textarea id='"+e.id+"Textarea'>Breathe in, Breathe out, Breathe in, Breathe out...</textarea><br>                     <button id='"+e.id+`submittext'>Submit</button>                 </div>
                <button id='`+e.id+`showhide' style='float:right; z-index:5;'>Hide UI</button>       
                <canvas id='`+e.id+`canvas'></canvas>
            </div>
            `,i=(e=this.props)=>{this.c=document.getElementById(e.id+"canvas"),this.ctx=this.c.getContext("2d"),document.getElementById(e.id+"submittext").onclick=()=>{this.text=document.getElementById(e.id+"Textarea").value,this.textXPos=0},document.getElementById(e.id+"showhide").onclick=()=>{this.hidden==!1?(this.hidden=!0,document.getElementById(e.id+"showhide").innerHTML="Show UI",document.getElementById(e.id+"menu").style.display="none"):(this.hidden=!1,document.getElementById(e.id+"showhide").innerHTML="Hide UI",document.getElementById(e.id+"menu").style.display="")}};this.AppletHTML=new d(t,this.parentNode,this.props,i,void 0,"NEVER"),this.settings.length>0&&this.configure(this.settings),this.maxXPos=this.AppletHTML.node.clientWidth,this.updateLoop()}deinit(){cancelAnimationFrame(this.updateLoop),this.AppletHTML.deleteNode()}responsive(){let t=document.getElementById(this.props.id+"canvas");t.width=this.AppletHTML.node.clientWidth,t.height=this.AppletHTML.node.clientHeight,this.maxXPos=this.AppletHTML.node.clientWidth}configure(t=[]){t.forEach((i,e)=>{})}onData(t){this.pxf+=t}}a(TextScrollerApplet,"devices",["heg"]);
